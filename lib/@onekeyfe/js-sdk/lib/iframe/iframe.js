'use strict';function a141_0x4cdc(_0x4db79e,_0x34fcf1){var _0x5abd4c=a141_0x5abd();return a141_0x4cdc=function(_0x4cdc13,_0x551b27){_0x4cdc13=_0x4cdc13-0xd4;var _0x164d3e=_0x5abd4c[_0x4cdc13];return _0x164d3e;},a141_0x4cdc(_0x4db79e,_0x34fcf1);}var a141_0x357e51=a141_0x4cdc;function a141_0x5abd(){var _0xa110d5=['10477704JXXyce','CORE_EVENT','handleMessage','function','5JFGklT','1100754TRJsiN','HANDSHAKE','default','get','ADDRESS_VALIDATION','getCurrentMethod','indexOf','event','CUSTOM_MESSAGE_REQUEST','isWhitelisted','origin','features','set','load','isArray','parse','settings','location','debug','wrap','length','LOADED','filter','enabled','prototype','unload','ERROR','defineProperty','UI_EVENT','popup','keys','onmessage','hasOwnProperty','getTransportInfo','initTransport','onBeforeUnload','14vPvSEA','getOwnPropertyDescriptors','message','sendMessage','addEventListener','CANCEL_POPUP_REQUEST','66719STieqn','PERMISSIONS_KEY','727044YFKqHG','file://','push','getOwnPropertyDescriptor','IFrame','timestamp','type','has','459414OUnLRj','109071VAkhQE','bridge','end','device','next','512vtMdPd','UiMessage','CALL','data','sent','enumerable','BUNDLE_PROGRESS','apply','prev','return','extension','undefined','trustedHost','number','stop','info','DEVICE_EVENT','40CKtECq','CLOSED','env','TRANSPORT_EVENT','null','INIT','52367EGXoJx','defineProperties','stopImmediatePropagation','payload','getOrigin','ports','forEach','11aKpMIO','postMessage','getSettings','ResponseMessage','LOGIN_CHALLENGE_REQUEST','POPUP.HANDSHAKE:\x20Core\x20not\x20initialized','init'];a141_0x5abd=function(){return _0xa110d5;};return a141_0x5abd();}(function(_0x2db5f9,_0x369d44){var _0x1983f9=a141_0x4cdc,_0x538e42=_0x2db5f9();while(!![]){try{var _0x5c4a25=-parseInt(_0x1983f9(0xf3))/0x1+-parseInt(_0x1983f9(0xed))/0x2*(parseInt(_0x1983f9(0xfe))/0x3)+-parseInt(_0x1983f9(0xf5))/0x4+-parseInt(_0x1983f9(0x12c))/0x5*(parseInt(_0x1983f9(0xfd))/0x6)+-parseInt(_0x1983f9(0x11a))/0x7*(-parseInt(_0x1983f9(0x103))/0x8)+parseInt(_0x1983f9(0x12d))/0x9*(-parseInt(_0x1983f9(0x114))/0xa)+-parseInt(_0x1983f9(0x121))/0xb*(-parseInt(_0x1983f9(0x128))/0xc);if(_0x5c4a25===_0x369d44)break;else _0x538e42['push'](_0x538e42['shift']());}catch(_0x529e30){_0x538e42['push'](_0x538e42['shift']());}}}(a141_0x5abd,0x45212));var _interopRequireDefault=require('@babel/runtime/helpers/interopRequireDefault'),_regenerator=_interopRequireDefault(require('@babel/runtime/regenerator')),_defineProperty2=_interopRequireDefault(require('@babel/runtime/helpers/defineProperty')),_asyncToGenerator2=_interopRequireDefault(require('@babel/runtime/helpers/asyncToGenerator')),_constants=require('../constants'),POPUP=_interopRequireWildcard(require('../constants/popup')),IFRAME=_interopRequireWildcard(require('../constants/iframe')),UI=_interopRequireWildcard(require('../constants/ui')),_ConnectSettings=require('../data/ConnectSettings'),_DataManager=_interopRequireDefault(require('../data/DataManager')),_Core=require('../core/Core'),_message=require('../message'),_builder=require('../message/builder'),_debug=_interopRequireWildcard(require('../utils/debug')),_windowsUtils=require('../utils/windowsUtils'),_networkUtils=require('../env/browser/networkUtils'),_browserUtils=require('../env/browser/browserUtils'),_storage=require('../storage'),_setupSentry=_interopRequireDefault(require('../utils/setupSentry'));function _getRequireWildcardCache(_0x269e68){var _0x212fc4=a141_0x4cdc;if(typeof WeakMap!==_0x212fc4(0x12b))return null;var _0x18e75c=new WeakMap(),_0x98601a=new WeakMap();return(_getRequireWildcardCache=function _0x430093(_0x1a8b6c){return _0x1a8b6c?_0x98601a:_0x18e75c;})(_0x269e68);}function _interopRequireWildcard(_0x4e3d34,_0xc6e154){var _0x2a216e=a141_0x4cdc;if(!_0xc6e154&&_0x4e3d34&&_0x4e3d34['__esModule'])return _0x4e3d34;if(_0x4e3d34===null||typeof _0x4e3d34!=='object'&&typeof _0x4e3d34!=='function')return{'default':_0x4e3d34};var _0x31dec0=_getRequireWildcardCache(_0xc6e154);if(_0x31dec0&&_0x31dec0[_0x2a216e(0xfc)](_0x4e3d34))return _0x31dec0[_0x2a216e(0x130)](_0x4e3d34);var _0x416723={},_0x57af76=Object[_0x2a216e(0xe4)]&&Object[_0x2a216e(0xf8)];for(var _0x448db4 in _0x4e3d34){if(_0x448db4!==_0x2a216e(0x12f)&&Object[_0x2a216e(0xe1)][_0x2a216e(0xe9)]['call'](_0x4e3d34,_0x448db4)){var _0x4c7537=_0x57af76?Object[_0x2a216e(0xf8)](_0x4e3d34,_0x448db4):null;_0x4c7537&&(_0x4c7537[_0x2a216e(0x130)]||_0x4c7537['set'])?Object['defineProperty'](_0x416723,_0x448db4,_0x4c7537):_0x416723[_0x448db4]=_0x4e3d34[_0x448db4];}}return _0x416723[_0x2a216e(0x12f)]=_0x4e3d34,_0x31dec0&&_0x31dec0[_0x2a216e(0xd5)](_0x4e3d34,_0x416723),_0x416723;}function ownKeys(_0x3ffb53,_0x3c880e){var _0x5a76b0=a141_0x4cdc,_0x529e92=Object[_0x5a76b0(0xe7)](_0x3ffb53);if(Object['getOwnPropertySymbols']){var _0x414dda=Object['getOwnPropertySymbols'](_0x3ffb53);_0x3c880e&&(_0x414dda=_0x414dda[_0x5a76b0(0xdf)](function(_0x4d4aa7){var _0x174ed5=_0x5a76b0;return Object[_0x174ed5(0xf8)](_0x3ffb53,_0x4d4aa7)[_0x174ed5(0x108)];})),_0x529e92[_0x5a76b0(0xf7)][_0x5a76b0(0x10a)](_0x529e92,_0x414dda);}return _0x529e92;}function _objectSpread(_0x3e1c32){var _0x47844c=a141_0x4cdc;for(var _0x2c4c94=0x1;_0x2c4c94<arguments[_0x47844c(0xdd)];_0x2c4c94++){var _0x4e86b7=arguments[_0x2c4c94]!=null?arguments[_0x2c4c94]:{};if(_0x2c4c94%0x2)ownKeys(Object(_0x4e86b7),!![])['forEach'](function(_0x4e71c2){var _0x44d60e=_0x47844c;(0x0,_defineProperty2[_0x44d60e(0x12f)])(_0x3e1c32,_0x4e71c2,_0x4e86b7[_0x4e71c2]);});else Object[_0x47844c(0xee)]?Object[_0x47844c(0x11b)](_0x3e1c32,Object[_0x47844c(0xee)](_0x4e86b7)):ownKeys(Object(_0x4e86b7))[_0x47844c(0x120)](function(_0x5538ca){var _0x6a4f52=_0x47844c;Object[_0x6a4f52(0xe4)](_0x3e1c32,_0x5538ca,Object[_0x6a4f52(0xf8)](_0x4e86b7,_0x5538ca));});}return _0x3e1c32;}var _core,_log=(0x0,_debug['init'])(a141_0x357e51(0xf9)),_popupMessagePort;(0x0,_setupSentry[a141_0x357e51(0x12f)])();var handleMessage=function handleMessage(_0x476cc7){var _0x29201c=a141_0x357e51;if(_0x476cc7['source']===window||!_0x476cc7['data'])return;var _0x406029=_0x476cc7[_0x29201c(0x106)],_0x404611=typeof _0x406029['id']===_0x29201c(0x110)?_0x406029['id']:0x0,_0x289897=function _0x55d1c5(_0x2d0f89){var _0x4838d1=_0x29201c;postMessage((0x0,_builder[_0x4838d1(0x124)])(_0x404611,![],{'error':_0x2d0f89})),postMessage((0x0,_builder[_0x4838d1(0x104)])(POPUP[_0x4838d1(0xf2)]));};if(!_core&&_0x406029['type']===IFRAME[_0x29201c(0x105)]){_0x289897('Core\x20not\x20initialized\x20yet!');return;}if(_0x406029[_0x29201c(0xfb)]===IFRAME[_0x29201c(0x119)]){init(_0x406029[_0x29201c(0x11d)],_0x476cc7[_0x29201c(0x137)]);return;}if(_0x406029['type']===POPUP[_0x29201c(0x12e)]&&_0x476cc7[_0x29201c(0x137)]===window[_0x29201c(0xda)][_0x29201c(0x137)]){if(!_popupMessagePort||_popupMessagePort instanceof MessagePort){if(!_0x476cc7[_0x29201c(0x11f)]||_0x476cc7[_0x29201c(0x11f)]['length']<0x1){_0x289897('POPUP.HANDSHAKE:\x20popupMessagePort\x20not\x20found');return;}_popupMessagePort=_0x476cc7[_0x29201c(0x11f)][0x0];}if(!_core){_0x289897(_0x29201c(0x126));return;}var _0x3c7f41=_core[_0x29201c(0x132)]()[0x0];postMessage((0x0,_builder['UiMessage'])(POPUP[_0x29201c(0x12e)],{'settings':_DataManager[_0x29201c(0x12f)][_0x29201c(0x123)](),'transport':_core[_0x29201c(0xea)](),'method':_0x3c7f41?_0x3c7f41[_0x29201c(0x112)]:null}));}_0x406029[_0x29201c(0xfb)]===POPUP[_0x29201c(0x115)]&&(_popupMessagePort instanceof MessagePort&&(_popupMessagePort=null));var _0x2aa50a=_DataManager['default'][_0x29201c(0x136)](_0x476cc7[_0x29201c(0x137)]),_0x4a6c28=_0x476cc7[_0x29201c(0x137)]===window[_0x29201c(0xda)]['origin']||!!_0x2aa50a,_0x289af4=(0x0,_networkUtils['getOrigin'])(_0x476cc7[_0x29201c(0x137)]);if(!_0x4a6c28&&_0x289af4!==_DataManager[_0x29201c(0x12f)][_0x29201c(0x123)](_0x29201c(0x137))&&_0x289af4!==(0x0,_networkUtils[_0x29201c(0x11e)])(document['referrer']))return;var _0x30b93f=(0x0,_message['parseMessage'])(_0x406029);_0x476cc7['preventDefault'](),_0x476cc7[_0x29201c(0x11c)](),_core[_0x29201c(0x12a)](_0x30b93f,_0x4a6c28);},postMessage=function postMessage(_0x26f4d9){var _0x3194be=a141_0x357e51;_log[_0x3194be(0xdb)](_0x3194be(0x122),_0x26f4d9);var _0x955ea4=_DataManager[_0x3194be(0x12f)][_0x3194be(0x123)](_0x3194be(0xe6)),_0x55b67b=_DataManager[_0x3194be(0x12f)][_0x3194be(0x123)](_0x3194be(0x10f)),_0x44a7d7=_0x26f4d9['type']===IFRAME[_0x3194be(0xde)];if(!_0x955ea4){if(_0x26f4d9['type']===UI['REQUEST_UI_WINDOW']){_core[_0x3194be(0x12a)]({'event':_constants['UI_EVENT'],'type':POPUP[_0x3194be(0x12e)]},!![]);return;}else{if(_0x26f4d9[_0x3194be(0xfb)]===POPUP[_0x3194be(0xf2)])return;}}if(!_0x55b67b&&!_0x44a7d7&&_0x26f4d9[_0x3194be(0x134)]===_constants[_0x3194be(0x117)])return;if(!_0x55b67b&&_0x26f4d9[_0x3194be(0x134)]===_constants[_0x3194be(0x113)]&&!filterDeviceEvent(_0x26f4d9))return;_0x26f4d9[_0x3194be(0x134)]===_constants['TRANSPORT_EVENT']&&(_0x26f4d9[_0x3194be(0x11d)][_0x3194be(0xff)]=(0x0,_browserUtils['suggestBridgeInstaller'])());if(_0x955ea4&&targetUiEvent(_0x26f4d9))_popupMessagePort&&_popupMessagePort[_0x3194be(0x122)](_0x26f4d9);else{var _0x3129c9=_DataManager['default'][_0x3194be(0x123)](_0x3194be(0x137));if(!_0x3129c9||_0x3129c9[_0x3194be(0x133)](_0x3194be(0xf6))>=0x0)_0x3129c9='*';(0x0,_windowsUtils[_0x3194be(0xf0)])(_0x26f4d9,_0x3129c9);}},targetUiEvent=function targetUiEvent(_0x4d3b1f){var _0x1cab3e=a141_0x357e51,_0x448223=[IFRAME[_0x1cab3e(0xde)],IFRAME[_0x1cab3e(0xe3)],POPUP['CANCEL_POPUP_REQUEST'],UI['CLOSE_UI_WINDOW'],UI[_0x1cab3e(0x135)],UI[_0x1cab3e(0x125)],UI[_0x1cab3e(0x109)],UI[_0x1cab3e(0x131)]];return _0x4d3b1f[_0x1cab3e(0x134)]===_constants[_0x1cab3e(0xe5)]&&_0x448223[_0x1cab3e(0x133)](_0x4d3b1f[_0x1cab3e(0xfb)])<0x0;},filterDeviceEvent=function filterDeviceEvent(_0x292000){var _0x27e7cd=a141_0x357e51;if(!_0x292000[_0x27e7cd(0x11d)])return![];var _0x2268b9=_0x292000[_0x27e7cd(0x11d)][_0x27e7cd(0xd4)];if(_0x2268b9){var _0x4877aa=(0x0,_storage[_0x27e7cd(0xd6)])(_storage[_0x27e7cd(0xf4)])||(0x0,_storage[_0x27e7cd(0xd6)])(_storage[_0x27e7cd(0xf4)],!![]);if(_0x4877aa&&Array[_0x27e7cd(0xd7)](_0x4877aa)){var _0x2d4846=_0x4877aa[_0x27e7cd(0xdf)](function(_0x2ada83){var _0x440908=_0x27e7cd;return _0x2ada83[_0x440908(0x137)]===_DataManager[_0x440908(0x12f)][_0x440908(0x123)](_0x440908(0x137))&&_0x2ada83['type']==='read'&&_0x2ada83[_0x440908(0x101)]===_0x2268b9['device_id'];});return _0x2d4846[_0x27e7cd(0xdd)]>0x0;}}return![];},init=(function(){var _0x42bcc8=a141_0x357e51,_0x322396=(0x0,_asyncToGenerator2[_0x42bcc8(0x12f)])(_regenerator[_0x42bcc8(0x12f)]['mark'](function _0x3c55a4(_0x319466,_0x3c8c87){var _0x48054e=_0x42bcc8,_0x38193a,_0x435c85;return _regenerator[_0x48054e(0x12f)][_0x48054e(0xdc)](function _0x39aded(_0x1c7a0b){var _0x782f2e=_0x48054e;while(0x1){switch(_0x1c7a0b['prev']=_0x1c7a0b[_0x782f2e(0x102)]){case 0x0:if(!_DataManager[_0x782f2e(0x12f)][_0x782f2e(0x123)]('origin')){_0x1c7a0b['next']=0x2;break;}return _0x1c7a0b['abrupt'](_0x782f2e(0x10c));case 0x2:_0x38193a=(0x0,_ConnectSettings[_0x782f2e(0xd8)])(_objectSpread(_objectSpread({},_0x319466[_0x782f2e(0xd9)]),{},{'extension':_0x319466[_0x782f2e(0x10d)]})),_0x38193a[_0x782f2e(0x137)]=!_0x3c8c87||_0x3c8c87===_0x782f2e(0x118)?_0x319466['settings'][_0x782f2e(0x137)]:_0x3c8c87;if(_0x38193a[_0x782f2e(0xe6)]&&typeof BroadcastChannel!==_0x782f2e(0x10e)){_0x435c85=_0x38193a[_0x782f2e(0x116)]+'-'+_0x38193a[_0x782f2e(0xfa)];try{_popupMessagePort=new BroadcastChannel(_0x435c85),_popupMessagePort[_0x782f2e(0xe8)]=function(_0x1fea97){return handleMessage(_0x1fea97);};}catch(_0x389a1b){}}_log[_0x782f2e(0xe0)]=!!_0x38193a[_0x782f2e(0xdb)],_0x1c7a0b['prev']=0x6,_0x1c7a0b[_0x782f2e(0x102)]=0x9;return(0x0,_Core[_0x782f2e(0x127)])(_0x38193a);case 0x9:_core=_0x1c7a0b[_0x782f2e(0x107)],_core['on'](_constants[_0x782f2e(0x129)],postMessage),_0x1c7a0b[_0x782f2e(0x102)]=0xd;return(0x0,_Core[_0x782f2e(0xeb)])(_0x38193a);case 0xd:postMessage((0x0,_builder[_0x782f2e(0x104)])(IFRAME[_0x782f2e(0xde)],{'useBroadcastChannel':!!_popupMessagePort})),_0x1c7a0b[_0x782f2e(0x102)]=0x13;break;case 0x10:_0x1c7a0b[_0x782f2e(0x10b)]=0x10,_0x1c7a0b['t0']=_0x1c7a0b['catch'](0x6),postMessage((0x0,_builder[_0x782f2e(0x104)])(IFRAME[_0x782f2e(0xe3)],{'error':_0x1c7a0b['t0']}));case 0x13:case _0x782f2e(0x100):return _0x1c7a0b[_0x782f2e(0x111)]();}}},_0x3c55a4,null,[[0x6,0x10]]);}));return function _0x50e53d(_0xdec149,_0x1335b2){var _0x19e3be=_0x42bcc8;return _0x322396[_0x19e3be(0x10a)](this,arguments);};}());window[a141_0x357e51(0xf1)](a141_0x357e51(0xef),handleMessage,![]),window[a141_0x357e51(0xf1)](a141_0x357e51(0xe2),function(){var _0x5299a6=a141_0x357e51;_core&&_core[_0x5299a6(0xec)]();});