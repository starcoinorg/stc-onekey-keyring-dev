'use strict';function a168_0x3f9a(_0x43c28f,_0x4f6fe9){var _0x322ad2=a168_0x322a();return a168_0x3f9a=function(_0x3f9adb,_0x1befea){_0x3f9adb=_0x3f9adb-0x12c;var _0x467b15=_0x322ad2[_0x3f9adb];return _0x467b15;},a168_0x3f9a(_0x43c28f,_0x4f6fe9);}var a168_0x17c59a=a168_0x3f9a;(function(_0x5aff4c,_0x17b024){var _0x52df37=a168_0x3f9a,_0x3390e9=_0x5aff4c();while(!![]){try{var _0x57ea25=-parseInt(_0x52df37(0x16c))/0x1*(-parseInt(_0x52df37(0x13a))/0x2)+parseInt(_0x52df37(0x179))/0x3+-parseInt(_0x52df37(0x16f))/0x4+parseInt(_0x52df37(0x14b))/0x5+-parseInt(_0x52df37(0x132))/0x6+-parseInt(_0x52df37(0x12d))/0x7*(parseInt(_0x52df37(0x177))/0x8)+-parseInt(_0x52df37(0x137))/0x9*(-parseInt(_0x52df37(0x142))/0xa);if(_0x57ea25===_0x17b024)break;else _0x3390e9['push'](_0x3390e9['shift']());}catch(_0x37f0c7){_0x3390e9['push'](_0x3390e9['shift']());}}}(a168_0x322a,0x4586c));var _interopRequireDefault=require('@babel/runtime/helpers/interopRequireDefault');exports[a168_0x17c59a(0x147)]=!![],exports[a168_0x17c59a(0x16b)]=void 0x0;var _regenerator=_interopRequireDefault(require('@babel/runtime/regenerator')),_asyncToGenerator2=_interopRequireDefault(require('@babel/runtime/helpers/asyncToGenerator')),_builder=require('../../message/builder'),UI=_interopRequireWildcard(require('../../constants/ui')),POPUP=_interopRequireWildcard(require('../../constants/popup')),_common=require('./common'),_DataManager=_interopRequireDefault(require('../../data/DataManager'));function _getRequireWildcardCache(_0x3527e5){if(typeof WeakMap!=='function')return null;var _0x18df22=new WeakMap(),_0x5c34ae=new WeakMap();return(_getRequireWildcardCache=function _0x2be234(_0x2c3e8b){return _0x2c3e8b?_0x5c34ae:_0x18df22;})(_0x3527e5);}function a168_0x322a(){var _0xd72a7=['defineProperty','Please\x20install\x20<a\x20href=\x22https://onekey.so/download?client=bridge\x22\x20target=\x22_blank\x22\x20rel=\x22noreferrer\x20noopener\x22\x20onclick=\x22window.closeWindow();\x22>Bridge</a>\x20to\x20use\x20OneKey\x20device.','prev','unreadable','div','getElementsByClassName','Unrecognized\x20device','object','default','RECEIVE_DEVICE','prototype','loader','selectDevice','611CGBJmn','function','disabled','97484EKMTQM','hasOwnProperty','clientInformation','end','label','status','next','isArray','3351784igoQaM','occupied','297231iQhQkQ','wrapper','add','click','onclick','devices','getElementsByTagName','unknown','appendChild','7BAJljw','catch','normal','explain','button','500568kvWSmq','flex','getConfig','acquired','model-t','9eVMANT','get','device-explain','1214poxbtA','showView','Inactive\x20device','createElement','set','apply','className','length','309020ElOZwb','select-device-list','features','forEach','webusb','__esModule','EXTENSION_USB_PERMISSIONS','checked','icon','1553480vbSxnz','classList','unacquired','remember-device','iframe','list','has','return','stop','type','location','origin','UiMessage','span','device-name','textContent','container','usb','getOwnPropertyDescriptor','innerHTML'];a168_0x322a=function(){return _0xd72a7;};return a168_0x322a();}function _interopRequireWildcard(_0x10a0d6,_0x2e8192){var _0x1ee72f=a168_0x17c59a;if(!_0x2e8192&&_0x10a0d6&&_0x10a0d6[_0x1ee72f(0x147)])return _0x10a0d6;if(_0x10a0d6===null||typeof _0x10a0d6!==_0x1ee72f(0x166)&&typeof _0x10a0d6!==_0x1ee72f(0x16d))return{'default':_0x10a0d6};var _0x4d0be9=_getRequireWildcardCache(_0x2e8192);if(_0x4d0be9&&_0x4d0be9[_0x1ee72f(0x151)](_0x10a0d6))return _0x4d0be9[_0x1ee72f(0x138)](_0x10a0d6);var _0x5e3c9f={},_0x432638=Object[_0x1ee72f(0x15f)]&&Object[_0x1ee72f(0x15d)];for(var _0x423014 in _0x10a0d6){if(_0x423014!==_0x1ee72f(0x167)&&Object[_0x1ee72f(0x169)][_0x1ee72f(0x170)]['call'](_0x10a0d6,_0x423014)){var _0x457732=_0x432638?Object[_0x1ee72f(0x15d)](_0x10a0d6,_0x423014):null;_0x457732&&(_0x457732[_0x1ee72f(0x138)]||_0x457732[_0x1ee72f(0x13e)])?Object['defineProperty'](_0x5e3c9f,_0x423014,_0x457732):_0x5e3c9f[_0x423014]=_0x10a0d6[_0x423014];}}return _0x5e3c9f[_0x1ee72f(0x167)]=_0x10a0d6,_0x4d0be9&&_0x4d0be9['set'](_0x10a0d6,_0x5e3c9f),_0x5e3c9f;}var initWebUsbButton=function initWebUsbButton(_0x217396,_0x2fb9ea){var _0x21e7d7=a168_0x17c59a;if(!_0x217396)return;var _0x5370b2=_common['container'][_0x21e7d7(0x164)](_0x21e7d7(0x146))[0x0];_0x5370b2['style']['display']=_0x21e7d7(0x133);var _0xe417c0=_0x5370b2[_0x21e7d7(0x17f)](_0x21e7d7(0x131))[0x0];!_common['iframe']&&(_0xe417c0[_0x21e7d7(0x15e)]='<span\x20class=\x22plus\x22></span><span\x20class=\x22text\x22>Pair\x20devices</span>');var _0x44325a=_common[_0x21e7d7(0x14f)]?_common[_0x21e7d7(0x14f)][_0x21e7d7(0x171)][_0x21e7d7(0x15c)]:null,_0x3fc89d=(function(){var _0x539656=_0x21e7d7,_0xdfe95f=(0x0,_asyncToGenerator2['default'])(_regenerator[_0x539656(0x167)]['mark'](function _0x4566ff(){var _0x54585f=_0x539656;return _regenerator[_0x54585f(0x167)]['wrap'](function _0x5dcbf0(_0xef520c){var _0x481dfe=_0x54585f;while(0x1){switch(_0xef520c[_0x481dfe(0x161)]=_0xef520c[_0x481dfe(0x175)]){case 0x0:if(_0x44325a){_0xef520c[_0x481dfe(0x175)]=0x3;break;}window['postMessage']({'type':POPUP[_0x481dfe(0x148)]},window[_0x481dfe(0x155)][_0x481dfe(0x156)]);return _0xef520c['abrupt'](_0x481dfe(0x152));case 0x3:_0xef520c[_0x481dfe(0x161)]=0x3,_0xef520c['next']=0x6;return _0x44325a['requestDevice']({'filters':_DataManager[_0x481dfe(0x167)][_0x481dfe(0x134)]()[_0x481dfe(0x146)]});case 0x6:_0x2fb9ea&&(0x0,_common[_0x481dfe(0x13b)])(_0x481dfe(0x16a));_0xef520c['next']=0xb;break;case 0x9:_0xef520c[_0x481dfe(0x161)]=0x9,_0xef520c['t0']=_0xef520c[_0x481dfe(0x12e)](0x3);case 0xb:case _0x481dfe(0x172):return _0xef520c[_0x481dfe(0x153)]();}}},_0x4566ff,null,[[0x3,0x9]]);}));return function _0x43958c(){var _0x107ce7=_0x539656;return _0xdfe95f[_0x107ce7(0x13f)](this,arguments);};}());_0xe417c0[_0x21e7d7(0x17d)]=_0x3fc89d;},selectDevice=function selectDevice(_0x20cece){var _0x48627e=a168_0x17c59a;if(!_0x20cece)return;if(!_0x20cece[_0x48627e(0x17e)]||!Array[_0x48627e(0x176)](_0x20cece[_0x48627e(0x17e)])||_0x20cece[_0x48627e(0x17e)][_0x48627e(0x141)]===0x0){(0x0,_common[_0x48627e(0x13b)])('connect'),initWebUsbButton(_0x20cece[_0x48627e(0x146)],!![]);return;}(0x0,_common['showView'])('select-device'),initWebUsbButton(_0x20cece[_0x48627e(0x146)],![]);if(!_0x20cece[_0x48627e(0x146)]){var _0x11eceb=_common[_0x48627e(0x15b)][_0x48627e(0x164)]('wrapper')[0x0];_0x11eceb['style']['justifyContent']=_0x48627e(0x12f);}var _0x2423c2=_common['container'][_0x48627e(0x164)](_0x48627e(0x143))[0x0],_0x11b13c=_common[_0x48627e(0x15b)][_0x48627e(0x164)](_0x48627e(0x14e))[0x0];_0x20cece[_0x48627e(0x17e)]['sort'](function(_0x49688b,_0x4219f4){var _0x333239=_0x48627e;if(_0x49688b[_0x333239(0x154)]===_0x333239(0x162)&&_0x4219f4['type']!==_0x333239(0x162))return 0x1;else{if(_0x49688b['type']!==_0x333239(0x162)&&_0x4219f4['type']===_0x333239(0x162))return-0x1;}return 0x0;}),_0x20cece['devices'][_0x48627e(0x145)](function(_0xa4a50b){var _0x299922=_0x48627e,_0x3b5d4a=document[_0x299922(0x13d)](_0x299922(0x131));_0x3b5d4a[_0x299922(0x140)]=_0x299922(0x150);_0xa4a50b['type']!=='unreadable'&&_0x3b5d4a['addEventListener'](_0x299922(0x17c),function(){var _0x3b169a=_0x299922;(0x0,_common['postMessage'])((0x0,_builder[_0x3b169a(0x157)])(UI[_0x3b169a(0x168)],{'remember':_0x11b13c&&_0x11b13c[_0x3b169a(0x149)],'device':_0xa4a50b})),(0x0,_common[_0x3b169a(0x13b)])(_0x3b169a(0x16a));});var _0x5e955d=document[_0x299922(0x13d)](_0x299922(0x158));_0x5e955d[_0x299922(0x140)]=_0x299922(0x14a);_0xa4a50b['features']&&(_0xa4a50b[_0x299922(0x144)]['major_version']===0x2&&_0x5e955d[_0x299922(0x14c)]['add'](_0x299922(0x136)));var _0x299b18=document[_0x299922(0x13d)](_0x299922(0x158));_0x299b18['className']=_0x299922(0x159),_0x299b18[_0x299922(0x15a)]=_0xa4a50b['label'];var _0x1dffeb=document[_0x299922(0x13d)]('div');_0x1dffeb[_0x299922(0x140)]=_0x299922(0x17a),_0x1dffeb[_0x299922(0x12c)](_0x5e955d),_0x1dffeb['appendChild'](_0x299b18),_0x3b5d4a[_0x299922(0x12c)](_0x1dffeb);if(_0xa4a50b[_0x299922(0x154)]!==_0x299922(0x135)||_0xa4a50b[_0x299922(0x174)]===_0x299922(0x178)){_0x3b5d4a[_0x299922(0x14c)][_0x299922(0x17b)](_0x299922(0x139));var _0x24fe93=document[_0x299922(0x13d)](_0x299922(0x163));_0x24fe93[_0x299922(0x140)]=_0x299922(0x130);var _0x3fca9e=_0x299922(0x160),_0x426ddf='Click\x20to\x20activate.\x20This\x20device\x20is\x20used\x20by\x20another\x20application.';_0xa4a50b[_0x299922(0x154)]===_0x299922(0x162)&&(_0x3b5d4a[_0x299922(0x16e)]=!![],_0x5e955d['classList'][_0x299922(0x17b)](_0x299922(0x180)),_0x299b18[_0x299922(0x15a)]=_0x299922(0x165),_0x24fe93['innerHTML']=_0x3fca9e),(_0xa4a50b[_0x299922(0x154)]==='unacquired'||_0xa4a50b[_0x299922(0x174)]===_0x299922(0x178))&&(_0x299b18['textContent']=_0x299922(0x13c),_0x3b5d4a[_0x299922(0x14c)][_0x299922(0x17b)]('unacquired'),_0x24fe93[_0x299922(0x14c)]['add'](_0x299922(0x14d)),_0x24fe93[_0x299922(0x15e)]=_0x426ddf,_0xa4a50b[_0x299922(0x154)]===_0x299922(0x135)&&(_0x299b18[_0x299922(0x15a)]=_0xa4a50b[_0x299922(0x173)])),_0x3b5d4a[_0x299922(0x12c)](_0x24fe93);}_0x2423c2[_0x299922(0x12c)](_0x3b5d4a);});};exports[a168_0x17c59a(0x16b)]=selectDevice;