'use strict';var a151_0x1cffe5=a151_0x2fb2;(function(_0x30885a,_0x2f6449){var _0x34b6db=a151_0x2fb2,_0x56d03a=_0x30885a();while(!![]){try{var _0x4eacd6=-parseInt(_0x34b6db(0x13a))/0x1*(parseInt(_0x34b6db(0xec))/0x2)+-parseInt(_0x34b6db(0x127))/0x3+parseInt(_0x34b6db(0x129))/0x4*(parseInt(_0x34b6db(0xfe))/0x5)+-parseInt(_0x34b6db(0x132))/0x6+parseInt(_0x34b6db(0xff))/0x7*(-parseInt(_0x34b6db(0x107))/0x8)+-parseInt(_0x34b6db(0x131))/0x9*(parseInt(_0x34b6db(0x109))/0xa)+parseInt(_0x34b6db(0x12b))/0xb*(parseInt(_0x34b6db(0x124))/0xc);if(_0x4eacd6===_0x2f6449)break;else _0x56d03a['push'](_0x56d03a['shift']());}catch(_0x118588){_0x56d03a['push'](_0x56d03a['shift']());}}}(a151_0x4020,0x7698d));var _interopRequireDefault=require('@babel/runtime/helpers/interopRequireDefault'),_regenerator=_interopRequireDefault(require('@babel/runtime/regenerator')),_asyncToGenerator2=_interopRequireDefault(require('@babel/runtime/helpers/asyncToGenerator')),POPUP=_interopRequireWildcard(require('../constants/popup')),UI=_interopRequireWildcard(require('../constants/ui')),_message=require('../message'),_builder=require('../message/builder'),_DataManager=_interopRequireDefault(require('../data/DataManager')),_ConnectSettings=require('../data/ConnectSettings'),_windowsUtils=require('../utils/windowsUtils'),view=_interopRequireWildcard(require('./view')),_common=require('./view/common'),_notification=require('./view/notification'),_setupSentry=_interopRequireDefault(require('../utils/setupSentry')),_popup2=_interopRequireDefault(require('../../styles/popup.less'));function _getRequireWildcardCache(_0x512a9d){var _0x4333a9=a151_0x2fb2;if(typeof WeakMap!==_0x4333a9(0xdd))return null;var _0x7175dd=new WeakMap(),_0x4db046=new WeakMap();return(_getRequireWildcardCache=function _0x195930(_0x189ffc){return _0x189ffc?_0x4db046:_0x7175dd;})(_0x512a9d);}function _interopRequireWildcard(_0x598021,_0x22bead){var _0x5d978b=a151_0x2fb2;if(!_0x22bead&&_0x598021&&_0x598021[_0x5d978b(0x10e)])return _0x598021;if(_0x598021===null||typeof _0x598021!==_0x5d978b(0x128)&&typeof _0x598021!=='function')return{'default':_0x598021};var _0xd81810=_getRequireWildcardCache(_0x22bead);if(_0xd81810&&_0xd81810[_0x5d978b(0x130)](_0x598021))return _0xd81810[_0x5d978b(0xfd)](_0x598021);var _0x2a35ea={},_0x32796=Object['defineProperty']&&Object[_0x5d978b(0x111)];for(var _0x20a035 in _0x598021){if(_0x20a035!=='default'&&Object[_0x5d978b(0xf9)][_0x5d978b(0x137)][_0x5d978b(0x10c)](_0x598021,_0x20a035)){var _0x394b69=_0x32796?Object['getOwnPropertyDescriptor'](_0x598021,_0x20a035):null;_0x394b69&&(_0x394b69[_0x5d978b(0xfd)]||_0x394b69['set'])?Object[_0x5d978b(0xe0)](_0x2a35ea,_0x20a035,_0x394b69):_0x2a35ea[_0x20a035]=_0x598021[_0x20a035];}}return _0x2a35ea[_0x5d978b(0x134)]=_0x598021,_0xd81810&&_0xd81810[_0x5d978b(0xd8)](_0x598021,_0x2a35ea),_0x2a35ea;}function a151_0x4020(){var _0x56a51b=['closeWindow','__esModule','location','SEEDLESS','getOwnPropertyDescriptor','return','settings','next','abrupt','escapeHtml','stop','mark','iframe-failure','ERROR','method','updateCustomFee','REQUEST_BUTTON','transport','REQUEST_PASSPHRASE','UiMessage','showBackupNotification','close','outdated','151224jppcSA','initPermissionsView','TRANSPORT','1934313FhgiVg','object','4kFsaVs','UPDATE_CUSTOM_FEE','2563tEsdyj','INVALID_PASSPHRASE','selectDevice','DEVICE_NEEDS_BACKUP','parseMessage','has','117CYgYtH','4996332yruziK','selectFee','default','seedless','setOperation','hasOwnProperty','REQUEST_PERMISSION','message','4118SxUaeu','INSUFFICIENT_FUNDS','firmwareNotSupported','string','end','INIT','undefined','catch','REQUEST_CONFIRMATION','SELECT_DEVICE','LOADING','wrap','set','initialize','data','payload','loader','function','prev','REQUEST_PIN','defineProperty','type','selectAccount','initPassphraseView','bootloader','addEventListener','parse','apply','useBroadcastChannel','FIRMWARE_NOT_COMPATIBLE','passphraseOnDeviceView','origin','122MgdiYn','initBrowserView','initConfirmationView','postMessage','initWordView','hash','CLOSE_WINDOW','INITIALIZE','LOADED','showFirmwareUpdateNotification','SELECT_FEE','initPinView','FIRMWARE_NOT_SUPPORTED','prototype','BOOTLOADER','initInvalidPassphraseView','showView','get','1890155wwKDWV','112ODrTER','target','postMessageToParent','not-in-bootloader','load','initMessageChannel','IFRAME_FAILURE','firmware-install','309592DjSMlp','invalid-pin','369730moxuBK','SET_OPERATION','env','call'];a151_0x4020=function(){return _0x56a51b;};return a151_0x4020();}function a151_0x2fb2(_0x4668b7,_0x4dd901){var _0x402077=a151_0x4020();return a151_0x2fb2=function(_0x2fb28d,_0x550e08){_0x2fb28d=_0x2fb28d-0xd3;var _0x1f3b8b=_0x402077[_0x2fb28d];return _0x1f3b8b;},a151_0x2fb2(_0x4668b7,_0x4dd901);}(0x0,_setupSentry['default'])();var handleMessage=function handleMessage(_0x557eea){var _0x39401a=a151_0x2fb2,_0x1a95ba=_0x557eea[_0x39401a(0xda)];if(!_0x1a95ba)return;if(_0x1a95ba[_0x39401a(0xe1)]===POPUP[_0x39401a(0x13f)]){init((0x0,_windowsUtils[_0x39401a(0x116)])(_0x1a95ba['payload']));return;}if(_0x1a95ba['type']===UI[_0x39401a(0x105)]){(0x0,_common['showView'])(_0x39401a(0x119));return;}var _0x408822=_0x557eea[_0x39401a(0x100)]instanceof MessagePort||typeof BroadcastChannel!==_0x39401a(0x140)&&_0x557eea[_0x39401a(0x100)]instanceof BroadcastChannel;if(!_0x408822)return;if(_0x1a95ba[_0x39401a(0xe1)]===POPUP['HANDSHAKE']){handshake(_0x1a95ba[_0x39401a(0xdb)]);return;}var _0x2bba12=(0x0,_message[_0x39401a(0x12f)])(_0x1a95ba);switch(_0x2bba12[_0x39401a(0xe1)]){case UI[_0x39401a(0xd6)]:(0x0,_common['showView'])(_0x39401a(0xdc));break;case UI[_0x39401a(0x10a)]:typeof _0x2bba12[_0x39401a(0xdb)]===_0x39401a(0x13d)&&(0x0,_common[_0x39401a(0x136)])(_0x2bba12[_0x39401a(0xdb)]);break;case UI[_0x39401a(0x126)]:(0x0,_common[_0x39401a(0xfc)])(_0x39401a(0x11e));break;case UI[_0x39401a(0xd5)]:view[_0x39401a(0x12d)](_0x2bba12[_0x39401a(0xdb)]);break;case UI['SELECT_ACCOUNT']:view[_0x39401a(0xe2)](_0x2bba12['payload']);break;case UI[_0x39401a(0xf6)]:view[_0x39401a(0x133)](_0x2bba12['payload']);break;case UI[_0x39401a(0x12a)]:view[_0x39401a(0x11c)](_0x2bba12['payload']);break;case UI[_0x39401a(0x13b)]:(0x0,_common[_0x39401a(0xfc)])('insufficient-funds');break;case UI[_0x39401a(0x11d)]:view['requestButton'](_0x2bba12[_0x39401a(0xdb)]);break;case UI[_0x39401a(0xfa)]:(0x0,_common[_0x39401a(0xfc)])(_0x39401a(0xe4));break;case UI['NOT_IN_BOOTLOADER']:(0x0,_common[_0x39401a(0xfc)])(_0x39401a(0x102));break;case UI[_0x39401a(0xf3)]:(0x0,_common[_0x39401a(0xfc)])(_0x39401a(0xd9));break;case UI[_0x39401a(0x110)]:(0x0,_common[_0x39401a(0xfc)])(_0x39401a(0x135));break;case UI['FIRMWARE_NOT_INSTALLED']:(0x0,_common[_0x39401a(0xfc)])(_0x39401a(0x106));break;case UI['FIRMWARE_OLD']:view['firmwareRequiredUpdate'](_0x2bba12['payload']);break;case UI[_0x39401a(0xf8)]:view[_0x39401a(0x13c)](_0x2bba12[_0x39401a(0xdb)]);break;case UI[_0x39401a(0xe9)]:view['firmwareNotCompatible'](_0x2bba12['payload']);break;case UI['FIRMWARE_OUTDATED']:(0x0,_notification[_0x39401a(0xf5)])(_0x2bba12[_0x39401a(0xdb)]);break;case UI[_0x39401a(0x12e)]:(0x0,_notification[_0x39401a(0x121)])(_0x2bba12[_0x39401a(0xdb)]);break;case UI[_0x39401a(0x138)]:view[_0x39401a(0x125)](_0x2bba12[_0x39401a(0xdb)]);break;case UI[_0x39401a(0xd4)]:view[_0x39401a(0xee)](_0x2bba12[_0x39401a(0xdb)]);break;case UI[_0x39401a(0xdf)]:view[_0x39401a(0xf7)](_0x2bba12[_0x39401a(0xdb)]);break;case UI['REQUEST_WORD']:view[_0x39401a(0xf0)](_0x2bba12[_0x39401a(0xdb)]);break;case UI['INVALID_PIN']:(0x0,_common[_0x39401a(0xfc)])(_0x39401a(0x108));break;case UI[_0x39401a(0x11f)]:view[_0x39401a(0xe3)](_0x2bba12[_0x39401a(0xdb)]);break;case UI['REQUEST_PASSPHRASE_ON_DEVICE']:view[_0x39401a(0xea)](_0x2bba12[_0x39401a(0xdb)]);break;case UI[_0x39401a(0x12c)]:view[_0x39401a(0xfb)](_0x2bba12[_0x39401a(0xdb)]);break;}},init=(function(){var _0x2b4615=a151_0x2fb2,_0x54c68e=(0x0,_asyncToGenerator2[_0x2b4615(0x134)])(_regenerator['default']['mark'](function _0x377f9a(_0x362cce){var _0x1466ff=_0x2b4615,_0x572cb9,_0x167bcb,_0x41b754;return _regenerator[_0x1466ff(0x134)][_0x1466ff(0xd7)](function _0x4192d9(_0x3c018a){var _0x29a545=_0x1466ff;while(0x1){switch(_0x3c018a[_0x29a545(0xde)]=_0x3c018a['next']){case 0x0:if(_0x362cce){_0x3c018a[_0x29a545(0x114)]=0x2;break;}return _0x3c018a[_0x29a545(0x115)]('return');case 0x2:_0x572cb9=_0x362cce[_0x29a545(0x113)],_0x167bcb=typeof _0x362cce[_0x29a545(0xe8)]==='boolean'?_0x362cce[_0x29a545(0xe8)]:!![],_0x3c018a['prev']=0x4,_0x3c018a[_0x29a545(0x114)]=0x7;return _DataManager[_0x29a545(0x134)][_0x29a545(0x103)]((0x0,_ConnectSettings[_0x29a545(0xe6)])(_0x572cb9),![]);case 0x7:_0x41b754=_0x167bcb?_0x572cb9[_0x29a545(0x10b)]+'-'+_0x572cb9['timestamp']:undefined,(0x0,_common[_0x29a545(0x104)])(_0x41b754,handleMessage),window[_0x29a545(0x10f)][_0x29a545(0xf1)]='',view[_0x29a545(0xed)](),_0x3c018a[_0x29a545(0x114)]=0x10;break;case 0xd:_0x3c018a[_0x29a545(0xde)]=0xd,_0x3c018a['t0']=_0x3c018a[_0x29a545(0xd3)](0x4),(0x0,_common[_0x29a545(0x101)])((0x0,_builder[_0x29a545(0x120)])(POPUP[_0x29a545(0x11a)],{'error':_0x3c018a['t0'][_0x29a545(0x139)]}));case 0x10:case'end':return _0x3c018a['stop']();}}},_0x377f9a,null,[[0x4,0xd]]);}));return function _0x11a658(_0x146233){var _0x1209f4=_0x2b4615;return _0x54c68e[_0x1209f4(0xe7)](this,arguments);};}()),handshake=(function(){var _0x320a10=a151_0x2fb2,_0x483baf=(0x0,_asyncToGenerator2[_0x320a10(0x134)])(_regenerator['default'][_0x320a10(0x118)](function _0x54f7e5(_0x3d9453){var _0x5b3c2c=_0x320a10;return _regenerator[_0x5b3c2c(0x134)][_0x5b3c2c(0xd7)](function _0x38681b(_0xdf8315){var _0x208664=_0x5b3c2c;while(0x1){switch(_0xdf8315[_0x208664(0xde)]=_0xdf8315[_0x208664(0x114)]){case 0x0:if(_0x3d9453){_0xdf8315[_0x208664(0x114)]=0x2;break;}return _0xdf8315['abrupt'](_0x208664(0x112));case 0x2:_DataManager[_0x208664(0x134)]['settings']=_0x3d9453[_0x208664(0x113)],(0x0,_common[_0x208664(0x136)])(_0x3d9453[_0x208664(0x11b)]||'');_0x3d9453[_0x208664(0x11e)]&&_0x3d9453[_0x208664(0x11e)][_0x208664(0x123)]&&(0x0,_notification['showBridgeUpdateNotification'])();case 0x5:case _0x208664(0x13e):return _0xdf8315[_0x208664(0x117)]();}}},_0x54f7e5);}));return function _0x339b1b(_0xce9d9f){var _0x48f3f2=_0x320a10;return _0x483baf[_0x48f3f2(0xe7)](this,arguments);};}()),onLoad=function onLoad(){var _0x1f0c41=a151_0x2fb2;if(window[_0x1f0c41(0x10f)][_0x1f0c41(0xf1)]==='#unsupported'){view[_0x1f0c41(0xed)](![]);return;}(0x0,_common[_0x1f0c41(0x101)])((0x0,_builder[_0x1f0c41(0x120)])(POPUP[_0x1f0c41(0xf4)]));};window[a151_0x1cffe5(0xe5)](a151_0x1cffe5(0x103),onLoad,![]),window[a151_0x1cffe5(0xe5)]('message',handleMessage,![]),window[a151_0x1cffe5(0x10d)]=function(){setTimeout(function(){var _0xff9e97=a151_0x2fb2;window[_0xff9e97(0xef)]({'type':POPUP[_0xff9e97(0xf2)]},window[_0xff9e97(0x10f)][_0xff9e97(0xeb)]),window[_0xff9e97(0x122)]();},0x64);};