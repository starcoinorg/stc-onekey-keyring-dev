'use strict';var a11_0x172ff7=a11_0xc739;(function(_0xa8e1d5,_0x45ae9b){var _0x29fbdb=a11_0xc739,_0x214d4d=_0xa8e1d5();while(!![]){try{var _0x562f3c=-parseInt(_0x29fbdb(0x15b))/0x1+parseInt(_0x29fbdb(0x14b))/0x2+parseInt(_0x29fbdb(0x1b4))/0x3*(-parseInt(_0x29fbdb(0x140))/0x4)+-parseInt(_0x29fbdb(0x1a0))/0x5+parseInt(_0x29fbdb(0x17a))/0x6+-parseInt(_0x29fbdb(0x12e))/0x7*(-parseInt(_0x29fbdb(0x158))/0x8)+-parseInt(_0x29fbdb(0x1c1))/0x9*(-parseInt(_0x29fbdb(0x1cf))/0xa);if(_0x562f3c===_0x45ae9b)break;else _0x214d4d['push'](_0x214d4d['shift']());}catch(_0x5090e0){_0x214d4d['push'](_0x214d4d['shift']());}}}(a11_0x3737,0x51c6a));function a11_0xc739(_0x360270,_0x5a6087){var _0x3737ea=a11_0x3737();return a11_0xc739=function(_0xc739f2,_0x3ce1dc){_0xc739f2=_0xc739f2-0x107;var _0x3cee9c=_0x3737ea[_0xc739f2];return _0x3cee9c;},a11_0xc739(_0x360270,_0x5a6087);}var _interopRequireDefault=require('@babel/runtime/helpers/interopRequireDefault');exports['__esModule']=!![],exports[a11_0x172ff7(0x124)]=exports[a11_0x172ff7(0x19e)]=exports[a11_0x172ff7(0x18d)]=exports['initCore']=exports[a11_0x172ff7(0x12a)]=exports[a11_0x172ff7(0x12d)]=exports[a11_0x172ff7(0x10a)]=void 0x0;var _regenerator=_interopRequireDefault(require('@babel/runtime/regenerator')),_inheritsLoose2=_interopRequireDefault(require('@babel/runtime/helpers/inheritsLoose')),_asyncToGenerator2=_interopRequireDefault(require('@babel/runtime/helpers/asyncToGenerator')),_events=_interopRequireDefault(require('events')),_DataManager=_interopRequireDefault(require('../data/DataManager')),_DeviceList=_interopRequireDefault(require('../device/DeviceList')),_Device=_interopRequireDefault(require('../device/Device')),_constants=require('../constants'),_builder=require('../message/builder'),_AbstractMethod=_interopRequireDefault(require('./methods/AbstractMethod')),_methods=require('./methods'),_deferred=require('../utils/deferred'),_promiseUtils=require('../utils/promiseUtils'),_debug=_interopRequireWildcard(require('../utils/debug')),_interactionTimeout2=_interopRequireDefault(require('../utils/interactionTimeout'));function _getRequireWildcardCache(_0x5bd87e){var _0x2b0581=a11_0x172ff7;if(typeof WeakMap!==_0x2b0581(0x150))return null;var _0x192ef8=new WeakMap(),_0x2ba026=new WeakMap();return(_getRequireWildcardCache=function _0x3b08e1(_0x3f4338){return _0x3f4338?_0x2ba026:_0x192ef8;})(_0x5bd87e);}function _interopRequireWildcard(_0x5fd2da,_0x1b9dfa){var _0x42ead0=a11_0x172ff7;if(!_0x1b9dfa&&_0x5fd2da&&_0x5fd2da[_0x42ead0(0x18f)])return _0x5fd2da;if(_0x5fd2da===null||typeof _0x5fd2da!==_0x42ead0(0x1ba)&&typeof _0x5fd2da!==_0x42ead0(0x150))return{'default':_0x5fd2da};var _0x390bb8=_getRequireWildcardCache(_0x1b9dfa);if(_0x390bb8&&_0x390bb8[_0x42ead0(0x1ac)](_0x5fd2da))return _0x390bb8[_0x42ead0(0x134)](_0x5fd2da);var _0x2d409b={},_0x30f3eb=Object[_0x42ead0(0x114)]&&Object[_0x42ead0(0x178)];for(var _0x4a0845 in _0x5fd2da){if(_0x4a0845!=='default'&&Object[_0x42ead0(0x16d)][_0x42ead0(0x1c8)][_0x42ead0(0x143)](_0x5fd2da,_0x4a0845)){var _0x53a21c=_0x30f3eb?Object['getOwnPropertyDescriptor'](_0x5fd2da,_0x4a0845):null;_0x53a21c&&(_0x53a21c[_0x42ead0(0x134)]||_0x53a21c[_0x42ead0(0x1b9)])?Object['defineProperty'](_0x2d409b,_0x4a0845,_0x53a21c):_0x2d409b[_0x4a0845]=_0x5fd2da[_0x4a0845];}}return _0x2d409b[_0x42ead0(0x18b)]=_0x5fd2da,_0x390bb8&&_0x390bb8[_0x42ead0(0x1b9)](_0x5fd2da,_0x2d409b),_0x2d409b;}var _core,_deviceList,_popupPromise,_uiPromises=[],_callMethods=[],_preferredDevice,_interactionTimeout,_log=(0x0,_debug[a11_0x172ff7(0x19e)])('Core'),postMessage=function postMessage(_0x38a3aa){var _0x170a00=a11_0x172ff7;if(_0x38a3aa[_0x170a00(0x18e)]===_constants[_0x170a00(0x118)]){var _0x2dccf5=_callMethods['findIndex'](function(_0x2de89b){var _0xd15423=_0x170a00;return _0x2de89b&&_0x2de89b[_0xd15423(0x163)]===_0x38a3aa['id'];});_0x2dccf5>=0x0&&_callMethods[_0x170a00(0x1c0)](_0x2dccf5,0x1);}_core[_0x170a00(0x1c3)](_constants['CORE_EVENT'],_0x38a3aa);},getPopupPromise=function getPopupPromise(_0x50478a){var _0x15442d=a11_0x172ff7;return _0x50478a===void 0x0&&(_0x50478a=!![]),_0x50478a&&postMessage((0x0,_builder[_0x15442d(0x1ce)])(_constants['UI'][_0x15442d(0x147)])),!_popupPromise&&(_popupPromise=(0x0,_deferred[_0x15442d(0x1a3)])()),_popupPromise;},interactionTimeout=function interactionTimeout(){return _interactionTimeout['start'](function(){var _0x114f5b=a11_0xc739;onPopupClosed(_0x114f5b(0x14f));});},createUiPromise=function createUiPromise(_0xea3a44,_0x1840c1){var _0x7f5853=a11_0x172ff7,_0x550714=(0x0,_deferred[_0x7f5853(0x1a3)])(_0xea3a44,_0x1840c1);return _uiPromises[_0x7f5853(0x148)](_0x550714),interactionTimeout(),_0x550714;},findUiPromise=function findUiPromise(_0x2733ee,_0x56140a){return _uiPromises['find'](function(_0x4cb346){return _0x4cb346['id']===_0x56140a;});},removeUiPromise=function removeUiPromise(_0x26859c){_uiPromises=_uiPromises['filter'](function(_0x30294c){return _0x30294c!==_0x26859c;});},_handleMessage=function handleMessage(_0x1a002d,_0x110265){var _0x5a4def=a11_0x172ff7;_0x110265===void 0x0&&(_0x110265=![]);_log[_0x5a4def(0x171)](_0x5a4def(0x1b6),_0x110265,_0x1a002d);var _0x5e5d74=[_constants[_0x5a4def(0x180)]['CALL'],_constants[_0x5a4def(0x15f)]['CLOSED'],_constants['UI']['CUSTOM_MESSAGE_RESPONSE'],_constants['UI'][_0x5a4def(0x1bb)],_constants[_0x5a4def(0x1c4)][_0x5a4def(0x192)]];if(!_0x110265&&_0x5e5d74['indexOf'](_0x1a002d[_0x5a4def(0x128)])===-0x1)return;switch(_0x1a002d[_0x5a4def(0x128)]){case _constants[_0x5a4def(0x15f)][_0x5a4def(0x187)]:getPopupPromise(![])[_0x5a4def(0x13b)]();break;case _constants[_0x5a4def(0x15f)][_0x5a4def(0x17b)]:onPopupClosed(_0x1a002d[_0x5a4def(0x149)]?_0x1a002d[_0x5a4def(0x149)][_0x5a4def(0x11f)]:null);break;case _constants[_0x5a4def(0x1c4)]['DISABLE_WEBUSB']:disableWebUSBTransport();break;case _constants['UI'][_0x5a4def(0x199)]:case _constants['UI'][_0x5a4def(0x18a)]:case _constants['UI'][_0x5a4def(0x12b)]:case _constants['UI'][_0x5a4def(0x1be)]:case _constants['UI'][_0x5a4def(0x11b)]:case _constants['UI'][_0x5a4def(0x13a)]:case _constants['UI'][_0x5a4def(0x113)]:case _constants['UI'][_0x5a4def(0x13d)]:case _constants['UI'][_0x5a4def(0x17d)]:case _constants['UI'][_0x5a4def(0x13e)]:case _constants['UI'][_0x5a4def(0x129)]:case _constants['UI'][_0x5a4def(0x1bb)]:{var _0x849ca9=findUiPromise(0x0,_0x1a002d['type']);_0x849ca9&&(_0x849ca9[_0x5a4def(0x13b)]({'event':_0x1a002d[_0x5a4def(0x128)],'payload':_0x1a002d[_0x5a4def(0x149)]}),removeUiPromise(_0x849ca9));break;}case _constants[_0x5a4def(0x180)][_0x5a4def(0x170)]:onCall(_0x1a002d)[_0x5a4def(0x162)](function(_0x2cdc4a){var _0x22d372=_0x5a4def;_log[_0x22d372(0x13f)]('onCall\x20error',_0x2cdc4a);});break;}};exports['handleMessage']=_handleMessage;var initDevice=(function(){var _0x3cce0e=a11_0x172ff7,_0x278ba8=(0x0,_asyncToGenerator2[_0x3cce0e(0x18b)])(_regenerator[_0x3cce0e(0x18b)][_0x3cce0e(0x133)](function _0x569fbb(_0x3d096d){var _0x444565=_0x3cce0e,_0x4323e5,_0x1d2e58,_0x515c75,_0x12ebe4,_0x1deb62,_0x206c12;return _regenerator[_0x444565(0x18b)][_0x444565(0x183)](function _0x351faa(_0x1165e0){var _0x139c62=_0x444565;while(0x1){switch(_0x1165e0[_0x139c62(0x1b8)]=_0x1165e0[_0x139c62(0x1d0)]){case 0x0:if(_deviceList){_0x1165e0[_0x139c62(0x1d0)]=0x2;break;}throw _constants[_0x139c62(0x15e)][_0x139c62(0x141)](_0x139c62(0x172));case 0x2:_0x4323e5=_deviceList[_0x139c62(0x121)]()==='WebUsbPlugin';if(!_0x3d096d[_0x139c62(0x125)]){_0x1165e0['next']=0x7;break;}_0x1d2e58=_deviceList['getDevice'](_0x3d096d['devicePath']),_0x1165e0[_0x139c62(0x1d0)]=0x1f;break;case 0x7:_0x515c75=_deviceList[_0x139c62(0x1a9)]();if(!(_0x515c75===0x1&&!_0x4323e5)){_0x1165e0[_0x139c62(0x1d0)]=0xd;break;}_0x12ebe4=_deviceList[_0x139c62(0x157)](),_0x1d2e58=_deviceList[_0x139c62(0x13c)](_0x12ebe4),_0x1165e0[_0x139c62(0x1d0)]=0x1f;break;case 0xd:createUiPromise(_constants['UI'][_0x139c62(0x199)]),_0x1165e0[_0x139c62(0x1d0)]=0x10;return getPopupPromise()[_0x139c62(0x1b0)];case 0x10:_0x515c75=_deviceList[_0x139c62(0x1a9)]();if(!(_0x515c75===0x1&&!_0x4323e5)){_0x1165e0[_0x139c62(0x1d0)]=0x16;break;}_0x12ebe4=_deviceList[_0x139c62(0x157)](),_0x1d2e58=_deviceList['getDevice'](_0x12ebe4),_0x1165e0[_0x139c62(0x1d0)]=0x1f;break;case 0x16:postMessage((0x0,_builder[_0x139c62(0x1ce)])(_constants['UI']['SELECT_DEVICE'],{'webusb':_0x4323e5,'devices':_deviceList[_0x139c62(0x168)]()})),_0x1deb62=findUiPromise(_0x3d096d['responseID'],_constants['UI']['RECEIVE_DEVICE']);if(!_0x1deb62){_0x1165e0['next']=0x1f;break;}_0x1165e0[_0x139c62(0x1d0)]=0x1b;return _0x1deb62[_0x139c62(0x1b0)];case 0x1b:_0x206c12=_0x1165e0[_0x139c62(0x15d)];_0x206c12[_0x139c62(0x149)][_0x139c62(0x14d)]&&(!_0x206c12[_0x139c62(0x149)][_0x139c62(0x193)][_0x139c62(0x10e)]&&delete _0x206c12[_0x139c62(0x149)][_0x139c62(0x193)][_0x139c62(0x10e)],_preferredDevice=_0x206c12[_0x139c62(0x149)]['device']);_0x12ebe4=_0x206c12[_0x139c62(0x149)]['device'][_0x139c62(0x14a)],_0x1d2e58=_deviceList['getDevice'](_0x12ebe4);case 0x1f:if(_0x1d2e58){_0x1165e0[_0x139c62(0x1d0)]=0x21;break;}throw _constants[_0x139c62(0x15e)]['TypedError'](_0x139c62(0x1ab));case 0x21:return _0x1165e0[_0x139c62(0x160)](_0x139c62(0x161),_0x1d2e58);case 0x22:case _0x139c62(0x10b):return _0x1165e0[_0x139c62(0x1a4)]();}}},_0x569fbb);}));return function _0x26a3ad(_0x564a7d){var _0x269d85=_0x3cce0e;return _0x278ba8[_0x269d85(0x135)](this,arguments);};}()),onCall=(function(){var _0x52755e=a11_0x172ff7,_0x1a21a4=(0x0,_asyncToGenerator2[_0x52755e(0x18b)])(_regenerator['default'][_0x52755e(0x133)](function _0x40dae4(_0x3924a7){var _0x2f0869=_0x52755e,_0x13370e,_0x543e81,_0x3cbb23,_0x2eab78,_0x4350b6,_0x1a91c2,_0x1b68d6,_0x12f6d0,_0x4677a0,_0x43c2c0,_0x2a718b,_0x2abf59,_0x1769d0,_0x39bb5e;return _regenerator[_0x2f0869(0x18b)]['wrap'](function _0x17880f(_0x4a26bc){var _0x108086=_0x2f0869;while(0x1){switch(_0x4a26bc[_0x108086(0x1b8)]=_0x4a26bc[_0x108086(0x1d0)]){case 0x0:if(!(!_0x3924a7['id']||!_0x3924a7[_0x108086(0x149)])){_0x4a26bc['next']=0x2;break;}throw _constants[_0x108086(0x15e)][_0x108086(0x141)](_0x108086(0x131),'onCall:\x20message.id\x20or\x20message.payload\x20is\x20missing');case 0x2:_0x13370e=_0x3924a7['id'],_0x543e81=_DataManager[_0x108086(0x18b)][_0x108086(0x144)](_0x108086(0x110)),_0x3cbb23=_DataManager[_0x108086(0x18b)][_0x108086(0x144)](_0x108086(0x1ca));_preferredDevice&&!_0x3924a7[_0x108086(0x149)][_0x108086(0x193)]&&(_0x3924a7[_0x108086(0x149)][_0x108086(0x193)]=_preferredDevice);_0x4a26bc[_0x108086(0x1b8)]=0x6,_0x2eab78=(0x0,_methods[_0x108086(0x142)])(_0x3924a7),_0x2eab78[_0x108086(0x17e)]=postMessage,_0x2eab78[_0x108086(0x15a)]=getPopupPromise,_0x2eab78[_0x108086(0x185)]=createUiPromise,_0x2eab78[_0x108086(0x109)]=findUiPromise,_0x2eab78[_0x108086(0x1a8)]=removeUiPromise,_0x4a26bc['next']=0x14;break;case 0xf:_0x4a26bc[_0x108086(0x1b8)]=0xf,_0x4a26bc['t0']=_0x4a26bc[_0x108086(0x162)](0x6),postMessage((0x0,_builder['UiMessage'])(_constants[_0x108086(0x15f)][_0x108086(0x176)])),postMessage((0x0,_builder[_0x108086(0x1b1)])(_0x13370e,![],{'error':_0x4a26bc['t0']}));return _0x4a26bc[_0x108086(0x160)]('return',Promise[_0x108086(0x13b)]());case 0x14:_callMethods[_0x108086(0x148)](_0x2eab78);if(_0x2eab78[_0x108086(0x1af)]){_0x4a26bc[_0x108086(0x1d0)]=0x28;break;}_0x4a26bc[_0x108086(0x1b8)]=0x16;if(!_0x2eab78[_0x108086(0x19c)]){_0x4a26bc[_0x108086(0x1d0)]=0x1c;break;}_0x4a26bc['next']=0x1a;return getPopupPromise()['promise'];case 0x1a:_0x4a26bc['next']=0x1d;break;case 0x1c:postMessage((0x0,_builder[_0x108086(0x1ce)])(_constants['POPUP'][_0x108086(0x176)]));case 0x1d:_0x4a26bc[_0x108086(0x1d0)]=0x1f;return _0x2eab78[_0x108086(0x139)]();case 0x1f:_0x1a91c2=_0x4a26bc[_0x108086(0x15d)],_0x4350b6=(0x0,_builder[_0x108086(0x1b1)])(_0x2eab78[_0x108086(0x163)],!![],_0x1a91c2),_0x4a26bc['next']=0x26;break;case 0x23:_0x4a26bc[_0x108086(0x1b8)]=0x23,_0x4a26bc['t1']=_0x4a26bc[_0x108086(0x162)](0x16),_0x4350b6=(0x0,_builder[_0x108086(0x1b1)])(_0x2eab78['responseID'],![],{'error':_0x4a26bc['t1']});case 0x26:postMessage(_0x4350b6);return _0x4a26bc[_0x108086(0x160)]('return',Promise[_0x108086(0x13b)]());case 0x28:if(!(!_deviceList&&!_DataManager[_0x108086(0x18b)]['getSettings'](_0x108086(0x116)))){_0x4a26bc[_0x108086(0x1d0)]=0x2b;break;}_0x4a26bc[_0x108086(0x1d0)]=0x2b;return initTransport(_DataManager[_0x108086(0x18b)]['getSettings']());case 0x2b:if(!(_0x3cbb23&&_0x2eab78[_0x108086(0x164)]['includes'](_0x108086(0x196))&&!_DataManager[_0x108086(0x18b)][_0x108086(0x1cd)]())){_0x4a26bc[_0x108086(0x1d0)]=0x2f;break;}postMessage((0x0,_builder['UiMessage'])(_constants['POPUP'][_0x108086(0x176)])),postMessage((0x0,_builder['ResponseMessage'])(_0x13370e,![],{'error':_constants[_0x108086(0x15e)][_0x108086(0x141)](_0x108086(0x19f))}));return _0x4a26bc['abrupt'](_0x108086(0x161),Promise['resolve']());case 0x2f:_0x4a26bc[_0x108086(0x1b8)]=0x2f,_0x4a26bc[_0x108086(0x1d0)]=0x32;return initDevice(_0x2eab78);case 0x32:_0x1b68d6=_0x4a26bc[_0x108086(0x15d)],_0x4a26bc[_0x108086(0x1d0)]=0x40;break;case 0x35:_0x4a26bc[_0x108086(0x1b8)]=0x35,_0x4a26bc['t2']=_0x4a26bc[_0x108086(0x162)](0x2f);if(!(_0x4a26bc['t2']['code']===_0x108086(0x172))){_0x4a26bc[_0x108086(0x1d0)]=0x3d;break;}_0x4a26bc[_0x108086(0x1d0)]=0x3a;return getPopupPromise()[_0x108086(0x1b0)];case 0x3a:postMessage((0x0,_builder[_0x108086(0x1ce)])(_constants['UI'][_0x108086(0x1c4)])),_0x4a26bc[_0x108086(0x1d0)]=0x3e;break;case 0x3d:postMessage((0x0,_builder[_0x108086(0x1ce)])(_constants['POPUP'][_0x108086(0x176)]));case 0x3e:postMessage((0x0,_builder[_0x108086(0x1b1)])(_0x13370e,![],{'error':_0x4a26bc['t2']}));throw _0x4a26bc['t2'];case 0x40:_0x2eab78[_0x108086(0x159)](_0x1b68d6);if(!_0x2eab78['debugLink']){_0x4a26bc[_0x108086(0x1d0)]=0x4f;break;}_0x4a26bc['prev']=0x42,_0x4a26bc[_0x108086(0x1d0)]=0x45;return _0x2eab78['run']();case 0x45:_0x12f6d0=_0x4a26bc['sent'],_0x4350b6=(0x0,_builder[_0x108086(0x1b1)])(_0x2eab78[_0x108086(0x163)],!![],_0x12f6d0),postMessage(_0x4350b6);return _0x4a26bc[_0x108086(0x160)](_0x108086(0x161),Promise[_0x108086(0x13b)]());case 0x4b:_0x4a26bc[_0x108086(0x1b8)]=0x4b,_0x4a26bc['t3']=_0x4a26bc['catch'](0x42),postMessage((0x0,_builder[_0x108086(0x1b1)])(_0x2eab78['responseID'],![],{'error':_0x4a26bc['t3']}));throw _0x4a26bc['t3'];case 0x4f:_0x4677a0=_callMethods[_0x108086(0x122)](function(_0x52423b){var _0x4633fa=_0x108086;return _0x52423b&&_0x52423b!==_0x2eab78&&_0x52423b[_0x4633fa(0x125)]===_0x2eab78[_0x4633fa(0x125)];});if(!(_0x4677a0[_0x108086(0x1a9)]>0x0&&_0x2eab78['overridePreviousCall'])){_0x4a26bc[_0x108086(0x1d0)]=0x5a;break;}_0x4677a0[_0x108086(0x17c)](function(_0x342882){var _0x19f93d=_0x108086;_0x342882[_0x19f93d(0x1ad)]=!![];}),_0x43c2c0=_constants['ERRORS'][_0x108086(0x141)](_0x108086(0x191)),_0x4a26bc[_0x108086(0x1d0)]=0x55;return _0x1b68d6['override'](_0x43c2c0);case 0x55:if(!_0x2eab78[_0x108086(0x1ad)]){_0x4a26bc[_0x108086(0x1d0)]=0x58;break;}postMessage((0x0,_builder[_0x108086(0x1b1)])(_0x2eab78['responseID'],![],{'error':_0x43c2c0}));throw _0x43c2c0;case 0x58:_0x4a26bc[_0x108086(0x1d0)]=0x62;break;case 0x5a:if(!_0x1b68d6[_0x108086(0x190)]()){_0x4a26bc[_0x108086(0x1d0)]=0x62;break;}if(_0x1b68d6[_0x108086(0x1c2)]()){_0x4a26bc['next']=0x60;break;}_0x4a26bc['next']=0x5e;return _0x1b68d6[_0x108086(0x167)]();case 0x5e:_0x4a26bc['next']=0x62;break;case 0x60:postMessage((0x0,_builder[_0x108086(0x1b1)])(_0x13370e,![],{'error':_constants[_0x108086(0x15e)][_0x108086(0x141)]('Device_CallInProgress')}));throw _constants[_0x108086(0x15e)]['TypedError']('Device_CallInProgress');case 0x62:_0x1b68d6['setInstance'](_0x2eab78[_0x108086(0x11a)]);_0x2eab78[_0x108086(0x15c)]&&_0x1b68d6[_0x108086(0x1bc)](_0x2eab78['deviceState']);_0x1b68d6['on'](_constants[_0x108086(0x19a)]['BUTTON'],function(_0x5b52b1,_0x4b7b18){onDeviceButtonHandler(_0x5b52b1,_0x4b7b18,_0x2eab78);}),_0x1b68d6['on'](_constants[_0x108086(0x19a)][_0x108086(0x184)],onDevicePinHandler),_0x1b68d6['on'](_constants[_0x108086(0x19a)][_0x108086(0x111)],onDeviceWordHandler),_0x1b68d6['on'](_constants[_0x108086(0x19a)][_0x108086(0x16c)],_0x2eab78['useEmptyPassphrase']?onEmptyPassphraseHandler:onDevicePassphraseHandler),_0x1b68d6['on'](_constants['DEVICE']['PASSPHRASE_ON_DEVICE'],function(){var _0x8919ea=_0x108086;postMessage((0x0,_builder['UiMessage'])(_constants['UI'][_0x8919ea(0x1c9)],{'device':_0x1b68d6['toMessageObject']()}));});if(!_deviceList){_0x4a26bc[_0x108086(0x1d0)]=0x6c;break;}_0x4a26bc[_0x108086(0x1d0)]=0x6c;return _deviceList[_0x108086(0x120)](_0x1b68d6['getVersion']());case 0x6c:_0x4a26bc['prev']=0x6c,_0x2a718b=0x1,_0x2abf59=0x3,_0x1769d0=(function(){var _0x296c9d=_0x108086,_0x3ffa90=(0x0,_asyncToGenerator2[_0x296c9d(0x18b)])(_regenerator[_0x296c9d(0x18b)][_0x296c9d(0x133)](function _0x38cbb3(){var _0x21dd98=_0x296c9d,_0x352ed9,_0xcf8e24,_0x16dea6,_0x17dc50,_0x459ffa,_0x23b5b1,_0x5194f4,_0x49d52b,_0x176e11,_0x3e98f4,_0x29cf14,_0x3e2150,_0x2e0d38;return _regenerator['default'][_0x21dd98(0x183)](function _0x1321d6(_0x2318d4){var _0x3ac361=_0x21dd98;while(0x1){switch(_0x2318d4[_0x3ac361(0x1b8)]=_0x2318d4['next']){case 0x0:_0x2318d4['next']=0x2;return _0x2eab78[_0x3ac361(0x1c5)](_0x3cbb23);case 0x2:_0x352ed9=_0x2318d4[_0x3ac361(0x15d)];if(!_0x352ed9){_0x2318d4[_0x3ac361(0x1d0)]=0xe;break;}if(!_0x3cbb23){_0x2318d4['next']=0xd;break;}_0x2318d4['next']=0x7;return getPopupPromise()[_0x3ac361(0x1b0)];case 0x7:postMessage((0x0,_builder[_0x3ac361(0x1ce)])(_0x352ed9,_0x1b68d6[_0x3ac361(0x179)]())),_0x2318d4[_0x3ac361(0x1d0)]=0xa;return createUiPromise(_constants[_0x3ac361(0x19a)]['DISCONNECT'],_0x1b68d6)['promise'];case 0xa:return _0x2318d4[_0x3ac361(0x160)](_0x3ac361(0x161),Promise['reject'](_constants[_0x3ac361(0x15e)][_0x3ac361(0x141)]('Method_Cancel')));case 0xd:return _0x2318d4[_0x3ac361(0x160)](_0x3ac361(0x161),Promise[_0x3ac361(0x137)](_constants[_0x3ac361(0x15e)][_0x3ac361(0x141)](_0x3ac361(0x156),_0x352ed9)));case 0xe:_0xcf8e24=_0x1b68d6[_0x3ac361(0x108)](_0x2eab78['allowDeviceMode'],_0x2eab78['requireDeviceMode']);if(!_0xcf8e24){_0x2318d4[_0x3ac361(0x1d0)]=0x1b;break;}_0x1b68d6['keepSession']=![];if(!_0x3cbb23){_0x2318d4[_0x3ac361(0x1d0)]=0x1a;break;}_0x2318d4[_0x3ac361(0x1d0)]=0x14;return getPopupPromise()[_0x3ac361(0x1b0)];case 0x14:postMessage((0x0,_builder['UiMessage'])(_0xcf8e24,_0x1b68d6[_0x3ac361(0x179)]())),_0x2318d4['next']=0x17;return createUiPromise(_constants[_0x3ac361(0x19a)][_0x3ac361(0x186)],_0x1b68d6)[_0x3ac361(0x1b0)];case 0x17:return _0x2318d4[_0x3ac361(0x160)](_0x3ac361(0x161),Promise[_0x3ac361(0x137)](_constants[_0x3ac361(0x15e)][_0x3ac361(0x141)](_0x3ac361(0x169),_0xcf8e24)));case 0x1a:return _0x2318d4[_0x3ac361(0x160)](_0x3ac361(0x161),Promise[_0x3ac361(0x137)](_constants[_0x3ac361(0x15e)]['TypedError'](_0x3ac361(0x169),_0xcf8e24)));case 0x1b:_0x2eab78['checkPermissions']();if(!(!_0x543e81&&_0x2eab78[_0x3ac361(0x164)]['length']>0x0)){_0x2318d4['next']=0x22;break;}_0x2318d4[_0x3ac361(0x1d0)]=0x1f;return _0x2eab78['requestPermissions']();case 0x1f:_0x16dea6=_0x2318d4[_0x3ac361(0x15d)];if(_0x16dea6){_0x2318d4[_0x3ac361(0x1d0)]=0x22;break;}return _0x2318d4['abrupt']('return',Promise[_0x3ac361(0x137)](_constants[_0x3ac361(0x15e)]['TypedError'](_0x3ac361(0x127))));case 0x22:_0x17dc50=_0x1b68d6[_0x3ac361(0x10c)]['needs_backup'];if(!(_0x17dc50&&typeof _0x2eab78[_0x3ac361(0x1bd)]==='function')){_0x2318d4['next']=0x29;break;}_0x2318d4['next']=0x26;return _0x2eab78[_0x3ac361(0x1bd)]();case 0x26:_0x459ffa=_0x2318d4['sent'];if(_0x459ffa){_0x2318d4['next']=0x29;break;}return _0x2318d4[_0x3ac361(0x160)](_0x3ac361(0x161),Promise[_0x3ac361(0x137)](_constants[_0x3ac361(0x15e)][_0x3ac361(0x141)](_0x3ac361(0x127))));case 0x29:if(!_0x17dc50){_0x2318d4[_0x3ac361(0x1d0)]=0x2d;break;}_0x2318d4[_0x3ac361(0x1d0)]=0x2c;return getPopupPromise()[_0x3ac361(0x1b0)];case 0x2c:postMessage((0x0,_builder[_0x3ac361(0x1ce)])(_constants['UI'][_0x3ac361(0x126)],_0x1b68d6['toMessageObject']()));case 0x2d:if(!(_0x1b68d6[_0x3ac361(0x182)]===_0x3ac361(0x194))){_0x2318d4[_0x3ac361(0x1d0)]=0x31;break;}_0x2318d4['next']=0x30;return getPopupPromise()['promise'];case 0x30:postMessage((0x0,_builder[_0x3ac361(0x1ce)])(_constants['UI']['FIRMWARE_OUTDATED'],_0x1b68d6[_0x3ac361(0x179)]()));case 0x31:if(!(!_0x543e81&&typeof _0x2eab78[_0x3ac361(0x123)]===_0x3ac361(0x150))){_0x2318d4[_0x3ac361(0x1d0)]=0x37;break;}_0x2318d4[_0x3ac361(0x1d0)]=0x34;return _0x2eab78['confirmation']();case 0x34:_0x23b5b1=_0x2318d4[_0x3ac361(0x15d)];if(_0x23b5b1){_0x2318d4[_0x3ac361(0x1d0)]=0x37;break;}return _0x2318d4['abrupt'](_0x3ac361(0x161),Promise['reject'](_constants['ERRORS'][_0x3ac361(0x141)](_0x3ac361(0x10f))));case 0x37:if(!_deviceList){_0x2318d4['next']=0x3a;break;}_0x2318d4[_0x3ac361(0x1d0)]=0x3a;return _deviceList[_0x3ac361(0x120)](_0x1b68d6[_0x3ac361(0x16f)]());case 0x3a:_0x2318d4['prev']=0x3a;if(!_0x2eab78['useDeviceState']){_0x2318d4[_0x3ac361(0x1d0)]=0x41;break;}_0x2318d4[_0x3ac361(0x1d0)]=0x3e;return _0x1b68d6[_0x3ac361(0x16a)](_0x2eab78['network']);case 0x3e:_0x2318d4['t0']=_0x2318d4[_0x3ac361(0x15d)],_0x2318d4[_0x3ac361(0x1d0)]=0x42;break;case 0x41:_0x2318d4['t0']=undefined;case 0x42:_0x5194f4=_0x2318d4['t0'],_0x49d52b=_DataManager[_0x3ac361(0x18b)][_0x3ac361(0x144)](_0x3ac361(0x173));if(!(_0x5194f4&&!_0x49d52b)){_0x2318d4[_0x3ac361(0x1d0)]=0x57;break;}if(!_0x3cbb23){_0x2318d4['next']=0x56;break;}_0x176e11=createUiPromise(_constants['UI'][_0x3ac361(0x13a)],_0x1b68d6),postMessage((0x0,_builder['UiMessage'])(_constants['UI'][_0x3ac361(0x117)],{'device':_0x1b68d6[_0x3ac361(0x179)]()})),_0x2318d4[_0x3ac361(0x1d0)]=0x4a;return _0x176e11[_0x3ac361(0x1b0)];case 0x4a:_0x3e98f4=_0x2318d4[_0x3ac361(0x15d)],_0x29cf14=_0x3e98f4['payload'];if(!_0x29cf14){_0x2318d4[_0x3ac361(0x1d0)]=0x53;break;}_0x1b68d6['setInternalState'](undefined),_0x2318d4[_0x3ac361(0x1d0)]=0x50;return _0x1b68d6[_0x3ac361(0x1cb)](_0x2eab78[_0x3ac361(0x146)]);case 0x50:return _0x2318d4[_0x3ac361(0x160)](_0x3ac361(0x161),_0x1769d0());case 0x53:_0x1b68d6[_0x3ac361(0x1bc)](_0x5194f4);case 0x54:_0x2318d4[_0x3ac361(0x1d0)]=0x57;break;case 0x56:throw _constants[_0x3ac361(0x15e)]['TypedError'](_0x3ac361(0x132));case 0x57:_0x2318d4[_0x3ac361(0x1d0)]=0x63;break;case 0x59:_0x2318d4[_0x3ac361(0x1b8)]=0x59,_0x2318d4['t1']=_0x2318d4['catch'](0x3a);if(!(_0x2318d4['t1'][_0x3ac361(0x153)]===_constants[_0x3ac361(0x15e)][_0x3ac361(0x115)]&&_0x2a718b<_0x2abf59)){_0x2318d4[_0x3ac361(0x1d0)]=0x61;break;}_0x2a718b++,postMessage((0x0,_builder[_0x3ac361(0x1ce)])(_constants['UI'][_0x3ac361(0x130)],{'device':_0x1b68d6[_0x3ac361(0x179)]()}));return _0x2318d4[_0x3ac361(0x160)](_0x3ac361(0x161),_0x1769d0());case 0x61:_0x1b68d6[_0x3ac361(0x136)](undefined);return _0x2318d4[_0x3ac361(0x160)](_0x3ac361(0x161),Promise[_0x3ac361(0x137)](_0x2318d4['t1']));case 0x63:if(!_0x2eab78[_0x3ac361(0x19c)]){_0x2318d4[_0x3ac361(0x1d0)]=0x68;break;}_0x2318d4['next']=0x66;return getPopupPromise()['promise'];case 0x66:_0x2318d4[_0x3ac361(0x1d0)]=0x69;break;case 0x68:postMessage((0x0,_builder[_0x3ac361(0x1ce)])(_constants[_0x3ac361(0x15f)][_0x3ac361(0x176)]));case 0x69:_0x2318d4[_0x3ac361(0x1b8)]=0x69,_0x3e2150=_0x2eab78[_0x3ac361(0x1a2)]();if(!(_deviceList&&_0x3e2150)){_0x2318d4[_0x3ac361(0x1d0)]=0x6e;break;}_0x2318d4[_0x3ac361(0x1d0)]=0x6e;return _deviceList[_0x3ac361(0x120)](_0x3e2150,!![]);case 0x6e:_0x2318d4[_0x3ac361(0x1d0)]=0x70;return _0x2eab78[_0x3ac361(0x139)]();case 0x70:_0x2e0d38=_0x2318d4['sent'],_0x4350b6=(0x0,_builder[_0x3ac361(0x1b1)])(_0x2eab78[_0x3ac361(0x163)],!![],_0x2e0d38,{'message':_0x3924a7,'method':_0x2eab78}),_0x2318d4[_0x3ac361(0x1d0)]=0x77;break;case 0x74:_0x2318d4[_0x3ac361(0x1b8)]=0x74,_0x2318d4['t2']=_0x2318d4[_0x3ac361(0x162)](0x69);return _0x2318d4[_0x3ac361(0x160)](_0x3ac361(0x161),Promise[_0x3ac361(0x137)](_0x2318d4['t2']));case 0x77:case'end':return _0x2318d4[_0x3ac361(0x1a4)]();}}},_0x38cbb3,null,[[0x3a,0x59],[0x69,0x74]]);}));return function _0x221a79(){return _0x3ffa90['apply'](this,arguments);};}()),_0x4a26bc[_0x108086(0x1d0)]=0x72;return _0x1b68d6[_0x108086(0x139)](_0x1769d0,{'keepSession':_0x2eab78['keepSession'],'useEmptyPassphrase':_0x2eab78[_0x108086(0x146)],'skipFinalReload':_0x2eab78[_0x108086(0x197)]});case 0x72:_0x4a26bc[_0x108086(0x1d0)]=0x7b;break;case 0x74:_0x4a26bc[_0x108086(0x1b8)]=0x74,_0x4a26bc['t4']=_0x4a26bc[_0x108086(0x162)](0x6c);_deviceList&&_0x4a26bc['t4'][_0x108086(0x154)]===_0x108086(0x19d)&&_deviceList[_0x108086(0x1aa)](_0x1b68d6);if(!(_0x1b68d6&&_0x4a26bc['t4'][_0x108086(0x153)]===_constants[_0x108086(0x15e)]['DEVICE_DISCONNECTED_DURING_ACTION'])){_0x4a26bc['next']=0x7a;break;}_0x4a26bc[_0x108086(0x1d0)]=0x7a;return _0x1b68d6[_0x108086(0x1a5)]();case 0x7a:_0x2eab78&&(_deviceList&&_0x4a26bc['t4'][_0x108086(0x153)]===_constants[_0x108086(0x15e)][_0x108086(0x181)]&&_deviceList[_0x108086(0x198)](),_0x4350b6=(0x0,_builder['ResponseMessage'])(_0x2eab78[_0x108086(0x163)],![],{'error':_0x4a26bc['t4']}));case 0x7b:_0x4a26bc[_0x108086(0x1b8)]=0x7b,_log[_0x108086(0x171)](_0x108086(0x16e),_0x4350b6),_0x39bb5e=_0x4350b6;if(!_0x39bb5e){_0x4a26bc[_0x108086(0x1d0)]=0x89;break;}_0x4a26bc[_0x108086(0x1d0)]=0x81;return _0x1b68d6[_0x108086(0x12c)]();case 0x81:closePopup(),cleanup();_0x2eab78&&_0x2eab78[_0x108086(0x14c)]();if(!_deviceList){_0x4a26bc[_0x108086(0x1d0)]=0x88;break;}_0x39bb5e['success']&&_deviceList[_0x108086(0x18c)](_0x1b68d6);_0x4a26bc[_0x108086(0x1d0)]=0x88;return _deviceList[_0x108086(0x152)]();case 0x88:postMessage(_0x39bb5e);case 0x89:return _0x4a26bc[_0x108086(0x19b)](0x7b);case 0x8a:case _0x108086(0x10b):return _0x4a26bc[_0x108086(0x1a4)]();}}},_0x40dae4,null,[[0x6,0xf],[0x16,0x23],[0x2f,0x35],[0x42,0x4b],[0x6c,0x74,0x7b,0x8a]]);}));return function _0x5ac4c8(_0x222794){return _0x1a21a4['apply'](this,arguments);};}());exports[a11_0x172ff7(0x12d)]=onCall;function a11_0x3737(){var _0x12eac0=['REQUEST_UI_WINDOW','push','payload','path','1115588LWWZkh','dispose','remember','TRANSPORT\x20ERROR','Interaction\x20timeout','function','interactionTimeout','restoreMessages','message','code','passphraseOnDevice','Device_FwException','getFirstDevicePath','4070728Faeesa','setDevice','getPopupPromise','614296IKljnb','hasExpectedDeviceState','sent','ERRORS','POPUP','abrupt','return','catch','responseID','requiredPermissions','keepSession','normalize','waitForFirstRun','asArray','Device_ModeException','validateState','ButtonRequest_Address','PASSPHRASE','prototype','onCall::finally','getVersion','CALL','log','Transport_Missing','ble','save','NFKD','CANCEL_POPUP_REQUEST','Cleanup...','getOwnPropertyDescriptor','toMessageObject','2583342dpaMfB','CLOSED','forEach','RECEIVE_FEE','postMessage','CHANGED','IFRAME','WRONG_PREVIOUS_SESSION_ERROR_MESSAGE','firmwareStatus','wrap','PIN','createUiPromise','DISCONNECT','HANDSHAKE','SELECT_DEVICE','DeviceMessage','RECEIVE_CONFIRMATION','default','removeAuthPenalty','initData','event','__esModule','isRunning','Method_Override','DISABLE_WEBUSB','device','outdated','START','management','skipFinalReload','enumerate','RECEIVE_DEVICE','DEVICE','finish','useUi','Device_Disconnected','init','Method_NotAllowed','424235TZiUal','REQUEST_PASSPHRASE','getCustomMessages','create','stop','acquire','initCore','onBeforeUnload','removeUiPromise','length','addAuthPenalty','Device_NotFound','has','overridden','ADDRESS_VALIDATION','useDevice','promise','ResponseMessage','CONNECT','webusb','15JmfphO','getCurrentMethod','handle\x20message\x20in\x20core','getButtonRequestData','prev','set','object','LOGIN_CHALLENGE_RESPONSE','setExternalState','noBackupConfirmation','RECEIVE_PIN','removeAllListeners','splice','90gogpVt','isLoaded','emit','TRANSPORT','checkFirmwareRange','init\x20error','getTransportInfo','hasOwnProperty','REQUEST_PASSPHRASE_ON_DEVICE','popup','initialize','isUsedHere','isManagementAllowed','UiMessage','27200MtocGT','next','value','ERROR','hasUnexpectedMode','findUiPromise','handleMessage','end','features','BUTTON','state','Method_Cancel','trustedHost','WORD','CONNECT_UNACQUIRED','RECEIVE_ACCOUNT','defineProperty','INVALID_PIN_ERROR_MESSAGE','transportReconnect','INVALID_PASSPHRASE','RESPONSE_EVENT','enabled','deviceInstance','RECEIVE_PASSPHRASE','REQUEST_BUTTON','REQUEST_PIN','Method_Interrupted','error','reconfigure','transportType','filter','confirmation','initTransport','devicePath','DEVICE_NEEDS_BACKUP','Method_PermissionsNotGranted','type','RECEIVE_WORD','Core','RECEIVE_PERMISSION','cleanup','onCall','7KbYpRP','TransportMessage','INVALID_PIN','Method_InvalidParameter','Device_InvalidState','mark','get','apply','setInternalState','reject','resolveAfter','run','INVALID_PASSPHRASE_ACTION','resolve','getDevice','CHANGE_ACCOUNT','CUSTOM_MESSAGE_RESPONSE','debug','392236coSvsW','TypedError','find','call','getSettings','getDevicePath','useEmptyPassphrase'];a11_0x3737=function(){return _0x12eac0;};return a11_0x3737();}var cleanup=function cleanup(){var _0x494e08=a11_0x172ff7;_popupPromise=null,_uiPromises=[],_interactionTimeout['stop'](),_log[_0x494e08(0x171)](_0x494e08(0x177));},closePopup=function closePopup(){var _0x4f0146=a11_0x172ff7;_popupPromise&&postMessage((0x0,_builder['UiMessage'])(_constants['POPUP'][_0x4f0146(0x176)])),postMessage((0x0,_builder[_0x4f0146(0x1ce)])(_constants['UI']['CLOSE_UI_WINDOW']));},onDeviceButtonHandler=(function(){var _0x19631f=a11_0x172ff7,_0x59adc5=(0x0,_asyncToGenerator2[_0x19631f(0x18b)])(_regenerator[_0x19631f(0x18b)][_0x19631f(0x133)](function _0x29f63c(_0x8d82f8,_0x13a9e2,_0x1d81ae){var _0x40690f=_0x19631f,_0x2bed80,_0xaa56b9;return _regenerator[_0x40690f(0x18b)]['wrap'](function _0x2d39f1(_0x57890b){var _0x50d3a0=_0x40690f;while(0x1){switch(_0x57890b[_0x50d3a0(0x1b8)]=_0x57890b[_0x50d3a0(0x1d0)]){case 0x0:_0x2bed80=_0x13a9e2===_0x50d3a0(0x16b);if(!(!_0x2bed80||_0x2bed80&&_0x1d81ae['useUi'])){_0x57890b[_0x50d3a0(0x1d0)]=0x4;break;}_0x57890b[_0x50d3a0(0x1d0)]=0x4;return getPopupPromise()['promise'];case 0x4:_0xaa56b9=typeof _0x1d81ae[_0x50d3a0(0x1b7)]===_0x50d3a0(0x150)?_0x1d81ae['getButtonRequestData'](_0x13a9e2):null,interactionTimeout(),postMessage((0x0,_builder[_0x50d3a0(0x189)])(_constants[_0x50d3a0(0x19a)][_0x50d3a0(0x10d)],{'device':_0x8d82f8[_0x50d3a0(0x179)](),'code':_0x13a9e2})),postMessage((0x0,_builder[_0x50d3a0(0x1ce)])(_constants['UI'][_0x50d3a0(0x11c)],{'device':_0x8d82f8[_0x50d3a0(0x179)](),'code':_0x13a9e2,'data':_0xaa56b9}));_0x2bed80&&!_0x1d81ae['useUi']&&postMessage((0x0,_builder[_0x50d3a0(0x1ce)])(_constants['UI'][_0x50d3a0(0x1ae)],_0xaa56b9));case 0x9:case'end':return _0x57890b[_0x50d3a0(0x1a4)]();}}},_0x29f63c);}));return function _0x211a28(_0x57d561,_0x392a43,_0x49f193){var _0x14f9d4=_0x19631f;return _0x59adc5[_0x14f9d4(0x135)](this,arguments);};}()),onDevicePinHandler=(function(){var _0x134903=a11_0x172ff7,_0x57fbec=(0x0,_asyncToGenerator2[_0x134903(0x18b)])(_regenerator[_0x134903(0x18b)]['mark'](function _0x3104c8(_0x8ec4af,_0x390fcb,_0x17f390){var _0x256f31=_0x134903,_0x2db770,_0x3f0796,_0x438cf2;return _regenerator['default'][_0x256f31(0x183)](function _0x5789c8(_0x2ed134){var _0x449501=_0x256f31;while(0x1){switch(_0x2ed134[_0x449501(0x1b8)]=_0x2ed134[_0x449501(0x1d0)]){case 0x0:_0x2ed134[_0x449501(0x1d0)]=0x2;return getPopupPromise()['promise'];case 0x2:_0x2db770=createUiPromise(_constants['UI']['RECEIVE_PIN'],_0x8ec4af),postMessage((0x0,_builder['UiMessage'])(_constants['UI'][_0x449501(0x11d)],{'device':_0x8ec4af[_0x449501(0x179)](),'type':_0x390fcb})),_0x2ed134['next']=0x6;return _0x2db770[_0x449501(0x1b0)];case 0x6:_0x3f0796=_0x2ed134[_0x449501(0x15d)],_0x438cf2=_0x3f0796[_0x449501(0x149)],_0x17f390(null,_0x438cf2);case 0x9:case _0x449501(0x10b):return _0x2ed134[_0x449501(0x1a4)]();}}},_0x3104c8);}));return function _0x516629(_0x4f3d3d,_0xf45c25,_0x5eb0aa){var _0x34839e=_0x134903;return _0x57fbec[_0x34839e(0x135)](this,arguments);};}()),onDeviceWordHandler=(function(){var _0x2246ea=a11_0x172ff7,_0x54b3f9=(0x0,_asyncToGenerator2[_0x2246ea(0x18b)])(_regenerator['default'][_0x2246ea(0x133)](function _0x48f5c6(_0x1b2ec8,_0x2776d8,_0x582701){var _0x1d0b76=_0x2246ea,_0x11122d,_0x54dba8,_0xd04c82;return _regenerator[_0x1d0b76(0x18b)][_0x1d0b76(0x183)](function _0x2a5c6b(_0x33c422){var _0x3da767=_0x1d0b76;while(0x1){switch(_0x33c422['prev']=_0x33c422[_0x3da767(0x1d0)]){case 0x0:_0x33c422[_0x3da767(0x1d0)]=0x2;return getPopupPromise()[_0x3da767(0x1b0)];case 0x2:_0x11122d=createUiPromise(_constants['UI'][_0x3da767(0x129)],_0x1b2ec8),postMessage((0x0,_builder[_0x3da767(0x1ce)])(_constants['UI']['REQUEST_WORD'],{'device':_0x1b2ec8['toMessageObject'](),'type':_0x2776d8})),_0x33c422[_0x3da767(0x1d0)]=0x6;return _0x11122d[_0x3da767(0x1b0)];case 0x6:_0x54dba8=_0x33c422[_0x3da767(0x15d)],_0xd04c82=_0x54dba8['payload'],_0x582701(null,_0xd04c82);case 0x9:case'end':return _0x33c422[_0x3da767(0x1a4)]();}}},_0x48f5c6);}));return function _0x2ca01b(_0x709f02,_0x418e8e,_0x57be6d){var _0x4792ad=_0x2246ea;return _0x54b3f9[_0x4792ad(0x135)](this,arguments);};}()),onDevicePassphraseHandler=(function(){var _0x2eb3dd=a11_0x172ff7,_0x13246f=(0x0,_asyncToGenerator2['default'])(_regenerator[_0x2eb3dd(0x18b)][_0x2eb3dd(0x133)](function _0x3db506(_0x38d7fc,_0x8d6a53){var _0x5c1d57=_0x2eb3dd,_0x504ce1,_0x1a032f,_0x13e3e2,_0x2ce72b,_0x324ddb;return _regenerator[_0x5c1d57(0x18b)][_0x5c1d57(0x183)](function _0x162412(_0x234b9d){var _0x4305bd=_0x5c1d57;while(0x1){switch(_0x234b9d[_0x4305bd(0x1b8)]=_0x234b9d[_0x4305bd(0x1d0)]){case 0x0:_0x234b9d[_0x4305bd(0x1d0)]=0x2;return getPopupPromise()[_0x4305bd(0x1b0)];case 0x2:_0x504ce1=createUiPromise(_constants['UI']['RECEIVE_PASSPHRASE'],_0x38d7fc),postMessage((0x0,_builder[_0x4305bd(0x1ce)])(_constants['UI'][_0x4305bd(0x1a1)],{'device':_0x38d7fc[_0x4305bd(0x179)]()})),_0x234b9d[_0x4305bd(0x1d0)]=0x6;return _0x504ce1[_0x4305bd(0x1b0)];case 0x6:_0x1a032f=_0x234b9d[_0x4305bd(0x15d)],_0x13e3e2=_0x1a032f[_0x4305bd(0x149)][_0x4305bd(0x1d1)],_0x2ce72b=_0x1a032f[_0x4305bd(0x149)][_0x4305bd(0x155)],_0x324ddb=_0x1a032f[_0x4305bd(0x149)][_0x4305bd(0x174)],_0x8d6a53({'passphrase':_0x13e3e2[_0x4305bd(0x166)](_0x4305bd(0x175)),'passphraseOnDevice':_0x2ce72b,'cache':_0x324ddb});case 0xb:case'end':return _0x234b9d[_0x4305bd(0x1a4)]();}}},_0x3db506);}));return function _0x3f489d(_0x22d870,_0x249aa1){var _0x728fd2=_0x2eb3dd;return _0x13246f[_0x728fd2(0x135)](this,arguments);};}()),onEmptyPassphraseHandler=(function(){var _0x5f4d36=a11_0x172ff7,_0x2c1902=(0x0,_asyncToGenerator2[_0x5f4d36(0x18b)])(_regenerator[_0x5f4d36(0x18b)][_0x5f4d36(0x133)](function _0x1c184e(_0x1e43c0,_0x50ede2){var _0x5e6f10=_0x5f4d36;return _regenerator[_0x5e6f10(0x18b)]['wrap'](function _0x12c4be(_0x16816e){var _0x498be3=_0x5e6f10;while(0x1){switch(_0x16816e[_0x498be3(0x1b8)]=_0x16816e[_0x498be3(0x1d0)]){case 0x0:_0x50ede2({'passphrase':''});case 0x1:case _0x498be3(0x10b):return _0x16816e[_0x498be3(0x1a4)]();}}},_0x1c184e);}));return function _0x447ef4(_0x3453cc,_0x4c8c2e){return _0x2c1902['apply'](this,arguments);};}()),onPopupClosed=function onPopupClosed(_0x7cf70d){var _0x1079c7=a11_0x172ff7,_0x1853c9=_0x7cf70d?_constants[_0x1079c7(0x15e)][_0x1079c7(0x141)](_0x1079c7(0x10f),_0x7cf70d):_constants['ERRORS'][_0x1079c7(0x141)](_0x1079c7(0x11e));_deviceList&&_deviceList['asArray']()[_0x1079c7(0x1a9)]>0x0?(_deviceList['allDevices']()[_0x1079c7(0x17c)](function(_0x37c114){var _0x53204=_0x1079c7;_0x37c114[_0x53204(0x165)]=![];if(_0x37c114[_0x53204(0x1cc)]())_0x37c114['interruptionFromUser'](_0x1853c9);else{var _0x468dda=findUiPromise(0x0,_constants[_0x53204(0x19a)][_0x53204(0x186)]);_0x468dda?_0x468dda[_0x53204(0x13b)]({'event':_0x1853c9['message'],'payload':null}):(_callMethods[_0x53204(0x17c)](function(_0x42b124){var _0x34a053=_0x53204;postMessage((0x0,_builder['ResponseMessage'])(_0x42b124[_0x34a053(0x163)],![],{'error':_0x1853c9}));}),_callMethods[_0x53204(0x1c0)](0x0,_callMethods[_0x53204(0x1a9)]));}}),cleanup()):(_uiPromises['length']>0x0&&(_uiPromises[_0x1079c7(0x17c)](function(_0x3a6e27){var _0x1d6c32=_0x1079c7;_0x3a6e27[_0x1d6c32(0x137)](_0x1853c9);}),_uiPromises=[]),_popupPromise&&(_popupPromise['reject'](_0x1853c9),_popupPromise=null),cleanup());},handleDeviceSelectionChanges=function handleDeviceSelectionChanges(_0x3dba39){var _0xe45f6d=a11_0x172ff7;_0x3dba39===void 0x0&&(_0x3dba39=null);var _0xe16c8d=findUiPromise(0x0,_constants['UI'][_0xe45f6d(0x199)]);if(_0xe16c8d&&_deviceList){var _0x38f5f4=_deviceList['asArray'](),_0x26627e=_deviceList['transportType']()['indexOf'](_0xe45f6d(0x1b3))>=0x0;_0x38f5f4[_0xe45f6d(0x1a9)]===0x1&&!_0x26627e?(_0xe16c8d[_0xe45f6d(0x13b)]({'event':_constants['UI'][_0xe45f6d(0x199)],'payload':{'device':_0x38f5f4[0x0]}}),removeUiPromise(_0xe16c8d)):postMessage((0x0,_builder[_0xe45f6d(0x1ce)])(_constants['UI'][_0xe45f6d(0x188)],{'webusb':_0x26627e,'devices':_0x38f5f4}));}if(_0x3dba39){var _0x1572ea=_0x3dba39[_0xe45f6d(0x14a)],_0x436f74=![];_uiPromises['forEach'](function(_0x2a6042){var _0x30be09=_0xe45f6d;_0x2a6042[_0x30be09(0x193)]&&_0x2a6042[_0x30be09(0x193)][_0x30be09(0x145)]()===_0x1572ea&&(_0x2a6042['id']===_constants[_0x30be09(0x19a)][_0x30be09(0x186)]&&_0x2a6042['resolve']({'event':_constants[_0x30be09(0x19a)][_0x30be09(0x186)],'payload':null}),_0x436f74=!![]);}),_preferredDevice&&_preferredDevice[_0xe45f6d(0x14a)]===_0x1572ea&&(_preferredDevice=null),_0x436f74&&(closePopup(),cleanup());}},initDeviceList=(function(){var _0x24c119=a11_0x172ff7,_0xa22169=(0x0,_asyncToGenerator2[_0x24c119(0x18b)])(_regenerator[_0x24c119(0x18b)][_0x24c119(0x133)](function _0x228801(_0x1e8c71){var _0x2b7dd3=_0x24c119;return _regenerator[_0x2b7dd3(0x18b)]['wrap'](function _0x52e997(_0x2fff28){var _0xff0559=_0x2b7dd3;while(0x1){switch(_0x2fff28[_0xff0559(0x1b8)]=_0x2fff28[_0xff0559(0x1d0)]){case 0x0:_0x2fff28['prev']=0x0,_deviceList=new _DeviceList['default'](),_deviceList['on'](_constants[_0xff0559(0x19a)][_0xff0559(0x1b2)],function(_0x49cb11){var _0x29c178=_0xff0559;handleDeviceSelectionChanges(),postMessage((0x0,_builder['DeviceMessage'])(_constants[_0x29c178(0x19a)]['CONNECT'],_0x49cb11));}),_deviceList['on'](_constants[_0xff0559(0x19a)][_0xff0559(0x112)],function(_0x57d2d3){var _0x2c8bc2=_0xff0559;handleDeviceSelectionChanges(),postMessage((0x0,_builder[_0x2c8bc2(0x189)])(_constants[_0x2c8bc2(0x19a)][_0x2c8bc2(0x112)],_0x57d2d3));}),_deviceList['on'](_constants[_0xff0559(0x19a)][_0xff0559(0x186)],function(_0x4c0a0b){var _0x721377=_0xff0559;handleDeviceSelectionChanges(_0x4c0a0b),postMessage((0x0,_builder['DeviceMessage'])(_constants[_0x721377(0x19a)][_0x721377(0x186)],_0x4c0a0b));}),_deviceList['on'](_constants['DEVICE'][_0xff0559(0x17f)],function(_0x4f1c50){var _0x5e21a1=_0xff0559;postMessage((0x0,_builder[_0x5e21a1(0x189)])(_constants[_0x5e21a1(0x19a)][_0x5e21a1(0x17f)],_0x4f1c50));}),_deviceList['on'](_constants[_0xff0559(0x1c4)][_0xff0559(0x107)],(function(){var _0x530a67=_0xff0559,_0x1004e4=(0x0,_asyncToGenerator2['default'])(_regenerator[_0x530a67(0x18b)]['mark'](function _0x524faa(_0x14cf0f){var _0x245e1c=_0x530a67;return _regenerator[_0x245e1c(0x18b)][_0x245e1c(0x183)](function _0x2c23e2(_0x3ebd6b){var _0x493651=_0x245e1c;while(0x1){switch(_0x3ebd6b[_0x493651(0x1b8)]=_0x3ebd6b[_0x493651(0x1d0)]){case 0x0:_log[_0x493651(0x11f)](_0x493651(0x14e),_0x14cf0f);_deviceList&&(_deviceList['disconnectDevices'](),_deviceList[_0x493651(0x1bf)]());_deviceList=null,postMessage((0x0,_builder[_0x493651(0x12f)])(_constants[_0x493651(0x1c4)]['ERROR'],{'error':_0x14cf0f}));if(!_0x1e8c71[_0x493651(0x116)]){_0x3ebd6b[_0x493651(0x1d0)]=0x9;break;}_0x3ebd6b[_0x493651(0x1d0)]=0x7;return(0x0,_promiseUtils[_0x493651(0x138)])(0x3e8,null);case 0x7:_0x3ebd6b[_0x493651(0x1d0)]=0x9;return initDeviceList(_0x1e8c71);case 0x9:case'end':return _0x3ebd6b[_0x493651(0x1a4)]();}}},_0x524faa);}));return function(_0x1845f1){var _0x26aee2=_0x530a67;return _0x1004e4[_0x26aee2(0x135)](this,arguments);};}())),_deviceList['on'](_constants[_0xff0559(0x1c4)][_0xff0559(0x195)],function(_0x2a10d3){var _0x10b776=_0xff0559;return postMessage((0x0,_builder[_0x10b776(0x12f)])(_constants[_0x10b776(0x1c4)][_0x10b776(0x195)],_0x2a10d3));}),_0x2fff28[_0xff0559(0x1d0)]=0xa;return _deviceList[_0xff0559(0x19e)]();case 0xa:if(!_deviceList){_0x2fff28[_0xff0559(0x1d0)]=0xd;break;}_0x2fff28['next']=0xd;return _deviceList['waitForTransportFirstEvent']();case 0xd:_0x2fff28[_0xff0559(0x1d0)]=0x1b;break;case 0xf:_0x2fff28[_0xff0559(0x1b8)]=0xf,_0x2fff28['t0']=_0x2fff28['catch'](0x0),_deviceList=null,postMessage((0x0,_builder[_0xff0559(0x12f)])(_constants[_0xff0559(0x1c4)][_0xff0559(0x107)],{'error':_0x2fff28['t0']}));if(_0x1e8c71[_0xff0559(0x116)]){_0x2fff28[_0xff0559(0x1d0)]=0x17;break;}throw _0x2fff28['t0'];case 0x17:_0x2fff28[_0xff0559(0x1d0)]=0x19;return(0x0,_promiseUtils[_0xff0559(0x138)])(0xbb8,null);case 0x19:_0x2fff28[_0xff0559(0x1d0)]=0x1b;return initDeviceList(_0x1e8c71);case 0x1b:case'end':return _0x2fff28['stop']();}}},_0x228801,null,[[0x0,0xf]]);}));return function _0x45bfe5(_0x46053c){var _0x1a27b3=_0x24c119;return _0xa22169[_0x1a27b3(0x135)](this,arguments);};}()),Core=function(_0xdb734){var _0x57c328=a11_0x172ff7;(0x0,_inheritsLoose2['default'])(_0x42419b,_0xdb734);function _0x42419b(){return _0xdb734['call'](this)||this;}var _0x3f1c11=_0x42419b['prototype'];return _0x3f1c11['handleMessage']=function _0x6a4027(_0xb99f6,_0x4a4a51){_handleMessage(_0xb99f6,_0x4a4a51);},_0x3f1c11[_0x57c328(0x1a7)]=function _0x4cd78d(){var _0x322668=_0x57c328;_deviceList&&_deviceList[_0x322668(0x1a7)](),this['removeAllListeners']();},_0x3f1c11[_0x57c328(0x1b5)]=function _0x4177b2(){return _callMethods;},_0x3f1c11['getTransportInfo']=function _0x9dccd4(){var _0x548252=_0x57c328;if(_deviceList)return _deviceList[_0x548252(0x1c7)]();return{'type':'','version':'','outdated':!![]};},_0x42419b;}(_events[a11_0x172ff7(0x18b)]);exports[a11_0x172ff7(0x12a)]=Core;var initCore=function initCore(){return _core=new Core(),_core;};exports[a11_0x172ff7(0x1a6)]=initCore;var initData=(function(){var _0x2f595a=a11_0x172ff7,_0x4c11ac=(0x0,_asyncToGenerator2[_0x2f595a(0x18b)])(_regenerator[_0x2f595a(0x18b)]['mark'](function _0x21be8b(_0x22a754){var _0x58da6a=_0x2f595a;return _regenerator[_0x58da6a(0x18b)][_0x58da6a(0x183)](function _0x21f736(_0x3bc54){var _0x64a752=_0x58da6a;while(0x1){switch(_0x3bc54[_0x64a752(0x1b8)]=_0x3bc54['next']){case 0x0:_0x3bc54[_0x64a752(0x1b8)]=0x0,_0x3bc54[_0x64a752(0x1d0)]=0x3;return _DataManager[_0x64a752(0x18b)]['load'](_0x22a754);case 0x3:_0x3bc54[_0x64a752(0x1d0)]=0x9;break;case 0x5:_0x3bc54['prev']=0x5,_0x3bc54['t0']=_0x3bc54[_0x64a752(0x162)](0x0),_log[_0x64a752(0x171)](_0x64a752(0x1c6),_0x3bc54['t0']);throw _0x3bc54['t0'];case 0x9:case _0x64a752(0x10b):return _0x3bc54[_0x64a752(0x1a4)]();}}},_0x21be8b,null,[[0x0,0x5]]);}));return function _0x44cbaa(_0x753440){var _0x2890a9=_0x2f595a;return _0x4c11ac[_0x2890a9(0x135)](this,arguments);};}());exports[a11_0x172ff7(0x18d)]=initData;var init=(function(){var _0x3c5b5a=a11_0x172ff7,_0x303884=(0x0,_asyncToGenerator2[_0x3c5b5a(0x18b)])(_regenerator[_0x3c5b5a(0x18b)][_0x3c5b5a(0x133)](function _0x5a1ef6(_0x1e0cc4){var _0x3fded2=_0x3c5b5a;return _regenerator[_0x3fded2(0x18b)]['wrap'](function _0x1e611e(_0x107c3b){var _0x4cf6f0=_0x3fded2;while(0x1){switch(_0x107c3b[_0x4cf6f0(0x1b8)]=_0x107c3b[_0x4cf6f0(0x1d0)]){case 0x0:_0x107c3b[_0x4cf6f0(0x1b8)]=0x0,_log[_0x4cf6f0(0x119)]=!!_0x1e0cc4[_0x4cf6f0(0x13f)],_0x107c3b['next']=0x4;return _DataManager[_0x4cf6f0(0x18b)]['load'](_0x1e0cc4);case 0x4:_0x107c3b[_0x4cf6f0(0x1d0)]=0x6;return initCore();case 0x6:_interactionTimeout=new _interactionTimeout2['default'](_0x1e0cc4[_0x4cf6f0(0x1ca)]?_0x1e0cc4[_0x4cf6f0(0x151)]:0x0);return _0x107c3b['abrupt'](_0x4cf6f0(0x161),_core);case 0xa:_0x107c3b[_0x4cf6f0(0x1b8)]=0xa,_0x107c3b['t0']=_0x107c3b[_0x4cf6f0(0x162)](0x0),_log[_0x4cf6f0(0x171)](_0x4cf6f0(0x1c6),_0x107c3b['t0']);throw _0x107c3b['t0'];case 0xe:case'end':return _0x107c3b[_0x4cf6f0(0x1a4)]();}}},_0x5a1ef6,null,[[0x0,0xa]]);}));return function _0x11161c(_0x49a029){var _0x1949ed=_0x3c5b5a;return _0x303884[_0x1949ed(0x135)](this,arguments);};}());exports[a11_0x172ff7(0x19e)]=init;var initTransport=(function(){var _0x3d4c45=a11_0x172ff7,_0x39036f=(0x0,_asyncToGenerator2[_0x3d4c45(0x18b)])(_regenerator[_0x3d4c45(0x18b)][_0x3d4c45(0x133)](function _0x55a9ff(_0x40a70b){var _0x2373e7=_0x3d4c45;return _regenerator[_0x2373e7(0x18b)]['wrap'](function _0xce6d9d(_0x54bec3){var _0x1d0bad=_0x2373e7;while(0x1){switch(_0x54bec3[_0x1d0bad(0x1b8)]=_0x54bec3[_0x1d0bad(0x1d0)]){case 0x0:_0x54bec3['prev']=0x0;if(_0x40a70b[_0x1d0bad(0x116)]){_0x54bec3[_0x1d0bad(0x1d0)]=0x6;break;}_0x54bec3['next']=0x4;return initDeviceList(_0x40a70b);case 0x4:_0x54bec3[_0x1d0bad(0x1d0)]=0x7;break;case 0x6:initDeviceList(_0x40a70b);case 0x7:_0x54bec3[_0x1d0bad(0x1d0)]=0xd;break;case 0x9:_0x54bec3['prev']=0x9,_0x54bec3['t0']=_0x54bec3[_0x1d0bad(0x162)](0x0),_log[_0x1d0bad(0x171)](_0x1d0bad(0x124),_0x54bec3['t0']);throw _0x54bec3['t0'];case 0xd:case'end':return _0x54bec3[_0x1d0bad(0x1a4)]();}}},_0x55a9ff,null,[[0x0,0x9]]);}));return function _0x1ad7d0(_0xb05774){return _0x39036f['apply'](this,arguments);};}());exports[a11_0x172ff7(0x124)]=initTransport;var disableWebUSBTransport=(function(){var _0x423a1a=a11_0x172ff7,_0x247622=(0x0,_asyncToGenerator2['default'])(_regenerator[_0x423a1a(0x18b)][_0x423a1a(0x133)](function _0x5a8575(){var _0x283048=_0x423a1a,_0x581f4c;return _regenerator[_0x283048(0x18b)][_0x283048(0x183)](function _0x5c1229(_0x20f156){var _0x1c16b5=_0x283048;while(0x1){switch(_0x20f156['prev']=_0x20f156['next']){case 0x0:if(_deviceList){_0x20f156[_0x1c16b5(0x1d0)]=0x2;break;}return _0x20f156[_0x1c16b5(0x160)]('return');case 0x2:if(!(_deviceList[_0x1c16b5(0x121)]()!=='WebUsbPlugin')){_0x20f156[_0x1c16b5(0x1d0)]=0x4;break;}return _0x20f156[_0x1c16b5(0x160)](_0x1c16b5(0x161));case 0x4:_0x581f4c=_DataManager['default'][_0x1c16b5(0x144)](),_0x581f4c[_0x1c16b5(0x1b3)]=![],_0x20f156['prev']=0x6,_deviceList[_0x1c16b5(0x1a7)](),_0x20f156['next']=0xa;return initDeviceList(_0x581f4c);case 0xa:_0x20f156[_0x1c16b5(0x1d0)]=0xe;break;case 0xc:_0x20f156[_0x1c16b5(0x1b8)]=0xc,_0x20f156['t0']=_0x20f156['catch'](0x6);case 0xe:case _0x1c16b5(0x10b):return _0x20f156[_0x1c16b5(0x1a4)]();}}},_0x5a8575,null,[[0x6,0xc]]);}));return function _0x5b88af(){var _0x15a3ca=_0x423a1a;return _0x247622[_0x15a3ca(0x135)](this,arguments);};}());