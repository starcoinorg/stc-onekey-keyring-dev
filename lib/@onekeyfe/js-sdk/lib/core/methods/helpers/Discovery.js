'use strict';function a93_0x3034(){var _0x2a61a7=['length','getAccountDescriptor','type','object','dispose','5442376PlCbvy','wrap','typeIndex','addresses','availableBalance','interrupted','default','7639779NoWApa','Account\x20#','getAccountInfo','prev','378oaXyGX','285tQYxeu','commands','filter','18aLyUIs','18440WxfSth','enumerable','emit','getOwnPropertyDescriptor','blockchain','empty','mark','start','getAccountAddressN','types','normal','sent','50611dOwSXJ','forEach','1332248MhIJcI','return','defineProperties','10726NGcwyU','segwit','bind','next','descriptor','xPubMagicSegwit','push','3196520foaThA','bitcoin','getPath','getOwnPropertySymbols','progress','end','prototype','completed','TypedError','getOwnPropertyDescriptors','stop','defineProperty','coinInfo','abrupt','index','apply','ERRORS','accounts','complete','Runtime','delegateYield','6260ebflTP'];a93_0x3034=function(){return _0x2a61a7;};return a93_0x3034();}var a93_0xdbcef2=a93_0x3058;(function(_0x275189,_0x4d7305){var _0x4e5833=a93_0x3058,_0xa9f07a=_0x275189();while(!![]){try{var _0x512c0a=-parseInt(_0x4e5833(0x145))/0x1+-parseInt(_0x4e5833(0x148))/0x2*(parseInt(_0x4e5833(0x133))/0x3)+-parseInt(_0x4e5833(0x14f))/0x4+-parseInt(_0x4e5833(0x137))/0x5*(-parseInt(_0x4e5833(0x132))/0x6)+-parseInt(_0x4e5833(0x12e))/0x7+-parseInt(_0x4e5833(0x127))/0x8*(-parseInt(_0x4e5833(0x136))/0x9)+-parseInt(_0x4e5833(0x121))/0xa*(-parseInt(_0x4e5833(0x143))/0xb);if(_0x512c0a===_0x4d7305)break;else _0xa9f07a['push'](_0xa9f07a['shift']());}catch(_0xd5f4cc){_0xa9f07a['push'](_0xa9f07a['shift']());}}}(a93_0x3034,0xb4e28));var _interopRequireDefault=require('@babel/runtime/helpers/interopRequireDefault');exports['__esModule']=!![],exports[a93_0xdbcef2(0x12d)]=void 0x0;function a93_0x3058(_0x431003,_0x5b5baa){var _0x3034d4=a93_0x3034();return a93_0x3058=function(_0x305827,_0x3bf55a){_0x305827=_0x305827-0x11d;var _0x20c6d7=_0x3034d4[_0x305827];return _0x20c6d7;},a93_0x3058(_0x431003,_0x5b5baa);}var _regenerator=_interopRequireDefault(require('@babel/runtime/regenerator')),_asyncToGenerator2=_interopRequireDefault(require('@babel/runtime/helpers/asyncToGenerator')),_assertThisInitialized2=_interopRequireDefault(require('@babel/runtime/helpers/assertThisInitialized')),_inheritsLoose2=_interopRequireDefault(require('@babel/runtime/helpers/inheritsLoose')),_defineProperty2=_interopRequireDefault(require('@babel/runtime/helpers/defineProperty')),_events=_interopRequireDefault(require('events')),_constants=require('../../../constants'),_BlockchainLink=_interopRequireDefault(require('../../../backend/BlockchainLink')),_DeviceCommands=_interopRequireDefault(require('../../../device/DeviceCommands')),_accountUtils=require('../../../utils/accountUtils'),_formatUtils=require('../../../utils/formatUtils');function ownKeys(_0x5fb916,_0x326f1e){var _0x120a29=a93_0xdbcef2,_0x1b274=Object['keys'](_0x5fb916);if(Object[_0x120a29(0x152)]){var _0x551ebd=Object[_0x120a29(0x152)](_0x5fb916);_0x326f1e&&(_0x551ebd=_0x551ebd[_0x120a29(0x135)](function(_0x525919){var _0x2f5ed1=_0x120a29;return Object['getOwnPropertyDescriptor'](_0x5fb916,_0x525919)[_0x2f5ed1(0x138)];})),_0x1b274['push'][_0x120a29(0x15e)](_0x1b274,_0x551ebd);}return _0x1b274;}function _objectSpread(_0x45feb2){var _0x4578ee=a93_0xdbcef2;for(var _0x5505f4=0x1;_0x5505f4<arguments[_0x4578ee(0x122)];_0x5505f4++){var _0x345d43=arguments[_0x5505f4]!=null?arguments[_0x5505f4]:{};if(_0x5505f4%0x2)ownKeys(Object(_0x345d43),!![])['forEach'](function(_0x407027){var _0x3ea7fb=_0x4578ee;(0x0,_defineProperty2[_0x3ea7fb(0x12d)])(_0x45feb2,_0x407027,_0x345d43[_0x407027]);});else Object[_0x4578ee(0x158)]?Object[_0x4578ee(0x147)](_0x45feb2,Object[_0x4578ee(0x158)](_0x345d43)):ownKeys(Object(_0x345d43))[_0x4578ee(0x144)](function(_0x26fc99){var _0x524dfd=_0x4578ee;Object[_0x524dfd(0x15a)](_0x45feb2,_0x26fc99,Object[_0x524dfd(0x13a)](_0x345d43,_0x26fc99));});}return _0x45feb2;}var Discovery=function(_0x40721c){var _0x2c1ec8=a93_0xdbcef2;(0x0,_inheritsLoose2['default'])(_0xd831e2,_0x40721c);function _0xd831e2(_0x4ce4b2){var _0x437700=a93_0x3058,_0x2d29ee;_0x2d29ee=_0x40721c['call'](this)||this,(0x0,_defineProperty2[_0x437700(0x12d)])((0x0,_assertThisInitialized2[_0x437700(0x12d)])(_0x2d29ee),'types',[]),_0x2d29ee[_0x437700(0x11d)]=[],_0x2d29ee['index']=0x0,_0x2d29ee[_0x437700(0x129)]=0x0,_0x2d29ee['interrupted']=![],_0x2d29ee[_0x437700(0x156)]=![],_0x2d29ee[_0x437700(0x13b)]=_0x4ce4b2[_0x437700(0x13b)],_0x2d29ee[_0x437700(0x134)]=_0x4ce4b2[_0x437700(0x134)],_0x2d29ee[_0x437700(0x15b)]=_0x4ce4b2['blockchain']['coinInfo'];var _0x2a4c9a=(0x0,_assertThisInitialized2[_0x437700(0x12d)])(_0x2d29ee),_0x360854=_0x2a4c9a[_0x437700(0x15b)];if(_0x360854[_0x437700(0x124)]===_0x437700(0x150)){var _0xf07aec=function _0x1bdd45(_0x368ad1,_0x535978){var _0x485920=_0x437700;return(0x0,_accountUtils[_0x485920(0x13f)])(_0x360854,_0x535978,{'purpose':_0x368ad1});};_0x360854['xPubMagicSegwitNative']&&_0x2d29ee[_0x437700(0x140)][_0x437700(0x14e)]({'type':_0x437700(0x141),'getPath':_0xf07aec[_0x437700(0x14a)]((0x0,_assertThisInitialized2[_0x437700(0x12d)])(_0x2d29ee),0x54)}),_0x360854[_0x437700(0x14d)]&&_0x2d29ee['types'][_0x437700(0x14e)]({'type':_0x2d29ee['types'][_0x437700(0x122)]>0x0?_0x437700(0x149):_0x437700(0x141),'getPath':_0xf07aec[_0x437700(0x14a)]((0x0,_assertThisInitialized2['default'])(_0x2d29ee),0x31)}),_0x2d29ee[_0x437700(0x140)][_0x437700(0x14e)]({'type':_0x2d29ee[_0x437700(0x140)]['length']>0x0?'legacy':'normal','getPath':_0xf07aec['bind']((0x0,_assertThisInitialized2[_0x437700(0x12d)])(_0x2d29ee),0x2c)});}else _0x2d29ee[_0x437700(0x140)]['push']({'type':_0x437700(0x141),'getPath':_accountUtils[_0x437700(0x13f)][_0x437700(0x14a)]((0x0,_assertThisInitialized2['default'])(_0x2d29ee),_0x360854)});return _0x2d29ee;}var _0x18843a=_0xd831e2[_0x2c1ec8(0x155)];return _0x18843a[_0x2c1ec8(0x13e)]=(function(){var _0x596bda=_0x2c1ec8,_0x5cdb02=(0x0,_asyncToGenerator2['default'])(_regenerator[_0x596bda(0x12d)][_0x596bda(0x13d)](function _0xbd820b(_0x3c9384){var _0x51d6fe=_0x596bda,_0x8a275a=this,_0x4e3082,_0x3d9a70,_0x2189cf;return _regenerator[_0x51d6fe(0x12d)][_0x51d6fe(0x128)](function _0x548de1(_0x142aa8){var _0x1b3f2f=_0x51d6fe;while(0x1){switch(_0x142aa8[_0x1b3f2f(0x131)]=_0x142aa8[_0x1b3f2f(0x14b)]){case 0x0:_0x4e3082=0xa,this['interrupted']=![],_0x3d9a70=_regenerator[_0x1b3f2f(0x12d)][_0x1b3f2f(0x13d)](function _0x5a34f7(){var _0x5546fe=_0x1b3f2f,_0xf2a34e,_0x51faf1,_0x385287,_0x5c5a2a,_0xf50ac4,_0x5e44eb,_0x2a972e,_0xedc475;return _regenerator[_0x5546fe(0x12d)][_0x5546fe(0x128)](function _0x29c170(_0x365749){var _0x2d3698=_0x5546fe;while(0x1){switch(_0x365749[_0x2d3698(0x131)]=_0x365749[_0x2d3698(0x14b)]){case 0x0:_0xf2a34e=_0x8a275a[_0x2d3698(0x140)][_0x8a275a[_0x2d3698(0x129)]],_0x51faf1=_0x2d3698(0x12f)+(_0x8a275a[_0x2d3698(0x15d)]+0x1),_0x385287=_0x8a275a['index']>=_0x4e3082,_0x5c5a2a=_0xf2a34e[_0x2d3698(0x151)](_0x8a275a['index']),_0x365749['next']=0x6;return _0x8a275a['commands'][_0x2d3698(0x123)](_0x8a275a['coinInfo'],_0x5c5a2a);case 0x6:_0xf50ac4=_0x365749[_0x2d3698(0x142)];if(_0xf50ac4){_0x365749[_0x2d3698(0x14b)]=0x9;break;}throw _constants[_0x2d3698(0x15f)][_0x2d3698(0x157)](_0x2d3698(0x11f),'Discovery:\x20descriptor\x20not\x20found');case 0x9:if(!_0x8a275a[_0x2d3698(0x12c)]){_0x365749['next']=0xb;break;}return _0x365749[_0x2d3698(0x15c)](_0x2d3698(0x146),{'v':void 0x0});case 0xb:_0x5e44eb=_objectSpread(_objectSpread({},_0xf50ac4),{},{'type':_0xf2a34e['type'],'label':_0x51faf1}),_0x8a275a[_0x2d3698(0x11d)]=_0x8a275a[_0x2d3698(0x11d)][_0x2d3698(0x135)](function(_0x16a287){var _0x3e0e70=_0x2d3698;return _0x16a287[_0x3e0e70(0x14c)]!==_0x5e44eb[_0x3e0e70(0x14c)];});!_0x385287&&(_0x8a275a[_0x2d3698(0x11d)][_0x2d3698(0x14e)](_0x5e44eb),_0x8a275a[_0x2d3698(0x139)](_0x2d3698(0x153),_0x8a275a[_0x2d3698(0x11d)]));_0x365749[_0x2d3698(0x14b)]=0x10;return _0x8a275a[_0x2d3698(0x13b)][_0x2d3698(0x130)]({'descriptor':_0x5e44eb['descriptor'],'details':_0x3c9384});case 0x10:_0x2a972e=_0x365749[_0x2d3698(0x142)];if(!_0x8a275a['interrupted']){_0x365749[_0x2d3698(0x14b)]=0x13;break;}return _0x365749[_0x2d3698(0x15c)](_0x2d3698(0x146),{'v':void 0x0});case 0x13:_0x8a275a[_0x2d3698(0x11d)]=_0x8a275a[_0x2d3698(0x11d)][_0x2d3698(0x135)](function(_0x31a50f){var _0x5e48e3=_0x2d3698;return _0x31a50f[_0x5e48e3(0x14c)]!==_0x5e44eb[_0x5e48e3(0x14c)];});(!_0x385287||_0x385287&&!_0x2a972e[_0x2d3698(0x13c)])&&(_0xedc475=(0x0,_formatUtils['formatAmount'])(_0x2a972e[_0x2d3698(0x12b)],_0x8a275a['coinInfo']),_0x8a275a[_0x2d3698(0x11d)][_0x2d3698(0x14e)](_objectSpread(_objectSpread({},_0x5e44eb),{},{'empty':_0x2a972e['empty'],'balance':_0xedc475,'addresses':_0x2a972e[_0x2d3698(0x12a)]})),_0x8a275a[_0x2d3698(0x139)](_0x2d3698(0x153),_0x8a275a[_0x2d3698(0x11d)]));_0x2a972e[_0x2d3698(0x13c)]?_0x8a275a['typeIndex']+0x1<_0x8a275a['types'][_0x2d3698(0x122)]?(_0x8a275a[_0x2d3698(0x129)]++,_0x8a275a['index']=0x0):(_0x8a275a['emit'](_0x2d3698(0x11e)),_0x8a275a['completed']=!![]):_0x8a275a[_0x2d3698(0x15d)]++;case 0x16:case _0x2d3698(0x154):return _0x365749[_0x2d3698(0x159)]();}}},_0x5a34f7);});case 0x3:if(!(!this[_0x1b3f2f(0x156)]&&!this[_0x1b3f2f(0x12c)])){_0x142aa8[_0x1b3f2f(0x14b)]=0xa;break;}return _0x142aa8[_0x1b3f2f(0x120)](_0x3d9a70(),'t0',0x5);case 0x5:_0x2189cf=_0x142aa8['t0'];if(!(typeof _0x2189cf===_0x1b3f2f(0x125))){_0x142aa8[_0x1b3f2f(0x14b)]=0x8;break;}return _0x142aa8[_0x1b3f2f(0x15c)](_0x1b3f2f(0x146),_0x2189cf['v']);case 0x8:_0x142aa8[_0x1b3f2f(0x14b)]=0x3;break;case 0xa:case'end':return _0x142aa8['stop']();}}},_0xbd820b,this);}));function _0x308b99(_0x1eac4a){var _0x1f2e9f=_0x596bda;return _0x5cdb02[_0x1f2e9f(0x15e)](this,arguments);}return _0x308b99;}()),_0x18843a['stop']=function _0x483a4a(){var _0x5d0fd4=_0x2c1ec8;this[_0x5d0fd4(0x12c)]=!this[_0x5d0fd4(0x156)];},_0x18843a[_0x2c1ec8(0x126)]=function _0x4f2804(){this['accounts']=[];},_0xd831e2;}(_events[a93_0xdbcef2(0x12d)]);exports[a93_0xdbcef2(0x12d)]=Discovery;