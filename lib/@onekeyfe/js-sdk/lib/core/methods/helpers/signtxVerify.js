'use strict';var a106_0xc8e1a5=a106_0x1f20;function a106_0x2bf7(){var _0x5ea4e9=['ins','fromHex','PAYTOADDRESS','Transaction','encode','copy','wrap','output','1595pHdjsL','getIdentifier','TypedError','from','end','3371751yCXLNh','prev','network','length','crypto','getAddressHash','Runtime','fromBase58','script','78EeexXi','mark','alloc','109119gUAQrG','verifyTx:\x20Output\x20','3282045wuMnxx',',\x20signed:\x20','address','compare','nullData','PAYTOWITNESS','multisig','stop','\x20scripts\x20differ','PAYTOSCRIPTHASH','ERRORS','derive','op_return_data','getAddressScriptType','xpub','3159166vPyKfp','verifyTx:\x20Signed\x20transaction\x20outputs\x20invalid\x20length','sent','apply','slice','verifyTx:\x20Wrong\x20output\x20amount\x20at\x20output\x20','return','deriveOutputScript:\x20Neither\x20address\x20or\x20address_n\x20is\x20set','scriptHash','73494dkONgX','6021876bUWdBt','hash160','.\x20Requested:\x20','1NpWtlA','deriveBech32Output:\x20Unknown\x20size\x20for\x20witness\x20program\x20v0','HDNode','next','outs','84YAWTiG','378lSOcIe','getOutputScriptType','abrupt','default','deriveOutputScript:\x20Unknown\x20script\x20type\x20','address_n','value','8ZottSt','23310aFeHSS'];a106_0x2bf7=function(){return _0x5ea4e9;};return a106_0x2bf7();}function a106_0x1f20(_0x1fee38,_0x5ab08e){var _0x2bf713=a106_0x2bf7();return a106_0x1f20=function(_0x1f20c8,_0x78eee3){_0x1f20c8=_0x1f20c8-0xe2;var _0x3438cc=_0x2bf713[_0x1f20c8];return _0x3438cc;},a106_0x1f20(_0x1fee38,_0x5ab08e);}(function(_0x30105c,_0x142d3d){var _0x97338d=a106_0x1f20,_0x3b747a=_0x30105c();while(!![]){try{var _0x2c5de3=parseInt(_0x97338d(0x10f))/0x1*(-parseInt(_0x97338d(0x102))/0x2)+parseInt(_0x97338d(0xf1))/0x3*(parseInt(_0x97338d(0x114))/0x4)+-parseInt(_0x97338d(0xf3))/0x5+-parseInt(_0x97338d(0x10b))/0x6*(parseInt(_0x97338d(0x115))/0x7)+parseInt(_0x97338d(0x11c))/0x8*(parseInt(_0x97338d(0xe5))/0x9)+parseInt(_0x97338d(0x11d))/0xa*(-parseInt(_0x97338d(0x126))/0xb)+-parseInt(_0x97338d(0x10c))/0xc*(-parseInt(_0x97338d(0xee))/0xd);if(_0x2c5de3===_0x142d3d)break;else _0x3b747a['push'](_0x3b747a['shift']());}catch(_0x27bca7){_0x3b747a['push'](_0x3b747a['shift']());}}}(a106_0x2bf7,0xdf239));var _interopRequireDefault=require('@babel/runtime/helpers/interopRequireDefault');exports['__esModule']=!![],exports[a106_0xc8e1a5(0x118)]=void 0x0;var _regenerator=_interopRequireDefault(require('@babel/runtime/regenerator')),_asyncToGenerator2=_interopRequireDefault(require('@babel/runtime/helpers/asyncToGenerator')),_utxoLib=require('@trezor/utxo-lib'),_constants=require('../../../constants'),_addressUtils=require('../../../utils/addressUtils'),_pathUtils=require('../../../utils/pathUtils');_utxoLib[a106_0xc8e1a5(0x121)]['USE_STRING_VALUES']=!![];var derivePubKeyHash=(function(){var _0x1802f8=a106_0xc8e1a5,_0x23c22b=(0x0,_asyncToGenerator2['default'])(_regenerator[_0x1802f8(0x118)][_0x1802f8(0xef)](function _0x44e95a(_0x410155,_0x23241a,_0x408829){var _0x14cf21=_0x1802f8,_0x548abc,_0x42ed65,_0x1a4abf,_0x1e436a,_0x1df9ef;return _regenerator[_0x14cf21(0x118)]['wrap'](function _0x5c43ef(_0x1a5b2d){var _0x7c0735=_0x14cf21;while(0x1){switch(_0x1a5b2d[_0x7c0735(0xe6)]=_0x1a5b2d[_0x7c0735(0x112)]){case 0x0:if(!(_0x410155['length']===0x5)){_0x1a5b2d['next']=0x7;break;}_0x1a5b2d[_0x7c0735(0x112)]=0x3;return _0x23241a(_0x410155[_0x7c0735(0x106)](0x0,0x4),_0x408829);case 0x3:_0x548abc=_0x1a5b2d['sent'],_0x42ed65=_utxoLib[_0x7c0735(0x111)][_0x7c0735(0xec)](_0x548abc[_0x7c0735(0x101)],_0x408829[_0x7c0735(0xe7)],!![]),_0x1a4abf=_0x42ed65[_0x7c0735(0xfe)](_0x410155[_0x410155[_0x7c0735(0xe8)]-0x1]);return _0x1a5b2d[_0x7c0735(0x117)](_0x7c0735(0x108),_0x1a4abf[_0x7c0735(0x127)]());case 0x7:_0x1a5b2d['next']=0x9;return _0x23241a(_0x410155,_0x408829);case 0x9:_0x1e436a=_0x1a5b2d[_0x7c0735(0x104)],_0x1df9ef=_utxoLib[_0x7c0735(0x111)][_0x7c0735(0xec)](_0x1e436a[_0x7c0735(0x101)],_0x408829[_0x7c0735(0xe7)],!![]);return _0x1a5b2d['abrupt'](_0x7c0735(0x108),_0x1df9ef[_0x7c0735(0x127)]());case 0xc:case _0x7c0735(0xe4):return _0x1a5b2d[_0x7c0735(0xfa)]();}}},_0x44e95a);}));return function _0x28bb78(_0x27e9dc,_0x343a84,_0x4d9a6e){var _0x41593d=_0x1802f8;return _0x23c22b[_0x41593d(0x105)](this,arguments);};}()),deriveWitnessOutput=function deriveWitnessOutput(_0x598666){var _0x4ac2b1=a106_0xc8e1a5,_0x27b611=Buffer[_0x4ac2b1(0xf0)](_0x598666['length']+0x2);_0x27b611[0x0]=0x0,_0x27b611[0x1]=0x14,_0x598666[_0x4ac2b1(0x123)](_0x27b611,0x2);var _0x568377=_utxoLib[_0x4ac2b1(0xe9)][_0x4ac2b1(0x10d)](_0x27b611),_0x1086c1=Buffer['alloc'](0x17);return _0x1086c1[0x0]=0xa9,_0x1086c1[0x1]=0x14,_0x1086c1[0x16]=0x87,_0x568377['copy'](_0x1086c1,0x2),_0x1086c1;},deriveBech32Output=function deriveBech32Output(_0x1ca0f1){var _0x5639b5=a106_0xc8e1a5;if(_0x1ca0f1[_0x5639b5(0xe8)]!==0x20&&_0x1ca0f1[_0x5639b5(0xe8)]!==0x14)throw _constants[_0x5639b5(0xfd)][_0x5639b5(0xe2)](_0x5639b5(0xeb),_0x5639b5(0x110));var _0x149959=Buffer[_0x5639b5(0xf0)](_0x1ca0f1[_0x5639b5(0xe8)]+0x2);return _0x149959[0x0]=0x0,_0x149959[0x1]=_0x1ca0f1[_0x5639b5(0xe8)],_0x1ca0f1[_0x5639b5(0x123)](_0x149959,0x2),_0x149959;},deriveOutputScript=(function(){var _0x51e36a=a106_0xc8e1a5,_0x126777=(0x0,_asyncToGenerator2['default'])(_regenerator[_0x51e36a(0x118)][_0x51e36a(0xef)](function _0x54bf47(_0x1d7ba9,_0x32784a,_0x1f51af){var _0x164c25=_0x51e36a,_0x716b3,_0x2db3c6;return _regenerator['default'][_0x164c25(0x124)](function _0x31ee4b(_0x4417a3){var _0x1ea535=_0x164c25;while(0x1){switch(_0x4417a3[_0x1ea535(0xe6)]=_0x4417a3[_0x1ea535(0x112)]){case 0x0:if(!_0x32784a['op_return_data']){_0x4417a3['next']=0x2;break;}return _0x4417a3['abrupt'](_0x1ea535(0x108),_utxoLib[_0x1ea535(0xed)][_0x1ea535(0xf7)][_0x1ea535(0x125)][_0x1ea535(0x122)](Buffer[_0x1ea535(0xe3)](_0x32784a[_0x1ea535(0xff)],'hex')));case 0x2:if(!(!_0x32784a[_0x1ea535(0x11a)]&&!_0x32784a['address'])){_0x4417a3[_0x1ea535(0x112)]=0x4;break;}throw _constants[_0x1ea535(0xfd)][_0x1ea535(0xe2)](_0x1ea535(0xeb),_0x1ea535(0x109));case 0x4:if(!_0x32784a[_0x1ea535(0xf9)]){_0x4417a3[_0x1ea535(0x112)]=0x6;break;}return _0x4417a3[_0x1ea535(0x117)](_0x1ea535(0x108));case 0x6:_0x716b3=_0x32784a[_0x1ea535(0x11a)]?(0x0,_pathUtils[_0x1ea535(0x116)])(_0x32784a['address_n']):(0x0,_addressUtils[_0x1ea535(0x100)])(_0x32784a[_0x1ea535(0xf5)],_0x1f51af);if(!_0x32784a['address_n']){_0x4417a3[_0x1ea535(0x112)]=0xd;break;}_0x4417a3[_0x1ea535(0x112)]=0xa;return derivePubKeyHash(_0x32784a[_0x1ea535(0x11a)],_0x1d7ba9,_0x1f51af);case 0xa:_0x4417a3['t0']=_0x4417a3['sent'],_0x4417a3[_0x1ea535(0x112)]=0xe;break;case 0xd:_0x4417a3['t0']=(0x0,_addressUtils[_0x1ea535(0xea)])(_0x32784a[_0x1ea535(0xf5)]);case 0xe:_0x2db3c6=_0x4417a3['t0'];if(!(_0x716b3===_0x1ea535(0x120))){_0x4417a3['next']=0x11;break;}return _0x4417a3[_0x1ea535(0x117)]('return',_utxoLib[_0x1ea535(0xed)]['pubKeyHash']['output'][_0x1ea535(0x122)](_0x2db3c6));case 0x11:if(!(_0x716b3===_0x1ea535(0xfc))){_0x4417a3[_0x1ea535(0x112)]=0x13;break;}return _0x4417a3['abrupt'](_0x1ea535(0x108),_utxoLib[_0x1ea535(0xed)][_0x1ea535(0x10a)][_0x1ea535(0x125)][_0x1ea535(0x122)](_0x2db3c6));case 0x13:if(!(_0x716b3==='PAYTOP2SHWITNESS')){_0x4417a3[_0x1ea535(0x112)]=0x15;break;}return _0x4417a3['abrupt']('return',deriveWitnessOutput(_0x2db3c6));case 0x15:if(!(_0x716b3===_0x1ea535(0xf8))){_0x4417a3[_0x1ea535(0x112)]=0x17;break;}return _0x4417a3['abrupt'](_0x1ea535(0x108),deriveBech32Output(_0x2db3c6));case 0x17:throw _constants['ERRORS'][_0x1ea535(0xe2)]('Runtime',_0x1ea535(0x119)+_0x716b3);case 0x18:case'end':return _0x4417a3['stop']();}}},_0x54bf47);}));return function _0x1c5111(_0x541232,_0x3f1875,_0x28b2bb){var _0x2efd2d=_0x51e36a;return _0x126777[_0x2efd2d(0x105)](this,arguments);};}()),_default=(function(){var _0x18be3b=a106_0xc8e1a5,_0x14dc5c=(0x0,_asyncToGenerator2[_0x18be3b(0x118)])(_regenerator[_0x18be3b(0x118)][_0x18be3b(0xef)](function _0x48ffc2(_0x41ebd6,_0xbc5680,_0x3ef7c3,_0x24a1f0,_0x5a2314){var _0x124b15,_0x4d18b9,_0x101d8e,_0x554ff1,_0x2e80f5;return _regenerator['default']['wrap'](function _0x7499a3(_0x21b652){var _0x1de6e4=a106_0x1f20;while(0x1){switch(_0x21b652[_0x1de6e4(0xe6)]=_0x21b652['next']){case 0x0:_0x124b15=_utxoLib[_0x1de6e4(0x121)][_0x1de6e4(0x11f)](_0x24a1f0,_0x5a2314[_0x1de6e4(0xe7)]);if(!(_0xbc5680['length']!==_0x124b15[_0x1de6e4(0x11e)]['length'])){_0x21b652[_0x1de6e4(0x112)]=0x3;break;}throw _constants['ERRORS'][_0x1de6e4(0xe2)](_0x1de6e4(0xeb),'verifyTx:\x20Signed\x20transaction\x20inputs\x20invalid\x20length');case 0x3:if(!(_0x3ef7c3[_0x1de6e4(0xe8)]!==_0x124b15['outs'][_0x1de6e4(0xe8)])){_0x21b652[_0x1de6e4(0x112)]=0x5;break;}throw _constants[_0x1de6e4(0xfd)][_0x1de6e4(0xe2)](_0x1de6e4(0xeb),_0x1de6e4(0x103));case 0x5:_0x4d18b9=0x0;case 0x6:if(!(_0x4d18b9<_0x3ef7c3[_0x1de6e4(0xe8)])){_0x21b652[_0x1de6e4(0x112)]=0x14;break;}_0x101d8e=_0x124b15['outs'][_0x4d18b9][_0x1de6e4(0xed)];if(!_0x3ef7c3[_0x4d18b9]['amount']){_0x21b652[_0x1de6e4(0x112)]=0xc;break;}_0x554ff1=_0x3ef7c3[_0x4d18b9]['amount'];if(!(_0x554ff1!==_0x124b15[_0x1de6e4(0x113)][_0x4d18b9][_0x1de6e4(0x11b)])){_0x21b652['next']=0xc;break;}throw _constants['ERRORS'][_0x1de6e4(0xe2)](_0x1de6e4(0xeb),_0x1de6e4(0x107)+_0x4d18b9+_0x1de6e4(0x10e)+_0x554ff1+_0x1de6e4(0xf4)+_0x124b15[_0x1de6e4(0x113)][_0x4d18b9][_0x1de6e4(0x11b)]);case 0xc:_0x21b652['next']=0xe;return deriveOutputScript(_0x41ebd6,_0x3ef7c3[_0x4d18b9],_0x5a2314);case 0xe:_0x2e80f5=_0x21b652[_0x1de6e4(0x104)];if(!(_0x2e80f5&&_0x2e80f5[_0x1de6e4(0xf6)](_0x101d8e)!==0x0)){_0x21b652['next']=0x11;break;}throw _constants[_0x1de6e4(0xfd)]['TypedError'](_0x1de6e4(0xeb),_0x1de6e4(0xf2)+_0x4d18b9+_0x1de6e4(0xfb));case 0x11:_0x4d18b9++,_0x21b652[_0x1de6e4(0x112)]=0x6;break;case 0x14:case'end':return _0x21b652[_0x1de6e4(0xfa)]();}}},_0x48ffc2);}));return function(_0x3af321,_0x2ee502,_0x5cac9e,_0x3d6e08,_0x134d22){var _0x5349c0=_0x18be3b;return _0x14dc5c[_0x5349c0(0x105)](this,arguments);};}());exports[a106_0xc8e1a5(0x118)]=_default;