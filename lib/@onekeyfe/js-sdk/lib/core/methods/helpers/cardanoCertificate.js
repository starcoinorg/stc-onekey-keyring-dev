'use strict';function a96_0x2ed1(){var _0x436477=['path','POOL_RELAY_TYPE','metadata','cost','number','MultipleHostName','2eDlNjZ','166222vNULRn','Exactly\x20one\x20pool\x20owner\x20must\x20be\x20given\x20as\x20a\x20path','poolParameters','SingleHostName','validateParams','object','port','validatePath','map','7637399KlzPdn','1233630fAKZOr','length','url','string','transformCertificate','forEach','8wlVwnJ','stakingKeyHash','array','113692zqrTCC','TypedError','7777qJFtLR','9ofLQYj','4383864tSvXJd','pool','ipv4Address','margin','from','1398hBCtEC','type','StakePoolRegistration','relays','stakingKeyPath','push','toString','filter','rewardAccount','ipv6Address','join','hostName','numerator','owners','hex','StakeDelegation','SingleHostIp','poolId','denominator','split','ERRORS','vrfKeyHash','Method_InvalidParameter','1311810MDrSys','pledge','__esModule','CERTIFICATE_TYPE'];a96_0x2ed1=function(){return _0x436477;};return a96_0x2ed1();}var a96_0x3b79b9=a96_0x5333;(function(_0x5c17b5,_0x5a501b){var _0x34cdf3=a96_0x5333,_0x5b0899=_0x5c17b5();while(!![]){try{var _0x25df39=-parseInt(_0x34cdf3(0x10e))/0x1*(parseInt(_0x34cdf3(0x10f))/0x2)+parseInt(_0x34cdf3(0x125))/0x3*(parseInt(_0x34cdf3(0x122))/0x4)+-parseInt(_0x34cdf3(0x142))/0x5+parseInt(_0x34cdf3(0x12b))/0x6*(parseInt(_0x34cdf3(0x124))/0x7)+-parseInt(_0x34cdf3(0x11f))/0x8*(parseInt(_0x34cdf3(0x126))/0x9)+parseInt(_0x34cdf3(0x119))/0xa+parseInt(_0x34cdf3(0x118))/0xb;if(_0x25df39===_0x5a501b)break;else _0x5b0899['push'](_0x5b0899['shift']());}catch(_0x5391ae){_0x5b0899['push'](_0x5b0899['shift']());}}}(a96_0x2ed1,0x3c16c));function a96_0x5333(_0x1fc55a,_0x5ce21f){var _0x2ed196=a96_0x2ed1();return a96_0x5333=function(_0x53337e,_0xe616b1){_0x53337e=_0x53337e-0x107;var _0x2ff0b8=_0x2ed196[_0x53337e];return _0x2ff0b8;},a96_0x5333(_0x1fc55a,_0x5ce21f);}exports[a96_0x3b79b9(0x144)]=!![],exports['transformCertificate']=void 0x0;var _paramsValidator=require('./paramsValidator'),_cardano=require('../../../constants/cardano'),_pathUtils=require('../../../utils/pathUtils'),_constants=require('../../../constants'),ipv4AddressToHex=function ipv4AddressToHex(_0x51ff22){var _0x34687b=a96_0x3b79b9;return Buffer[_0x34687b(0x12a)](_0x51ff22['split']('.')[_0x34687b(0x117)](function(_0x299b80){return parseInt(_0x299b80);}))[_0x34687b(0x131)](_0x34687b(0x139));},ipv6AddressToHex=function ipv6AddressToHex(_0xfd2abf){var _0x13e1d4=a96_0x3b79b9;return _0xfd2abf[_0x13e1d4(0x13e)](':')[_0x13e1d4(0x135)]('');},validatePoolMargin=function validatePoolMargin(_0x37815e){var _0x2d5adf=a96_0x3b79b9;(0x0,_paramsValidator[_0x2d5adf(0x113)])(_0x37815e,[{'name':_0x2d5adf(0x137),'type':'string','obligatory':!![]},{'name':_0x2d5adf(0x13d),'type':_0x2d5adf(0x11c),'obligatory':!![]}]);},validatePoolMetadata=function validatePoolMetadata(_0x15bdaf){var _0x92e377=a96_0x3b79b9;(0x0,_paramsValidator[_0x92e377(0x113)])(_0x15bdaf,[{'name':_0x92e377(0x11b),'type':_0x92e377(0x11c),'obligatory':!![]},{'name':'hash','type':_0x92e377(0x11c),'obligatory':!![]}]);},validatePoolRelay=function validatePoolRelay(_0x4a25f9){var _0x2e9986=a96_0x3b79b9;(0x0,_paramsValidator[_0x2e9986(0x113)])(_0x4a25f9,[{'name':_0x2e9986(0x12c),'type':'number','obligatory':!![]}]);if(_0x4a25f9[_0x2e9986(0x12c)]===_cardano['POOL_RELAY_TYPE'][_0x2e9986(0x13b)]){var _0x2fcb6f=[{'name':_0x2e9986(0x115),'type':'number','obligatory':!![]}];_0x4a25f9[_0x2e9986(0x128)]&&_0x2fcb6f[_0x2e9986(0x130)]({'name':'ipv4Address','type':_0x2e9986(0x11c)});_0x4a25f9[_0x2e9986(0x134)]&&_0x2fcb6f[_0x2e9986(0x130)]({'name':'ipv6Address','type':_0x2e9986(0x11c)});(0x0,_paramsValidator['validateParams'])(_0x4a25f9,_0x2fcb6f);if(!_0x4a25f9[_0x2e9986(0x128)]&&!_0x4a25f9['ipv6Address'])throw _constants['ERRORS'][_0x2e9986(0x123)](_0x2e9986(0x141),'Either\x20ipv4Address\x20or\x20ipv6Address\x20must\x20be\x20supplied');}else{if(_0x4a25f9['type']===_cardano[_0x2e9986(0x109)][_0x2e9986(0x112)])(0x0,_paramsValidator[_0x2e9986(0x113)])(_0x4a25f9,[{'name':_0x2e9986(0x136),'type':_0x2e9986(0x11c),'obligatory':!![]},{'name':'port','type':_0x2e9986(0x10c),'obligatory':!![]}]);else _cardano[_0x2e9986(0x109)][_0x2e9986(0x10d)]&&(0x0,_paramsValidator[_0x2e9986(0x113)])(_0x4a25f9,[{'name':'hostName','type':_0x2e9986(0x11c),'obligatory':!![]}]);}},validatePoolOwners=function validatePoolOwners(_0x55b334){var _0x807444=a96_0x3b79b9;_0x55b334[_0x807444(0x11e)](function(_0x2007e7){var _0x526454=_0x807444;_0x2007e7[_0x526454(0x120)]&&(0x0,_paramsValidator['validateParams'])(_0x2007e7,[{'name':_0x526454(0x120),'type':'string','obligatory':!_0x2007e7[_0x526454(0x12f)]}]);_0x2007e7[_0x526454(0x12f)]&&(0x0,_pathUtils[_0x526454(0x116)])(_0x2007e7['stakingKeyPath'],0x5);if(!_0x2007e7[_0x526454(0x120)]&&!_0x2007e7[_0x526454(0x12f)])throw _constants[_0x526454(0x13f)][_0x526454(0x123)](_0x526454(0x141),'Either\x20stakingKeyHash\x20or\x20stakingKeyPath\x20must\x20be\x20supplied');});var _0x552d8c=_0x55b334[_0x807444(0x132)](function(_0xc46a7d){var _0x20b27a=_0x807444;return!!_0xc46a7d[_0x20b27a(0x12f)];})[_0x807444(0x11a)];if(_0x552d8c!==0x1)throw _constants[_0x807444(0x13f)][_0x807444(0x123)](_0x807444(0x141),_0x807444(0x110));},validatePoolParameters=function validatePoolParameters(_0x51ae00){var _0xd0fc66=a96_0x3b79b9;(0x0,_paramsValidator[_0xd0fc66(0x113)])(_0x51ae00,[{'name':_0xd0fc66(0x13c),'type':_0xd0fc66(0x11c),'obligatory':!![]},{'name':'vrfKeyHash','type':'string','obligatory':!![]},{'name':_0xd0fc66(0x143),'type':_0xd0fc66(0x11c),'obligatory':!![]},{'name':_0xd0fc66(0x10b),'type':'string','obligatory':!![]},{'name':_0xd0fc66(0x129),'type':_0xd0fc66(0x114),'obligatory':!![]},{'name':_0xd0fc66(0x133),'type':_0xd0fc66(0x11c),'obligatory':!![]},{'name':_0xd0fc66(0x138),'type':_0xd0fc66(0x121),'obligatory':!![]},{'name':'relays','type':_0xd0fc66(0x121),'obligatory':!![],'allowEmpty':!![]},{'name':_0xd0fc66(0x10a),'type':_0xd0fc66(0x114)}]),validatePoolMargin(_0x51ae00[_0xd0fc66(0x129)]),validatePoolOwners(_0x51ae00[_0xd0fc66(0x138)]),_0x51ae00[_0xd0fc66(0x12e)][_0xd0fc66(0x11e)](validatePoolRelay),_0x51ae00[_0xd0fc66(0x10a)]&&validatePoolMetadata(_0x51ae00[_0xd0fc66(0x10a)]);},transformPoolParameters=function transformPoolParameters(_0x335514){var _0x1351c2=a96_0x3b79b9;return validatePoolParameters(_0x335514),{'pool_id':_0x335514[_0x1351c2(0x13c)],'vrf_key_hash':_0x335514[_0x1351c2(0x140)],'pledge':_0x335514['pledge'],'cost':_0x335514[_0x1351c2(0x10b)],'margin_numerator':_0x335514[_0x1351c2(0x129)][_0x1351c2(0x137)],'margin_denominator':_0x335514[_0x1351c2(0x129)][_0x1351c2(0x13d)],'reward_account':_0x335514['rewardAccount'],'owners':_0x335514[_0x1351c2(0x138)][_0x1351c2(0x117)](function(_0x4c4f39){var _0x47f15d=_0x1351c2;return{'staking_key_hash':_0x4c4f39[_0x47f15d(0x120)],'staking_key_path':_0x4c4f39['stakingKeyPath']?(0x0,_pathUtils[_0x47f15d(0x116)])(_0x4c4f39['stakingKeyPath'],0x5):undefined};}),'relays':_0x335514[_0x1351c2(0x12e)]['map'](function(_0x559345){var _0x13764b=_0x1351c2;return{'type':_0x559345['type'],'ipv4_address':_0x559345[_0x13764b(0x128)]?ipv4AddressToHex(_0x559345['ipv4Address']):undefined,'ipv6_address':_0x559345[_0x13764b(0x134)]?ipv6AddressToHex(_0x559345['ipv6Address']):undefined,'host_name':_0x559345[_0x13764b(0x136)],'port':_0x559345[_0x13764b(0x115)]};}),'metadata':_0x335514[_0x1351c2(0x10a)]};},transformCertificate=function transformCertificate(_0xed6ee8){var _0x4f310e=a96_0x3b79b9,_0x146d8c=[{'name':'type','type':_0x4f310e(0x10c),'obligatory':!![]}];return _0xed6ee8[_0x4f310e(0x12c)]!==_cardano[_0x4f310e(0x107)][_0x4f310e(0x12d)]&&_0x146d8c['push']({'name':_0x4f310e(0x108),'obligatory':!![]}),_0xed6ee8['type']===_cardano[_0x4f310e(0x107)][_0x4f310e(0x13a)]&&_0x146d8c[_0x4f310e(0x130)]({'name':_0x4f310e(0x127),'type':_0x4f310e(0x11c),'obligatory':!![]}),_0xed6ee8['type']===_cardano[_0x4f310e(0x107)]['StakePoolRegistration']&&_0x146d8c[_0x4f310e(0x130)]({'name':'poolParameters','type':_0x4f310e(0x114),'obligatory':!![]}),(0x0,_paramsValidator[_0x4f310e(0x113)])(_0xed6ee8,_0x146d8c),{'type':_0xed6ee8['type'],'path':_0xed6ee8[_0x4f310e(0x108)]?(0x0,_pathUtils[_0x4f310e(0x116)])(_0xed6ee8[_0x4f310e(0x108)],0x5):undefined,'pool':_0xed6ee8[_0x4f310e(0x127)],'pool_parameters':_0xed6ee8[_0x4f310e(0x111)]?transformPoolParameters(_0xed6ee8[_0x4f310e(0x111)]):undefined};};exports[a96_0x3b79b9(0x11d)]=transformCertificate;