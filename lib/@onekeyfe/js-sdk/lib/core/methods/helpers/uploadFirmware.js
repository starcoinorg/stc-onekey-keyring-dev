'use strict';var a109_0x3b5579=a109_0x1a10;(function(_0x3f0556,_0x48f122){var _0x5486f7=a109_0x1a10,_0x553609=_0x3f0556();while(!![]){try{var _0x12f986=-parseInt(_0x5486f7(0xba))/0x1*(-parseInt(_0x5486f7(0x9c))/0x2)+parseInt(_0x5486f7(0xae))/0x3*(-parseInt(_0x5486f7(0x98))/0x4)+-parseInt(_0x5486f7(0x96))/0x5+parseInt(_0x5486f7(0x94))/0x6*(parseInt(_0x5486f7(0x93))/0x7)+parseInt(_0x5486f7(0x91))/0x8*(-parseInt(_0x5486f7(0x9d))/0x9)+parseInt(_0x5486f7(0xb2))/0xa+parseInt(_0x5486f7(0xa4))/0xb*(-parseInt(_0x5486f7(0x99))/0xc);if(_0x12f986===_0x48f122)break;else _0x553609['push'](_0x553609['shift']());}catch(_0x2f4027){_0x553609['push'](_0x553609['shift']());}}}(a109_0x17a5,0x5f5fb));function a109_0x1a10(_0x2c93f4,_0x30c08a){var _0x17a5da=a109_0x17a5();return a109_0x1a10=function(_0x1a1039,_0x5ece5c){_0x1a1039=_0x1a1039-0x8d;var _0x4056bb=_0x17a5da[_0x1a1039];return _0x4056bb;},a109_0x1a10(_0x2c93f4,_0x30c08a);}var _interopRequireDefault=require('@babel/runtime/helpers/interopRequireDefault');exports['__esModule']=!![],exports['uploadFirmware']=void 0x0;function a109_0x17a5(){var _0x31f77e=['stop','FirmwareErase','FirmwareUpload','$BLE_MODE','18ogUdni','apply','type','prev','7652930GnLMxI','offset','prototype','__esModule','FirmwareErase_ex','UiMessage','sent','call','614mFKWDa','emit','function','get','FirmwareRequest','Success','message','object','ButtonRequest_FirmwareUpdate','payload','end','return','features','16EiGFKN','BUTTON','7wfEDMh','4513590HZvbGR','wrap','941575AhKrXm','next','155816zpDeLX','76764flLqmL','FirmwareRequest|Success','default','1538xhymOZ','748386nkxnov','set','uploadFirmware','hasOwnProperty','toMessageObject','getOwnPropertyDescriptor','round','1738Pozmyo','major_version','defineProperty','abrupt','firmware_present','length'];a109_0x17a5=function(){return _0x31f77e;};return a109_0x17a5();}var _regenerator=_interopRequireDefault(require('@babel/runtime/regenerator')),_asyncToGenerator2=_interopRequireDefault(require('@babel/runtime/helpers/asyncToGenerator')),_builder=require('../../../message/builder'),_Device=_interopRequireDefault(require('../../../device/Device')),UI=_interopRequireWildcard(require('../../../constants/ui')),DEVICE=_interopRequireWildcard(require('../../../constants/device'));function _getRequireWildcardCache(_0x1d8731){var _0x531692=a109_0x1a10;if(typeof WeakMap!==_0x531692(0xbc))return null;var _0x56bc99=new WeakMap(),_0x2c480d=new WeakMap();return(_getRequireWildcardCache=function _0x3d979d(_0x5dff4c){return _0x5dff4c?_0x2c480d:_0x56bc99;})(_0x1d8731);}function _interopRequireWildcard(_0x29f214,_0x405543){var _0x23d54c=a109_0x1a10;if(!_0x405543&&_0x29f214&&_0x29f214[_0x23d54c(0xb5)])return _0x29f214;if(_0x29f214===null||typeof _0x29f214!==_0x23d54c(0xc1)&&typeof _0x29f214!==_0x23d54c(0xbc))return{'default':_0x29f214};var _0x56ac45=_getRequireWildcardCache(_0x405543);if(_0x56ac45&&_0x56ac45['has'](_0x29f214))return _0x56ac45[_0x23d54c(0xbd)](_0x29f214);var _0x15e9fe={},_0x3dd23=Object[_0x23d54c(0xa6)]&&Object[_0x23d54c(0xa2)];for(var _0xd7a16b in _0x29f214){if(_0xd7a16b!=='default'&&Object[_0x23d54c(0xb4)][_0x23d54c(0xa0)][_0x23d54c(0xb9)](_0x29f214,_0xd7a16b)){var _0x26da72=_0x3dd23?Object['getOwnPropertyDescriptor'](_0x29f214,_0xd7a16b):null;_0x26da72&&(_0x26da72[_0x23d54c(0xbd)]||_0x26da72[_0x23d54c(0x9e)])?Object[_0x23d54c(0xa6)](_0x15e9fe,_0xd7a16b,_0x26da72):_0x15e9fe[_0xd7a16b]=_0x29f214[_0xd7a16b];}}return _0x15e9fe['default']=_0x29f214,_0x56ac45&&_0x56ac45[_0x23d54c(0x9e)](_0x29f214,_0x15e9fe),_0x15e9fe;}var postConfirmationMessage=function postConfirmationMessage(_0x4319f0){var _0xa7384a=a109_0x1a10;_0x4319f0[_0xa7384a(0x90)][_0xa7384a(0xa8)]&&_0x4319f0[_0xa7384a(0xbb)](DEVICE[_0xa7384a(0x92)],_0x4319f0,_0xa7384a(0xc2));},postProgressMessage=function postProgressMessage(_0x50e3a2,_0x269f86,_0x35cb90){var _0x341805=a109_0x1a10;_0x35cb90((0x0,_builder[_0x341805(0xb7)])(UI['FIRMWARE_PROGRESS'],{'device':_0x50e3a2[_0x341805(0xa1)](),'progress':_0x269f86}));},uploadFirmware=(function(){var _0x499a2a=a109_0x1a10,_0x39cc72=(0x0,_asyncToGenerator2[_0x499a2a(0x9b)])(_regenerator['default']['mark'](function _0x4f006a(_0x4f7ff0,_0x49cb54,_0x989128,_0x7e88d){var _0x96e860=_0x499a2a,_0x3f22ce,_0x438a0b,_0xc3168d,_0x293d98,_0x2e6294,_0x348938,_0xafe355,_0x1a1815,_0x3199f2,_0x20015a;return _regenerator[_0x96e860(0x9b)][_0x96e860(0x95)](function _0x2641f6(_0x472db4){var _0x30a60b=_0x96e860;while(0x1){switch(_0x472db4[_0x30a60b(0xb1)]=_0x472db4[_0x30a60b(0x97)]){case 0x0:_0x3f22ce=_0x7e88d[_0x30a60b(0x8d)],_0x438a0b={};if(!(_0x989128[_0x30a60b(0x90)][_0x30a60b(0xa5)]===0x1)){_0x472db4[_0x30a60b(0x97)]=0xf;break;}postConfirmationMessage(_0x989128),_0xc3168d=!!window[_0x30a60b(0xad)],_0x293d98=_0xc3168d?_0x30a60b(0xb6):_0x30a60b(0xab),_0x472db4['next']=0x8;return _0x4f7ff0(_0x293d98,_0x30a60b(0xbf),{});case 0x8:postProgressMessage(_0x989128,0x0,_0x49cb54),_0x472db4[_0x30a60b(0x97)]=0xb;return _0x4f7ff0(_0x30a60b(0xac),'Success',{'payload':_0x3f22ce});case 0xb:_0x2e6294=_0x472db4['sent'],_0x348938=_0x2e6294[_0x30a60b(0xc0)],postProgressMessage(_0x989128,0x64,_0x49cb54);return _0x472db4[_0x30a60b(0xa7)](_0x30a60b(0x8f),_0x348938);case 0xf:if(!(_0x989128[_0x30a60b(0x90)][_0x30a60b(0xa5)]===0x2)){_0x472db4[_0x30a60b(0x97)]=0x21;break;}postConfirmationMessage(_0x989128),_0xafe355=_0x3f22ce['byteLength'],_0x472db4[_0x30a60b(0x97)]=0x14;return _0x4f7ff0(_0x30a60b(0xab),_0x30a60b(0xbe),{'length':_0xafe355});case 0x14:_0x438a0b=_0x472db4['sent'];case 0x15:if(!(_0x438a0b[_0x30a60b(0xb0)]!==_0x30a60b(0xbf))){_0x472db4[_0x30a60b(0x97)]=0x1f;break;}_0x1a1815=_0x438a0b[_0x30a60b(0xc0)][_0x30a60b(0xb3)],_0x3199f2=_0x438a0b[_0x30a60b(0xc0)][_0x30a60b(0xb3)]+_0x438a0b['message'][_0x30a60b(0xa9)],_0x20015a=_0x3f22ce['slice'](_0x1a1815,_0x3199f2);_0x1a1815>0x0&&postProgressMessage(_0x989128,Math[_0x30a60b(0xa3)](_0x1a1815/_0xafe355*0x64),_0x49cb54);_0x472db4[_0x30a60b(0x97)]=0x1c;return _0x4f7ff0(_0x30a60b(0xac),_0x30a60b(0x9a),{'payload':_0x20015a});case 0x1c:_0x438a0b=_0x472db4[_0x30a60b(0xb8)],_0x472db4[_0x30a60b(0x97)]=0x15;break;case 0x1f:postProgressMessage(_0x989128,0x64,_0x49cb54);return _0x472db4['abrupt'](_0x30a60b(0x8f),_0x438a0b['message']);case 0x21:case _0x30a60b(0x8e):return _0x472db4[_0x30a60b(0xaa)]();}}},_0x4f006a);}));return function _0xb417f2(_0x31a640,_0x23c5d7,_0x46c40d,_0x3e04e2){var _0x47c774=_0x499a2a;return _0x39cc72[_0x47c774(0xaf)](this,arguments);};}());exports[a109_0x3b5579(0x9f)]=uploadFirmware;