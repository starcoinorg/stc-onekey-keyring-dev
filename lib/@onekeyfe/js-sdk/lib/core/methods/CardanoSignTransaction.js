'use strict';var a22_0x941640=a22_0x2961;function a22_0x2961(_0x30d187,_0x122f6e){var _0x30d6d9=a22_0x30d6();return a22_0x2961=function(_0x29611e,_0x1a074c){_0x29611e=_0x29611e-0xbd;var _0x3dad12=_0x30d6d9[_0x29611e];return _0x3dad12;},a22_0x2961(_0x30d187,_0x122f6e);}(function(_0x5cedff,_0x4598ed){var _0x505358=a22_0x2961,_0x45d777=_0x5cedff();while(!![]){try{var _0x40ae26=parseInt(_0x505358(0xc2))/0x1+parseInt(_0x505358(0xee))/0x2+-parseInt(_0x505358(0xef))/0x3*(parseInt(_0x505358(0xd6))/0x4)+-parseInt(_0x505358(0xe8))/0x5+-parseInt(_0x505358(0xfd))/0x6+parseInt(_0x505358(0x105))/0x7+parseInt(_0x505358(0xeb))/0x8;if(_0x40ae26===_0x4598ed)break;else _0x45d777['push'](_0x45d777['shift']());}catch(_0x49d4c6){_0x45d777['push'](_0x45d777['shift']());}}}(a22_0x30d6,0x1ba97));var _interopRequireDefault=require('@babel/runtime/helpers/interopRequireDefault');exports[a22_0x941640(0xf6)]=!![],exports[a22_0x941640(0xc1)]=void 0x0;function a22_0x30d6(){var _0x208fa7=['ValidityIntervalStart','end','2.3.5','default','67169nPrItr','\x20not\x20supported\x20by\x20device\x20firmware','stop','payload','Feature\x20','getMiscNetwork','certificates','prev_hash','prototype','Cardano','SignStakePoolRegistrationAsOwner','validateTokenBundle','token_bundle','StakePoolRegistration','tokenBundleToProto','requiredPermissions','tokenBundle','validityIntervalStart','array','next','4ZvnXEN','string','serialized_tx','type','return','validateParams','TypedError','withdrawals','address','map','validateAddressParameters','metadata','tx_hash','addressParametersToProto','atLeast','number','run','networkId','340815oDJkSi','_ensureFirmwareSupportsParams','protocolMagic','319176nnacfG','fee','outputs','331926HCECAP','131667hmUXzs','ERRORS','validatePath','prev_index','abrupt','length','transformCertificate','__esModule','path','sent','_ensureFeatureIsSupported','call','ttl','info','848322qcgEal','inputs','wrap','device','params','amount','read','firmwareRange','655991rhOCPV','address_parameters','addressParameters','freeze','apply'];a22_0x30d6=function(){return _0x208fa7;};return a22_0x30d6();}var _regenerator=_interopRequireDefault(require('@babel/runtime/regenerator')),_asyncToGenerator2=_interopRequireDefault(require('@babel/runtime/helpers/asyncToGenerator')),_inheritsLoose2=_interopRequireDefault(require('@babel/runtime/helpers/inheritsLoose')),_AbstractMethod2=_interopRequireDefault(require('./AbstractMethod')),_paramsValidator=require('./helpers/paramsValidator'),_CoinInfo=require('../../data/CoinInfo'),_pathUtils=require('../../utils/pathUtils'),_cardanoAddressParameters=require('./helpers/cardanoAddressParameters'),_cardanoCertificate=require('./helpers/cardanoCertificate'),_cardanoTokens=require('./helpers/cardanoTokens'),_constants=require('../../constants'),_cardano=require('../../constants/cardano'),CardanoSignTransactionFeatures=Object[a22_0x941640(0x108)]({'SignStakePoolRegistrationAsOwner':['0','2.3.5'],'ValidityIntervalStart':['0',a22_0x941640(0xc0)],'MultiassetOutputs':['0',a22_0x941640(0xc0)]}),CardanoSignTransaction=function(_0x54e759){var _0xd81ec2=a22_0x941640;(0x0,_inheritsLoose2[_0xd81ec2(0xc1)])(_0x80eea,_0x54e759);function _0x80eea(_0x2f3966){var _0x520afa=_0xd81ec2,_0xd59ed8;_0xd59ed8=_0x54e759[_0x520afa(0xfa)](this,_0x2f3966)||this,_0xd59ed8[_0x520afa(0xd1)]=[_0x520afa(0x103),'write'],_0xd59ed8[_0x520afa(0x104)]=(0x0,_paramsValidator['getFirmwareRange'])(_0xd59ed8['name'],(0x0,_CoinInfo[_0x520afa(0xc7)])(_0x520afa(0xcb)),_0xd59ed8[_0x520afa(0x104)]),_0xd59ed8[_0x520afa(0xfc)]='Sign\x20Cardano\x20transaction';var _0x2bc3d9=_0x2f3966[_0x520afa(0xc5)];(0x0,_paramsValidator[_0x520afa(0xdb)])(_0x2bc3d9,[{'name':_0x520afa(0xfe),'type':_0x520afa(0xd4),'obligatory':!![]},{'name':'outputs','type':_0x520afa(0xd4),'obligatory':!![],'allowEmpty':!![]},{'name':'fee','type':_0x520afa(0x102),'obligatory':!![]},{'name':_0x520afa(0xfb),'type':_0x520afa(0x102)},{'name':_0x520afa(0xc8),'type':_0x520afa(0xd4),'allowEmpty':!![]},{'name':'withdrawals','type':'array','allowEmpty':!![]},{'name':_0x520afa(0xe1),'type':_0x520afa(0xd7)},{'name':_0x520afa(0xd3),'type':_0x520afa(0x102)},{'name':_0x520afa(0xea),'type':_0x520afa(0xe5),'obligatory':!![]},{'name':'networkId','type':_0x520afa(0xe5),'obligatory':!![]}]);var _0x4724ce=_0x2bc3d9[_0x520afa(0xfe)][_0x520afa(0xdf)](function(_0x95983b){var _0x1b42f3=_0x520afa;return(0x0,_paramsValidator[_0x1b42f3(0xdb)])(_0x95983b,[{'name':_0x1b42f3(0xc9),'type':'string','obligatory':!![]},{'name':_0x1b42f3(0xf2),'type':_0x1b42f3(0xe5),'obligatory':!![]}]),{'address_n':_0x95983b[_0x1b42f3(0xf7)]?(0x0,_pathUtils[_0x1b42f3(0xf1)])(_0x95983b['path'],0x5):undefined,'prev_hash':_0x95983b[_0x1b42f3(0xc9)],'prev_index':_0x95983b[_0x1b42f3(0xf2)],'type':_0x95983b[_0x1b42f3(0xd9)]};}),_0xf9f033=_0x2bc3d9[_0x520afa(0xed)][_0x520afa(0xdf)](function(_0x155d23){var _0x135d4c=_0x520afa;(0x0,_paramsValidator[_0x135d4c(0xdb)])(_0x155d23,[{'name':_0x135d4c(0xde),'type':_0x135d4c(0xd7)},{'name':_0x135d4c(0x102),'type':_0x135d4c(0x102),'obligatory':!![]},{'name':_0x135d4c(0xd2),'type':_0x135d4c(0xd4),'allowEmpty':!![]}]);var _0x3ca2f5={'amount':_0x155d23[_0x135d4c(0x102)],'token_bundle':[]};return _0x155d23[_0x135d4c(0x107)]?((0x0,_cardanoAddressParameters[_0x135d4c(0xe0)])(_0x155d23[_0x135d4c(0x107)]),_0x3ca2f5[_0x135d4c(0x106)]=(0x0,_cardanoAddressParameters[_0x135d4c(0xe3)])(_0x155d23[_0x135d4c(0x107)])):_0x3ca2f5[_0x135d4c(0xde)]=_0x155d23[_0x135d4c(0xde)],_0x155d23['tokenBundle']&&((0x0,_cardanoTokens[_0x135d4c(0xcd)])(_0x155d23[_0x135d4c(0xd2)]),_0x3ca2f5[_0x135d4c(0xce)]=(0x0,_cardanoTokens[_0x135d4c(0xd0)])(_0x155d23['tokenBundle'])),_0x3ca2f5;}),_0x1762e7=[];_0x2bc3d9[_0x520afa(0xc8)]&&(_0x1762e7=_0x2bc3d9[_0x520afa(0xc8)][_0x520afa(0xdf)](_cardanoCertificate[_0x520afa(0xf5)]));var _0x571bd4=[];return _0x2bc3d9[_0x520afa(0xdd)]&&(_0x571bd4=_0x2bc3d9['withdrawals'][_0x520afa(0xdf)](function(_0x59dd62){var _0x111872=_0x520afa;return(0x0,_paramsValidator[_0x111872(0xdb)])(_0x59dd62,[{'name':_0x111872(0xf7),'obligatory':!![]},{'name':'amount','type':_0x111872(0x102),'obligatory':!![]}]),{'path':(0x0,_pathUtils[_0x111872(0xf1)])(_0x59dd62[_0x111872(0xf7)],0x5),'amount':_0x59dd62['amount']};})),_0xd59ed8['params']={'inputs':_0x4724ce,'outputs':_0xf9f033,'fee':_0x2bc3d9[_0x520afa(0xec)],'ttl':_0x2bc3d9[_0x520afa(0xfb)],'certificates':_0x1762e7,'withdrawals':_0x571bd4,'metadata':_0x2bc3d9[_0x520afa(0xe1)],'validity_interval_start':_0x2bc3d9[_0x520afa(0xd3)],'protocol_magic':_0x2bc3d9[_0x520afa(0xea)],'network_id':_0x2bc3d9[_0x520afa(0xe7)]},_0xd59ed8;}var _0x502da1=_0x80eea[_0xd81ec2(0xca)];return _0x502da1[_0xd81ec2(0xf9)]=function _0x5ce080(_0x1d5615){var _0x2cbb05=_0xd81ec2;if(!this[_0x2cbb05(0x100)][_0x2cbb05(0xe4)](CardanoSignTransactionFeatures[_0x1d5615]))throw _constants[_0x2cbb05(0xf0)][_0x2cbb05(0xdc)]('Method_InvalidParameter',_0x2cbb05(0xc6)+_0x1d5615+_0x2cbb05(0xc3));},_0x502da1[_0xd81ec2(0xe9)]=function _0x1403cc(){var _0x301c33=_0xd81ec2,_0x112e0d=this,_0x508157=this[_0x301c33(0x101)];_0x508157[_0x301c33(0xc8)][_0x301c33(0xdf)](function(_0xed3884){var _0x5d80e3=_0x301c33;_0xed3884[_0x5d80e3(0xd9)]===_cardano['CERTIFICATE_TYPE'][_0x5d80e3(0xcf)]&&_0x112e0d[_0x5d80e3(0xf9)](_0x5d80e3(0xcc));}),_0x508157['validity_interval_start']!=null&&this['_ensureFeatureIsSupported'](_0x301c33(0xbe)),_0x508157[_0x301c33(0xed)][_0x301c33(0xdf)](function(_0x496bf2){var _0x3d6785=_0x301c33;_0x496bf2['token_bundle']&&_0x496bf2[_0x3d6785(0xce)][_0x3d6785(0xf4)]>0x0&&_0x112e0d[_0x3d6785(0xf9)]('MultiassetOutputs');});},_0x502da1[_0xd81ec2(0xe6)]=(function(){var _0xc4fc5e=_0xd81ec2,_0x34675e=(0x0,_asyncToGenerator2[_0xc4fc5e(0xc1)])(_regenerator[_0xc4fc5e(0xc1)]['mark'](function _0x2ff0c8(){var _0x25d40a=_0xc4fc5e,_0x16fdc1,_0x1e7470,_0x337625;return _regenerator[_0x25d40a(0xc1)][_0x25d40a(0xff)](function _0x1fe80c(_0x459997){var _0x943f78=_0x25d40a;while(0x1){switch(_0x459997['prev']=_0x459997[_0x943f78(0xd5)]){case 0x0:this[_0x943f78(0xe9)](),_0x16fdc1=this['device']['getCommands'](),_0x459997[_0x943f78(0xd5)]=0x4;return _0x16fdc1['typedCall']('CardanoSignTx','CardanoSignedTx',this[_0x943f78(0x101)]);case 0x4:_0x1e7470=_0x459997[_0x943f78(0xf8)],_0x337625=_0x1e7470['message'];return _0x459997[_0x943f78(0xf3)](_0x943f78(0xda),{'hash':_0x337625[_0x943f78(0xe2)],'serializedTx':_0x337625[_0x943f78(0xd8)]});case 0x7:case _0x943f78(0xbf):return _0x459997[_0x943f78(0xc4)]();}}},_0x2ff0c8,this);}));function _0x22de10(){var _0x25bdf8=_0xc4fc5e;return _0x34675e[_0x25bdf8(0xbd)](this,arguments);}return _0x22de10;}()),_0x80eea;}(_AbstractMethod2['default']);exports[a22_0x941640(0xc1)]=CardanoSignTransaction;