'use strict';var a12_0x4556cf=a12_0x4c91;(function(_0x300cb9,_0x476581){var _0x15d0f5=a12_0x4c91,_0x48bbac=_0x300cb9();while(!![]){try{var _0x50e4bb=parseInt(_0x15d0f5(0xd5))/0x1+parseInt(_0x15d0f5(0xa3))/0x2+parseInt(_0x15d0f5(0xea))/0x3+-parseInt(_0x15d0f5(0xa2))/0x4*(-parseInt(_0x15d0f5(0x9e))/0x5)+-parseInt(_0x15d0f5(0x97))/0x6*(parseInt(_0x15d0f5(0xd1))/0x7)+-parseInt(_0x15d0f5(0xc3))/0x8+parseInt(_0x15d0f5(0xd2))/0x9*(-parseInt(_0x15d0f5(0xdb))/0xa);if(_0x50e4bb===_0x476581)break;else _0x48bbac['push'](_0x48bbac['shift']());}catch(_0x2ce8d3){_0x48bbac['push'](_0x48bbac['shift']());}}}(a12_0xc667,0x4cae8));var _interopRequireDefault=require('@babel/runtime/helpers/interopRequireDefault');exports[a12_0x4556cf(0xd6)]=!![],exports[a12_0x4556cf(0xca)]=void 0x0;function a12_0xc667(){var _0x3cf5c2=['boolean','firmwareStatus','method','2559405DWEevd','ERRORS','call','REQUEST_PERMISSION','4JAaSQP','263714omidnG','getDevicePath','parse','allowDeviceMode','getCustomMessages','getPopupPromise','versionCompare','wrap','getVersion','forEach','min','name','firmwareRange','createUiPromise','checkFirmwareRange','setDevice','apply','network','read','FIRMWARE_NOT_SUPPORTED','instance','requireDeviceMode','overridden','TYPES','none','Method_PermissionsNotGranted','mark','hasOwnProperty','skipFirmwareCheck','run','keepSession','next','3624904AbpvWc','features','DEVICE','load','remember','RECEIVE_CONFIRMATION','abrupt','default','PERMISSIONS_KEY','filter','granted','state','UiMessage','hasExpectedDeviceState','49QXKQFS','36BTDXpr','responseID','return','119904nEwWeI','__esModule','getSettings','NETWORK','origin','type','35980BJfuiv','FIRMWARE_NOT_INSTALLED','deviceInstance','find','overridePreviousCall','SEEDLESS','useEmptyPassphrase','postMessage','prototype','deviceState','startsWith','1.0.0','requiredPermissions','payload','DeviceMessage','398190hCvRWS','max','dispose','stop','2.0.0','allowSeedlessDevice','device_id','toMessageObject','Bitcoin','end','promise','sent','prev','isArray','length','concat','FIRMWARE_OLD','useDeviceState','98382NObvDu','device','devicePath','skipFinalReload'];a12_0xc667=function(){return _0x3cf5c2;};return a12_0xc667();}function a12_0x4c91(_0x43bc5c,_0x1974f6){var _0xc66726=a12_0xc667();return a12_0x4c91=function(_0x4c9153,_0x162d03){_0x4c9153=_0x4c9153-0x93;var _0x244aa8=_0xc66726[_0x4c9153];return _0x244aa8;},a12_0x4c91(_0x43bc5c,_0x1974f6);}var _regenerator=_interopRequireDefault(require('@babel/runtime/regenerator')),_asyncToGenerator2=_interopRequireDefault(require('@babel/runtime/helpers/asyncToGenerator')),_Device=_interopRequireDefault(require('../../device/Device')),_DataManager=_interopRequireDefault(require('../../data/DataManager')),_constants=require('../../constants'),_storage=require('../../storage'),_versionUtils=require('../../utils/versionUtils'),_builder=require('../../message/builder'),AbstractMethod=(function(){var _0x40ab2a=a12_0x4556cf;function _0x3b5424(_0x95f1f9){var _0x217391=a12_0x4c91,_0x270234=this,_0x1597ab=_0x95f1f9['payload'];this[_0x217391(0xae)]=_0x1597ab[_0x217391(0x9d)],this[_0x217391(0xd3)]=_0x95f1f9['id']||0x0,this['devicePath']=_0x1597ab[_0x217391(0x98)]?_0x1597ab[_0x217391(0x98)]['path']:null,this[_0x217391(0xdd)]=_0x1597ab[_0x217391(0x98)]?_0x1597ab[_0x217391(0x98)][_0x217391(0xb7)]:0x0,this[_0x217391(0xe4)]=_0x1597ab[_0x217391(0x98)]?_0x1597ab[_0x217391(0x98)][_0x217391(0xce)]:null,this[_0x217391(0xd0)]=_0x1597ab[_0x217391(0x98)]?Object[_0x217391(0xe3)][_0x217391(0xbe)][_0x217391(0xa0)](_0x1597ab[_0x217391(0x98)],_0x217391(0xce)):![],this['keepSession']=typeof _0x1597ab['keepSession']===_0x217391(0x9b)?_0x1597ab[_0x217391(0xc1)]:![],this[_0x217391(0x9a)]=typeof _0x1597ab[_0x217391(0x9a)]==='boolean'?_0x1597ab[_0x217391(0x9a)]:![],this[_0x217391(0xbf)]=![],this[_0x217391(0xdf)]=typeof _0x1597ab['override']===_0x217391(0x9b)?_0x1597ab['override']:![],this[_0x217391(0xb9)]=![],this[_0x217391(0xe1)]=typeof _0x1597ab[_0x217391(0xe1)]==='boolean'?_0x1597ab[_0x217391(0xe1)]:![],this[_0x217391(0xef)]=typeof _0x1597ab[_0x217391(0xef)]===_0x217391(0x9b)?_0x1597ab[_0x217391(0xef)]:![],this[_0x217391(0xa6)]=[],this[_0x217391(0xb8)]=[],this[_0x217391(0xef)]&&(this[_0x217391(0xa6)]=[_constants['UI'][_0x217391(0xe0)]]),this['debugLink']=![],this[_0x217391(0xb4)]=_0x217391(0xf2),Object['keys'](_constants[_0x217391(0xd8)][_0x217391(0xba)])[_0x217391(0xac)](function(_0x33317d){var _0x4fb97a=_0x217391;if(_0x270234['name'][_0x4fb97a(0xe5)](_0x33317d)){_0x270234[_0x4fb97a(0xb4)]=_constants[_0x4fb97a(0xd8)][_0x4fb97a(0xba)][_0x33317d];return;}}),this[_0x217391(0xaf)]={'1':{'min':_0x217391(0xe6),'max':'0'},'2':{'min':_0x217391(0xee),'max':'0'}},this[_0x217391(0xe7)]=[],this['useDevice']=!![],this[_0x217391(0x96)]=!![],this['useUi']=!![];}var _0x3ae6d4=_0x3b5424['prototype'];return _0x3ae6d4[_0x40ab2a(0xb2)]=function _0x29755e(_0x398e8f){var _0x2217ec=_0x40ab2a;this['device']=_0x398e8f,this[_0x2217ec(0x99)]=_0x398e8f[_0x2217ec(0xa4)]();},_0x3ae6d4[_0x40ab2a(0xc0)]=(function(){var _0x50fd22=_0x40ab2a,_0x2f9449=(0x0,_asyncToGenerator2[_0x50fd22(0xca)])(_regenerator[_0x50fd22(0xca)][_0x50fd22(0xbd)](function _0xa5b69c(){var _0x129705=_0x50fd22;return _regenerator[_0x129705(0xca)][_0x129705(0xaa)](function _0x20526b(_0x223ac1){var _0x5925bd=_0x129705;while(0x1){switch(_0x223ac1[_0x5925bd(0xf6)]=_0x223ac1[_0x5925bd(0xc2)]){case 0x0:return _0x223ac1[_0x5925bd(0xc9)]('return',new Promise(function(_0x830e3a){return _0x830e3a({});}));case 0x1:case'end':return _0x223ac1[_0x5925bd(0xed)]();}}},_0xa5b69c);}));function _0x2e86b4(){var _0x3829ec=_0x50fd22;return _0x2f9449[_0x3829ec(0xb3)](this,arguments);}return _0x2e86b4;}()),_0x3ae6d4['requestPermissions']=(function(){var _0x182a6c=_0x40ab2a,_0x53637c=(0x0,_asyncToGenerator2[_0x182a6c(0xca)])(_regenerator[_0x182a6c(0xca)]['mark'](function _0xe21e69(){var _0x3a06db=_0x182a6c,_0x2418da,_0x46c460,_0x48dd9c;return _regenerator[_0x3a06db(0xca)][_0x3a06db(0xaa)](function _0x4ccf21(_0x599481){var _0x5b1e9b=_0x3a06db;while(0x1){switch(_0x599481['prev']=_0x599481['next']){case 0x0:_0x599481[_0x5b1e9b(0xc2)]=0x2;return this[_0x5b1e9b(0xa8)]()[_0x5b1e9b(0xf4)];case 0x2:_0x2418da=this[_0x5b1e9b(0xb0)](_constants['UI']['RECEIVE_PERMISSION'],this[_0x5b1e9b(0x98)]),this['postMessage']((0x0,_builder[_0x5b1e9b(0xcf)])(_constants['UI'][_0x5b1e9b(0xa1)],{'permissions':this[_0x5b1e9b(0xe7)],'device':this[_0x5b1e9b(0x98)][_0x5b1e9b(0xf1)]()})),_0x599481['next']=0x6;return _0x2418da[_0x5b1e9b(0xf4)];case 0x6:_0x46c460=_0x599481[_0x5b1e9b(0xf5)],_0x48dd9c=_0x46c460['payload'];if(!_0x48dd9c[_0x5b1e9b(0xcd)]){_0x599481[_0x5b1e9b(0xc2)]=0xb;break;}this['savePermissions'](!_0x48dd9c[_0x5b1e9b(0xc7)]);return _0x599481[_0x5b1e9b(0xc9)](_0x5b1e9b(0xd4),!![]);case 0xb:return _0x599481['abrupt'](_0x5b1e9b(0xd4),![]);case 0xc:case _0x5b1e9b(0xf3):return _0x599481['stop']();}}},_0xe21e69,this);}));function _0x5d5de0(){var _0x398463=_0x182a6c;return _0x53637c[_0x398463(0xb3)](this,arguments);}return _0x5d5de0;}()),_0x3ae6d4['checkPermissions']=function _0x260d05(){var _0x10f4d3=_0x40ab2a,_0xdfe62=this,_0x11347b=(0x0,_storage[_0x10f4d3(0xc6)])(_storage['PERMISSIONS_KEY']),_0x192492=[][_0x10f4d3(0x94)](this[_0x10f4d3(0xe7)]);if(_0x11347b&&Array['isArray'](_0x11347b)){var _0x30055a=_0x11347b[_0x10f4d3(0xcc)](function(_0x3543b2){var _0x4420b8=_0x10f4d3;return _0x3543b2[_0x4420b8(0xd9)]===_DataManager[_0x4420b8(0xca)][_0x4420b8(0xd7)](_0x4420b8(0xd9));});_0x30055a[_0x10f4d3(0x93)]>0x0&&(_0x192492=_0x192492[_0x10f4d3(0xcc)](function(_0x62a039){var _0x1b605b=_0x10f4d3,_0x18975f=_0x30055a[_0x1b605b(0xde)](function(_0x38708c){var _0x530864=_0x1b605b;return _0x38708c[_0x530864(0xda)]===_0x62a039&&_0x38708c[_0x530864(0x98)]===_0xdfe62['device'][_0x530864(0xc4)][_0x530864(0xf0)];});return!_0x18975f;}));}this[_0x10f4d3(0xe7)]=_0x192492;},_0x3ae6d4['savePermissions']=function _0x1328a7(_0x545944){var _0x1fd168=_0x40ab2a,_0x473648=this;_0x545944===void 0x0&&(_0x545944=![]);var _0x20534c=(0x0,_storage[_0x1fd168(0xc6)])(_storage[_0x1fd168(0xcb)],_0x545944);(!_0x20534c||!Array[_0x1fd168(0xf7)](_0x20534c))&&(_0x20534c=JSON[_0x1fd168(0xa5)]('[]'));var _0x3aaa41=this[_0x1fd168(0xe7)]['map'](function(_0x3a6a8a){var _0x3d6b4a=_0x1fd168;return{'origin':_DataManager[_0x3d6b4a(0xca)]['getSettings'](_0x3d6b4a(0xd9)),'type':_0x3a6a8a,'device':_0x473648[_0x3d6b4a(0x98)][_0x3d6b4a(0xc4)][_0x3d6b4a(0xf0)]};}),_0x1b30ee=![];if(this[_0x1fd168(0xe7)]['indexOf'](_0x1fd168(0xb5))>=0x0){var _0x566e40=_0x20534c[_0x1fd168(0xcc)](function(_0x2414f9){var _0x5476ad=_0x1fd168;return _0x2414f9[_0x5476ad(0xd9)]===_DataManager[_0x5476ad(0xca)]['getSettings']('origin')&&_0x2414f9['type']===_0x5476ad(0xb5)&&_0x2414f9['device']===_0x473648['device'][_0x5476ad(0xc4)][_0x5476ad(0xf0)];});_0x566e40['length']<0x1&&(_0x1b30ee=!![]);}var _0x18a559=_0x20534c[_0x1fd168(0xcc)](function(_0x99cb83){var _0x29a73c=_0x1fd168;return _0x99cb83[_0x29a73c(0xd9)]===_DataManager[_0x29a73c(0xca)][_0x29a73c(0xd7)](_0x29a73c(0xd9));});_0x18a559[_0x1fd168(0x93)]>0x0&&(_0x3aaa41=_0x3aaa41[_0x1fd168(0xcc)](function(_0x176637){var _0x1e1f2a=_0x1fd168,_0x42a7e3=_0x18a559[_0x1e1f2a(0xde)](function(_0x2ad44c){var _0x10e184=_0x1e1f2a;return _0x2ad44c[_0x10e184(0xda)]===_0x176637[_0x10e184(0xda)]&&_0x2ad44c[_0x10e184(0x98)]===_0x176637[_0x10e184(0x98)];});return!_0x42a7e3;})),(0x0,_storage['save'])(_storage[_0x1fd168(0xcb)],_0x20534c[_0x1fd168(0x94)](_0x3aaa41),_0x545944),_0x1b30ee&&this[_0x1fd168(0xe2)]((0x0,_builder[_0x1fd168(0xe9)])(_constants[_0x1fd168(0xc5)]['CONNECT'],this['device'][_0x1fd168(0xf1)]()));},_0x3ae6d4[_0x40ab2a(0xb1)]=(function(){var _0x45aa6d=_0x40ab2a,_0x50f61c=(0x0,_asyncToGenerator2[_0x45aa6d(0xca)])(_regenerator['default']['mark'](function _0x4bc84d(_0x238d58){var _0x3961e1=_0x45aa6d,_0x188d7b,_0x2675ea,_0x433e75,_0x1f2de7,_0x700a9d,_0x5215eb;return _regenerator[_0x3961e1(0xca)][_0x3961e1(0xaa)](function _0x3dd074(_0x3ebb04){var _0x3606fd=_0x3961e1;while(0x1){switch(_0x3ebb04[_0x3606fd(0xf6)]=_0x3ebb04['next']){case 0x0:if(!this[_0x3606fd(0xbf)]){_0x3ebb04[_0x3606fd(0xc2)]=0x2;break;}return _0x3ebb04[_0x3606fd(0xc9)](_0x3606fd(0xd4),null);case 0x2:_0x188d7b=this[_0x3606fd(0x98)];if(_0x188d7b['features']){_0x3ebb04[_0x3606fd(0xc2)]=0x5;break;}return _0x3ebb04[_0x3606fd(0xc9)]('return',null);case 0x5:_0x2675ea=_0x188d7b[_0x3606fd(0xab)](),_0x433e75=_0x2675ea[0x0],_0x1f2de7=this[_0x3606fd(0xaf)][_0x433e75];if(!(_0x188d7b[_0x3606fd(0x9c)]===_0x3606fd(0xbb))){_0x3ebb04[_0x3606fd(0xc2)]=0xa;break;}return _0x3ebb04['abrupt'](_0x3606fd(0xd4),_constants['UI'][_0x3606fd(0xdc)]);case 0xa:if(!(_0x1f2de7[_0x3606fd(0xad)]==='0')){_0x3ebb04[_0x3606fd(0xc2)]=0xc;break;}return _0x3ebb04[_0x3606fd(0xc9)]('return',_constants['UI'][_0x3606fd(0xb6)]);case 0xc:if(!(_0x188d7b[_0x3606fd(0x9c)]==='required'||(0x0,_versionUtils[_0x3606fd(0xa9)])(_0x2675ea,_0x1f2de7['min'])<0x0)){_0x3ebb04[_0x3606fd(0xc2)]=0xe;break;}return _0x3ebb04[_0x3606fd(0xc9)](_0x3606fd(0xd4),_constants['UI'][_0x3606fd(0x95)]);case 0xe:if(!(_0x1f2de7['max']!=='0'&&(0x0,_versionUtils[_0x3606fd(0xa9)])(_0x2675ea,_0x1f2de7[_0x3606fd(0xeb)])>0x0)){_0x3ebb04[_0x3606fd(0xc2)]=0x1c;break;}if(!_0x238d58){_0x3ebb04[_0x3606fd(0xc2)]=0x1b;break;}_0x3ebb04[_0x3606fd(0xc2)]=0x12;return this[_0x3606fd(0xa8)]()[_0x3606fd(0xf4)];case 0x12:_0x700a9d=this[_0x3606fd(0xb0)](_constants['UI'][_0x3606fd(0xc8)],_0x188d7b),this['postMessage']((0x0,_builder[_0x3606fd(0xcf)])(_constants['UI']['FIRMWARE_NOT_COMPATIBLE'],_0x188d7b[_0x3606fd(0xf1)]())),_0x3ebb04[_0x3606fd(0xc2)]=0x16;return _0x700a9d[_0x3606fd(0xf4)];case 0x16:_0x5215eb=_0x3ebb04[_0x3606fd(0xf5)];if(_0x5215eb[_0x3606fd(0xe8)]){_0x3ebb04[_0x3606fd(0xc2)]=0x19;break;}throw _constants[_0x3606fd(0x9f)]['TypedError'](_0x3606fd(0xbc));case 0x19:_0x3ebb04[_0x3606fd(0xc2)]=0x1c;break;case 0x1b:return _0x3ebb04['abrupt'](_0x3606fd(0xd4),_constants['UI']['FIRMWARE_NOT_COMPATIBLE']);case 0x1c:return _0x3ebb04['abrupt'](_0x3606fd(0xd4),null);case 0x1d:case _0x3606fd(0xf3):return _0x3ebb04['stop']();}}},_0x4bc84d,this);}));function _0x42230c(_0x424208){return _0x50f61c['apply'](this,arguments);}return _0x42230c;}()),_0x3ae6d4[_0x40ab2a(0xa7)]=function _0x252dab(){return null;},_0x3ae6d4[_0x40ab2a(0xec)]=function _0x5a7cc5(){},_0x3b5424;}());exports[a12_0x4556cf(0xca)]=AbstractMethod;