'use strict';function a63_0x3a65(){var _0x174931=['transformOrigTransactions','stop','options','payload','typedCall','getCommands','read','version','refTxs','call','array','addresses','forEach','params','isBackendSupported','account','596568mhRYMC','tokens','29603omFeJH','dustLimit','initBlockchain','filter','requiredPermissions','op_return_data','sent','getReferencedTransactions','round','plus','enhanceTrezorInputs','4456068ccfVIB','abrupt','getTime','next','validateTrezorOutputs','coin','enumerable','slice','defineProperty','1474137PsyXoP','xpub','return','Sign\x20transaction','outputs','lock_time','prototype','timestamp','getAccountInfo','getOwnPropertyDescriptor','locktime','keys','defineProperties','lte','device','end','versionGroupId','validateTrezorInputs','inputs','length','7295SuaMxl','hash','16JtCjZT','amount','firmwareRange','bind','TypedError','Total\x20amount\x20is\x20below\x20dust\x20limit.','__esModule','postMessage','7360456jMZycV','apply','string','boolean','2284WmNisv','getFirmwareRange','default','Method_UnknownCoin','hasTimestamp','transformReferencedTransactions','getTransactions','getOwnPropertySymbols','unavailableCapabilities','coinInfo','branchId','reduce','object','mark','push','hasOwnProperty','36012hmgySZ','name','write','number','expiry','ERRORS','overwintered','replaceTransaction','serializedTx','validateParams','bin_outputs','getOwnPropertyDescriptors','60KqjPNr'];a63_0x3a65=function(){return _0x174931;};return a63_0x3a65();}var a63_0x21e775=a63_0x2e55;(function(_0xffc0b4,_0x439df2){var _0x3f7a28=a63_0x2e55,_0x43551c=_0xffc0b4();while(!![]){try{var _0x439960=-parseInt(_0x3f7a28(0xe2))/0x1*(-parseInt(_0x3f7a28(0xc6))/0x2)+parseInt(_0x3f7a28(0x9a))/0x3+-parseInt(_0x3f7a28(0xd2))/0x4*(-parseInt(_0x3f7a28(0xc4))/0x5)+-parseInt(_0x3f7a28(0xa7))/0x6+-parseInt(_0x3f7a28(0x9c))/0x7+parseInt(_0x3f7a28(0xce))/0x8+parseInt(_0x3f7a28(0xb0))/0x9*(-parseInt(_0x3f7a28(0x89))/0xa);if(_0x439960===_0x439df2)break;else _0x43551c['push'](_0x43551c['shift']());}catch(_0x4daa7c){_0x43551c['push'](_0x43551c['shift']());}}}(a63_0x3a65,0x7c9e1));var _interopRequireDefault=require('@babel/runtime/helpers/interopRequireDefault');exports[a63_0x21e775(0xcc)]=!![],exports['default']=void 0x0;function a63_0x2e55(_0x15c881,_0x2b3b55){var _0x3a6521=a63_0x3a65();return a63_0x2e55=function(_0x2e5575,_0x48f7cc){_0x2e5575=_0x2e5575-0x83;var _0x38fce6=_0x3a6521[_0x2e5575];return _0x38fce6;},a63_0x2e55(_0x15c881,_0x2b3b55);}var _regenerator=_interopRequireDefault(require('@babel/runtime/regenerator')),_defineProperty2=_interopRequireDefault(require('@babel/runtime/helpers/defineProperty')),_asyncToGenerator2=_interopRequireDefault(require('@babel/runtime/helpers/asyncToGenerator')),_inheritsLoose2=_interopRequireDefault(require('@babel/runtime/helpers/inheritsLoose')),_bignumber=_interopRequireDefault(require('bignumber.js')),_AbstractMethod2=_interopRequireDefault(require('./AbstractMethod')),_paramsValidator=require('./helpers/paramsValidator'),_CoinInfo=require('../../data/CoinInfo'),_pathUtils=require('../../utils/pathUtils'),_constants=require('../../constants'),_BlockchainLink=require('../../backend/BlockchainLink'),_signtx=_interopRequireDefault(require('./helpers/signtx')),_signtxLegacy=_interopRequireDefault(require('./helpers/signtx-legacy')),_signtxVerify=_interopRequireDefault(require('./helpers/signtxVerify')),_tx=require('./tx');function ownKeys(_0x500a2a,_0x3823df){var _0xe257c4=a63_0x21e775,_0x39cac1=Object[_0xe257c4(0xbb)](_0x500a2a);if(Object['getOwnPropertySymbols']){var _0x157459=Object[_0xe257c4(0xd9)](_0x500a2a);_0x3823df&&(_0x157459=_0x157459[_0xe257c4(0x9f)](function(_0x2358dd){var _0x11060a=_0xe257c4;return Object[_0x11060a(0xb9)](_0x500a2a,_0x2358dd)[_0x11060a(0xad)];})),_0x39cac1[_0xe257c4(0xe0)][_0xe257c4(0xcf)](_0x39cac1,_0x157459);}return _0x39cac1;}function _objectSpread(_0x5f2712){var _0xa7484b=a63_0x21e775;for(var _0x14ae18=0x1;_0x14ae18<arguments[_0xa7484b(0xc3)];_0x14ae18++){var _0x397ba4=arguments[_0x14ae18]!=null?arguments[_0x14ae18]:{};if(_0x14ae18%0x2)ownKeys(Object(_0x397ba4),!![])[_0xa7484b(0x96)](function(_0x353714){var _0x5e6ced=_0xa7484b;(0x0,_defineProperty2[_0x5e6ced(0xd4)])(_0x5f2712,_0x353714,_0x397ba4[_0x353714]);});else Object[_0xa7484b(0x88)]?Object[_0xa7484b(0xbc)](_0x5f2712,Object['getOwnPropertyDescriptors'](_0x397ba4)):ownKeys(Object(_0x397ba4))['forEach'](function(_0x3b7c31){var _0x183742=_0xa7484b;Object[_0x183742(0xaf)](_0x5f2712,_0x3b7c31,Object[_0x183742(0xb9)](_0x397ba4,_0x3b7c31));});}return _0x5f2712;}var SignTransaction=function(_0x192a57){var _0x17b8cb=a63_0x21e775;(0x0,_inheritsLoose2[_0x17b8cb(0xd4)])(_0x2d4064,_0x192a57);function _0x2d4064(_0x491ca4){var _0x599981=_0x17b8cb,_0x376a4c;_0x376a4c=_0x192a57[_0x599981(0x93)](this,_0x491ca4)||this,_0x376a4c[_0x599981(0xa0)]=[_0x599981(0x90),_0x599981(0xe4)],_0x376a4c['info']=_0x599981(0xb3);var _0x1a5678=_0x491ca4[_0x599981(0x8d)];(0x0,_paramsValidator[_0x599981(0x86)])(_0x1a5678,[{'name':_0x599981(0xac),'type':_0x599981(0xd0),'obligatory':!![]},{'name':_0x599981(0xc2),'type':'array','obligatory':!![]},{'name':_0x599981(0xb4),'type':_0x599981(0x94),'obligatory':!![]},{'name':_0x599981(0x92),'type':_0x599981(0x94),'allowEmpty':!![]},{'name':_0x599981(0x99),'type':_0x599981(0xde)},{'name':'locktime','type':'number'},{'name':_0x599981(0xb7),'type':'number'},{'name':'version','type':_0x599981(0xe5)},{'name':_0x599981(0xe6),'type':'number'},{'name':_0x599981(0x83),'type':_0x599981(0xd1)},{'name':_0x599981(0xc0),'type':_0x599981(0xe5)},{'name':_0x599981(0xdc),'type':_0x599981(0xe5)},{'name':_0x599981(0xe0),'type':_0x599981(0xd1)}]);var _0x239b6b=(0x0,_CoinInfo['getBitcoinNetwork'])(_0x1a5678[_0x599981(0xac)]);if(!_0x239b6b)throw _constants[_0x599981(0xe7)][_0x599981(0xca)](_0x599981(0xd5));else _0x376a4c[_0x599981(0xc8)]=(0x0,_paramsValidator[_0x599981(0xd3)])(_0x376a4c[_0x599981(0xe3)],_0x239b6b,_0x376a4c['firmwareRange']),_0x376a4c['info']=(0x0,_pathUtils['getLabel'])('Sign\x20#NETWORK\x20transaction',_0x239b6b);Object[_0x599981(0xb6)][_0x599981(0xe1)][_0x599981(0x93)](_0x1a5678,'refTxs')&&_0x1a5678['refTxs'][_0x599981(0x96)](function(_0x4fc0f3){var _0x2c0f9b=_0x599981;(0x0,_paramsValidator[_0x2c0f9b(0x86)])(_0x4fc0f3,[{'name':_0x2c0f9b(0xc5),'type':_0x2c0f9b(0xd0),'obligatory':!![]},{'name':_0x2c0f9b(0xc2),'type':_0x2c0f9b(0x94),'obligatory':!![]},{'name':_0x2c0f9b(0x87),'type':_0x2c0f9b(0x94),'obligatory':!Array['isArray'](_0x4fc0f3['outputs'])},{'name':_0x2c0f9b(0xb4),'type':'array'},{'name':_0x2c0f9b(0x91),'type':_0x2c0f9b(0xe5),'obligatory':!![]},{'name':_0x2c0f9b(0xb5),'type':_0x2c0f9b(0xe5),'obligatory':!![]},{'name':'extra_data','type':_0x2c0f9b(0xd0)},{'name':_0x2c0f9b(0xb7),'type':_0x2c0f9b(0xe5)},{'name':'version_group_id','type':_0x2c0f9b(0xe5)}]);});var _0x10df43=(0x0,_tx[_0x599981(0xc1)])(_0x1a5678[_0x599981(0xc2)],_0x239b6b),_0x5644b3=(0x0,_tx[_0x599981(0xab)])(_0x1a5678['outputs'],_0x239b6b),_0x416723=_0x5644b3[_0x599981(0x9f)](function(_0x41f9e1){var _0x52a897=_0x599981;return typeof _0x41f9e1['amount']===_0x52a897(0xd0)&&!Object[_0x52a897(0xb6)][_0x52a897(0xe1)]['call'](_0x41f9e1,_0x52a897(0xa1));});if(_0x416723['length']>0x0){var _0x3053d5=_0x416723[_0x599981(0xdd)](function(_0x2a2ca7,_0x55012b){var _0x14979e=_0x599981;return _0x2a2ca7[_0x14979e(0xa5)](typeof _0x55012b['amount']==='string'?_0x55012b[_0x14979e(0xc7)]:'0');},new _bignumber['default'](0x0));if(_0x3053d5[_0x599981(0xbd)](_0x239b6b[_0x599981(0x9d)]))throw _constants[_0x599981(0xe7)]['TypedError']('Method_InvalidParameter',_0x599981(0xcb));}_0x376a4c[_0x599981(0x97)]={'inputs':_0x10df43,'outputs':_0x1a5678[_0x599981(0xb4)],'refTxs':_0x1a5678[_0x599981(0x92)],'addresses':_0x1a5678['account']?_0x1a5678['account']['addresses']:undefined,'options':{'lock_time':_0x1a5678[_0x599981(0xba)],'timestamp':_0x1a5678[_0x599981(0xb7)],'version':_0x1a5678[_0x599981(0x91)],'expiry':_0x1a5678[_0x599981(0xe6)],'overwintered':_0x1a5678['overwintered'],'version_group_id':_0x1a5678[_0x599981(0xc0)],'branch_id':_0x1a5678[_0x599981(0xdc)]},'coinInfo':_0x239b6b,'push':typeof _0x1a5678['push']===_0x599981(0xd1)?_0x1a5678[_0x599981(0xe0)]:![]};if(_0x239b6b[_0x599981(0xd6)]&&!Object[_0x599981(0xb6)][_0x599981(0xe1)][_0x599981(0x93)](_0x1a5678,'timestamp')){var _0x239347=new Date();_0x376a4c[_0x599981(0x97)][_0x599981(0x8c)]['timestamp']=Math[_0x599981(0xa4)](_0x239347[_0x599981(0xa9)]()/0x3e8);}return _0x376a4c;}var _0x4867df=_0x2d4064[_0x17b8cb(0xb6)];return _0x4867df['run']=(function(){var _0x17f6cd=_0x17b8cb,_0x4b6653=(0x0,_asyncToGenerator2[_0x17f6cd(0xd4)])(_regenerator[_0x17f6cd(0xd4)][_0x17f6cd(0xdf)](function _0x337aed(){var _0x23a7ec=_0x17f6cd,_0x5e09c8,_0x46175c,_0xd75d51,_0x46c676,_0x1c862b,_0xbd2aff,_0x44d921,_0x5e10b8,_0xefd827,_0x520213,_0x221f21,_0x396db2,_0x402a01,_0x441c59,_0x587900,_0x15b622,_0x1e4bcb;return _regenerator[_0x23a7ec(0xd4)]['wrap'](function _0xec7af4(_0xbc6829){var _0x4baac2=_0x23a7ec;while(0x1){switch(_0xbc6829['prev']=_0xbc6829[_0x4baac2(0xaa)]){case 0x0:_0x5e09c8=this[_0x4baac2(0xbe)],_0x46175c=this[_0x4baac2(0x97)],_0xd75d51=[],_0x46c676=_0x5e09c8[_0x4baac2(0xda)][_0x4baac2(0x84)];if(_0x46175c[_0x4baac2(0x92)]){_0xbc6829[_0x4baac2(0xaa)]=0x21;break;}_0x1c862b=(0x0,_tx[_0x4baac2(0xa3)])(_0x46175c['inputs']);if(!(_0x1c862b[_0x4baac2(0xc3)]>0x0)){_0xbc6829[_0x4baac2(0xaa)]=0x1f;break;}(0x0,_BlockchainLink['isBackendSupported'])(_0x46175c[_0x4baac2(0xdb)]),_0xbc6829['next']=0x9;return(0x0,_BlockchainLink[_0x4baac2(0x9e)])(_0x46175c['coinInfo'],this[_0x4baac2(0xcd)]);case 0x9:_0xbd2aff=_0xbc6829[_0x4baac2(0xa2)],_0xbc6829[_0x4baac2(0xaa)]=0xc;return _0xbd2aff['getTransactions'](_0x1c862b);case 0xc:_0x44d921=_0xbc6829[_0x4baac2(0xa2)],(0x0,_tx[_0x4baac2(0xa6)])(this['params'][_0x4baac2(0xc2)],_0x44d921),_0xd75d51=(0x0,_tx[_0x4baac2(0xd7)])(_0x44d921,_0x46175c[_0x4baac2(0xdb)]),_0x5e10b8=(0x0,_tx['getOrigTransactions'])(_0x46175c[_0x4baac2(0xc2)],_0x46175c[_0x4baac2(0xb4)]);if(!(!_0x46c676&&_0x5e10b8[_0x4baac2(0xc3)]>0x0)){_0xbc6829['next']=0x1f;break;}_0xbc6829['next']=0x13;return _0xbd2aff[_0x4baac2(0xd8)](_0x5e10b8);case 0x13:_0xefd827=_0xbc6829[_0x4baac2(0xa2)],_0x520213=_0x46175c[_0x4baac2(0x95)];if(_0x520213){_0xbc6829[_0x4baac2(0xaa)]=0x1d;break;}_0xbc6829[_0x4baac2(0xaa)]=0x18;return _0x5e09c8[_0x4baac2(0x8f)]()['getHDNode'](_0x46175c[_0x4baac2(0xc2)][0x0]['address_n'][_0x4baac2(0xae)](0x0,0x3),_0x46175c[_0x4baac2(0xdb)]);case 0x18:_0x221f21=_0xbc6829[_0x4baac2(0xa2)],_0xbc6829['next']=0x1b;return _0xbd2aff[_0x4baac2(0xb8)]({'descriptor':_0x221f21['xpubSegwit']||_0x221f21[_0x4baac2(0xb1)],'coin':_0x46175c[_0x4baac2(0xdb)]['name'],'details':_0x4baac2(0x9b)});case 0x1b:_0x396db2=_0xbc6829[_0x4baac2(0xa2)],_0x520213=_0x396db2[_0x4baac2(0x95)];case 0x1d:_0x402a01=(0x0,_tx[_0x4baac2(0x8a)])(_0xefd827,_0x46175c[_0x4baac2(0xdb)],_0x520213),_0xd75d51=_0xd75d51['concat'](_0x402a01);case 0x1f:_0xbc6829[_0x4baac2(0xaa)]=0x22;break;case 0x21:_0xd75d51=_0x46175c[_0x4baac2(0x92)];case 0x22:_0x441c59=!_0x46c676?_signtx[_0x4baac2(0xd4)]:_signtxLegacy[_0x4baac2(0xd4)],_0xbc6829[_0x4baac2(0xaa)]=0x25;return _0x441c59(_0x5e09c8['getCommands']()[_0x4baac2(0x8e)][_0x4baac2(0xc9)](_0x5e09c8[_0x4baac2(0x8f)]()),_0x46175c[_0x4baac2(0xc2)],_0x46175c[_0x4baac2(0xb4)],_0xd75d51,_0x46175c['options'],_0x46175c[_0x4baac2(0xdb)]);case 0x25:_0x587900=_0xbc6829['sent'],_0xbc6829['next']=0x28;return(0x0,_signtxVerify[_0x4baac2(0xd4)])(_0x5e09c8['getCommands']()['getHDNode'][_0x4baac2(0xc9)](_0x5e09c8[_0x4baac2(0x8f)]()),_0x46175c[_0x4baac2(0xc2)],_0x46175c[_0x4baac2(0xb4)],_0x587900[_0x4baac2(0x85)],_0x46175c['coinInfo']);case 0x28:if(!_0x46175c[_0x4baac2(0xe0)]){_0xbc6829[_0x4baac2(0xaa)]=0x31;break;}(0x0,_BlockchainLink[_0x4baac2(0x98)])(_0x46175c[_0x4baac2(0xdb)]),_0xbc6829[_0x4baac2(0xaa)]=0x2c;return(0x0,_BlockchainLink[_0x4baac2(0x9e)])(_0x46175c['coinInfo'],this[_0x4baac2(0xcd)]);case 0x2c:_0x15b622=_0xbc6829[_0x4baac2(0xa2)],_0xbc6829[_0x4baac2(0xaa)]=0x2f;return _0x15b622['pushTransaction'](_0x587900[_0x4baac2(0x85)]);case 0x2f:_0x1e4bcb=_0xbc6829[_0x4baac2(0xa2)];return _0xbc6829[_0x4baac2(0xa8)](_0x4baac2(0xb2),_objectSpread(_objectSpread({},_0x587900),{},{'txid':_0x1e4bcb}));case 0x31:return _0xbc6829[_0x4baac2(0xa8)](_0x4baac2(0xb2),_0x587900);case 0x32:case _0x4baac2(0xbf):return _0xbc6829[_0x4baac2(0x8b)]();}}},_0x337aed,this);}));function _0x58d42f(){var _0x2715e7=_0x17f6cd;return _0x4b6653[_0x2715e7(0xcf)](this,arguments);}return _0x58d42f;}()),_0x2d4064;}(_AbstractMethod2['default']);exports[a63_0x21e775(0xd4)]=SignTransaction;